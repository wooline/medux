import{MetaData,getModuleActionCreatorList,NSP}from"./global";import{TaskCounter,TaskCountEvent}from"./sprite";import{ActionTypes}from"./actions";var loadings={},depthTime=2;export function setLoadingDepthTime(a){depthTime=a}export function setLoading(a,b,c){if(void 0===b&&(b=MetaData.appModuleName),void 0===c&&(c="global"),MetaData.isServer)return a;var d=b+NSP+c;return loadings[d]||(loadings[d]=new TaskCounter(depthTime),loadings[d].addListener(TaskCountEvent,function(a){var d=MetaData.clientStore;if(d){var e,f=getModuleActionCreatorList(b)[ActionTypes.M_LOADING],g=f((e={},e[c]=a.data,e));d.dispatch(g)}})),loadings[d].addItem(a),a}
//# sourceMappingURL=loading.js.map