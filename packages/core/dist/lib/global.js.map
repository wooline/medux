{"version":3,"sources":["../../src/global.ts"],"names":["NSP","root","self","global","MetaData","isServer","window","isDev","process","env","NODE_ENV","actionCreatorMap","clientStore","appModuleName","getModuleActionCreatorList","namespace","obj"],"mappings":"AAAA;AAIA,OAAO,MAAMA,GAAG,GAAG,GAAZ;AAEP,OAAO,MAAMC,IAA8H,GAAK,OAAOC,IAAP,IAAe,QAAf,IAC9IA,IAAI,CAACA,IAAL,KAAcA,IADgI,IAE9IA,IAF6I,IAG5I,OAAOC,MAAP,IAAiB,QAAjB,IAA6BA,MAAM,CAACA,MAAP,KAAkBA,MAA/C,IAAyDA,MAHmF,IAI7I,IAJK;AAMP,OAAO,MAAMC,QAMZ,GAAG;AACFC,EAAAA,QAAQ,EAAE,OAAOF,MAAP,KAAkB,WAAlB,IAAiC,OAAOG,MAAP,KAAkB,WAD3D;AAEFC,EAAAA,KAAK,EAAEC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAF9B;AAGFC,EAAAA,gBAAgB,EAAE,EAHhB;AAIFC,EAAAA,WAAW,EAAE,IAJX;AAKFC,EAAAA,aAAa,EAAE;AALb,CANG;AAqEP,OAAO,SAASC,0BAAT,CAAoCC,SAApC,EAA0E;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAIX,QAAQ,CAACO,gBAAT,CAA0BI,SAA1B,CAAJ,EAA0C;AACxC,WAAOX,QAAQ,CAACO,gBAAT,CAA0BI,SAA1B,CAAP;AACD,GAFD,MAEO;AACL,UAAMC,GAAG,GAAG,EAAZ;AACAZ,IAAAA,QAAQ,CAACO,gBAAT,CAA0BI,SAA1B,IAAuCC,GAAvC;AACA,WAAOA,GAAP;AACD;AACF","sourcesContent":["/*global global:true process:true*/\n\nimport {LoadingState} from './sprite';\n\nexport const NSP = '/';\n\nexport const root: {__REDUX_DEVTOOLS_EXTENSION__?: any; __REDUX_DEVTOOLS_EXTENSION__OPTIONS?: any; onerror: any; onunhandledrejection: any} = ((typeof self == 'object' &&\n  self.self === self &&\n  self) ||\n  (typeof global == 'object' && global.global === global && global) ||\n  this) as any;\n\nexport const MetaData: {\n  isServer: boolean;\n  isDev: boolean;\n  actionCreatorMap: ActionCreatorMap;\n  clientStore: ModelStore;\n  appModuleName: string;\n} = {\n  isServer: typeof global !== 'undefined' && typeof window === 'undefined',\n  isDev: process.env.NODE_ENV !== 'production',\n  actionCreatorMap: {},\n  clientStore: null as any,\n  appModuleName: null as any,\n};\nexport interface ActionCreatorMap {\n  [moduleName: string]: ActionCreatorList;\n}\nexport interface ActionCreatorList {\n  [actionName: string]: ActionCreator;\n}\nexport type ActionCreator = (payload?: any) => Action;\ninterface Store {\n  dispatch(action: Action): void;\n}\nexport interface ModelStore extends Store {\n  _meta_: {\n    reducerMap: ReducerMap;\n    effectMap: EffectMap;\n    injectedModules: {[namespace: string]: boolean};\n    currentViews: CurrentViews;\n    prevState: {[key: string]: any};\n    currentState: {[key: string]: any};\n  };\n}\nexport interface CurrentViews {\n  [moduleName: string]: {[viewName: string]: number};\n}\nexport interface ReducerHandler extends ActionHandler {\n  (payload?: any): BaseModuleState;\n}\nexport interface EffectHandler extends ActionHandler {\n  (payload?: any): Promise<any>;\n}\nexport interface ActionHandlerMap {\n  [actionName: string]: {[moduleName: string]: ActionHandler};\n}\nexport interface ReducerMap extends ActionHandlerMap {\n  [actionName: string]: {[moduleName: string]: ReducerHandler};\n}\nexport interface EffectMap extends ActionHandlerMap {\n  [actionName: string]: {[moduleName: string]: EffectHandler};\n}\nexport interface Action {\n  type: string;\n  priority?: string[];\n  payload?: any;\n}\nexport interface ActionHandler {\n  __actionName__: string;\n  __isReducer__?: boolean;\n  __isEffect__?: boolean;\n  __isHandler__?: boolean;\n  __decorators__?: [(action: Action, moduleName: string, effectResult: Promise<any>) => any, null | ((status: 'Rejected' | 'Resolved', beforeResult: any, effectResult: any) => void)][];\n  __decoratorResults__?: any[];\n  (payload?: any): any;\n}\nexport interface BaseModuleState {\n  isModule?: boolean;\n  loading?: {[key: string]: LoadingState};\n}\nexport function getModuleActionCreatorList(namespace: string): ActionCreatorList {\n  // if (window[\"Proxy\"]) {\n  //   actions = new window[\"Proxy\"](\n  //     {},\n  //     {\n  //       get: (target: {}, key: string) => {\n  //         return (data: any) => ({ type: namespace + \"/\" + key, data });\n  //       }\n  //     }\n  //   );\n  // } else {\n  //   actions = getModuleActions(namespace) as any;\n  // }\n  if (MetaData.actionCreatorMap[namespace]) {\n    return MetaData.actionCreatorMap[namespace];\n  } else {\n    const obj = {};\n    MetaData.actionCreatorMap[namespace] = obj;\n    return obj;\n  }\n}\n"],"file":"global.js"}