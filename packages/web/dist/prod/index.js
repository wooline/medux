import"core-js/modules/es.string.replace";import"core-js/modules/es.string.search";import"core-js/modules/es.string.split";import _objectSpread from"@babel/runtime/helpers/esm/objectSpread";import{createBrowserHistory,createMemoryHistory}from"history";import{isServer}from"@medux/core";function isLocation(a){return!a.params&&!a.paths}var BrowserHistoryProxy=/*#__PURE__*/function(){function a(a,b){this.history=a,this.locationToRoute=b}var b=a.prototype;return b.getLocation=function getLocation(){return this.history.location},b.subscribe=function subscribe(a){this.history.listen(a)},b.locationToRouteData=function locationToRouteData(a){return a.state||this.locationToRoute(a)},b.equal=function equal(c,a){return c.pathname===a.pathname&&c.search===a.search&&c.hash===a.hash},b.patch=function patch(a,b){this.history.push(_objectSpread({},a,{state:b}))},a}(),BrowserHistoryActions=/*#__PURE__*/function(){function a(a,b){this.history=a,this.routeToLocation=b}var b=a.prototype;return b.push=function push(a){if("string"==typeof a)this.history.push(a);else if(isLocation(a))this.history.push(a);else{var b=a,c=this.routeToLocation(b),d=b.paths.reduce(function(a,b){var c=b.split("."),d=c[0],e=c[1];return e&&(!a[d]&&(a[d]={}),a[d][e]=!0),a},{});this.history.push(_objectSpread({},c,{state:_objectSpread({},b,{views:d})}))}},b.replace=function replace(a){if("string"==typeof a)this.history.replace(a);else if(isLocation(a))this.history.push(a);else{var b=this.routeToLocation(a);this.history.replace(_objectSpread({},b,{state:a}))}},b.go=function go(a){this.history.go(a)},b.goBack=function goBack(){this.history.goBack()},b.goForward=function goForward(){this.history.goForward()},a}();export function createHistory(a){var b=isServer()?createMemoryHistory(a):createBrowserHistory(a),c=new BrowserHistoryProxy(b,a.locationToRoute),d=new BrowserHistoryActions(b,a.routeToLocation);return{history:b,historyProxy:c,historyActions:d}}
//# sourceMappingURL=index.js.map