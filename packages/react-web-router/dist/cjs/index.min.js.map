{"version":3,"file":"index.min.js","sources":["../../../route-plan-a/dist/esm/path-to-regexp.js","../../../route-plan-a/dist/esm/matchPath.js","../../../core/dist/esm/sprite.js","../../../../node_modules/deep-extend/lib/deep-extend.js","../../../core/dist/esm/basic.js","../../../core/dist/esm/actions.js","../../../core/dist/esm/store.js","../../../core/dist/esm/module.js","../../../route-plan-a/dist/esm/index.js","../../../react/dist/esm/index.js","../../../web/dist/esm/index.js","../../src/index.tsx"],"sourcesContent":["function lexer(str) {\n  var tokens = [];\n  var i = 0;\n\n  while (i < str.length) {\n    var char = str[i];\n\n    if (char === '*' || char === '+' || char === '?') {\n      tokens.push({\n        type: 'MODIFIER',\n        index: i,\n        value: str[i++]\n      });\n      continue;\n    }\n\n    if (char === '\\\\') {\n      tokens.push({\n        type: 'ESCAPED_CHAR',\n        index: i++,\n        value: str[i++]\n      });\n      continue;\n    }\n\n    if (char === '{') {\n      tokens.push({\n        type: 'OPEN',\n        index: i,\n        value: str[i++]\n      });\n      continue;\n    }\n\n    if (char === '}') {\n      tokens.push({\n        type: 'CLOSE',\n        index: i,\n        value: str[i++]\n      });\n      continue;\n    }\n\n    if (char === ':') {\n      var name = '';\n      var j = i + 1;\n\n      while (j < str.length) {\n        var code = str.charCodeAt(j);\n\n        if (code >= 48 && code <= 57 || code >= 65 && code <= 90 || code >= 97 && code <= 122 || code === 95 || code === 46) {\n          name += str[j++];\n          continue;\n        }\n\n        break;\n      }\n\n      if (!name) throw new TypeError(\"Missing parameter name at \" + i);\n      tokens.push({\n        type: 'NAME',\n        index: i,\n        value: name\n      });\n      i = j;\n      continue;\n    }\n\n    if (char === '(') {\n      var count = 1;\n      var pattern = '';\n\n      var _j = i + 1;\n\n      if (str[_j] === '?') {\n        throw new TypeError(\"Pattern cannot start with \\\"?\\\" at \" + _j);\n      }\n\n      while (_j < str.length) {\n        if (str[_j] === '\\\\') {\n          pattern += str[_j++] + str[_j++];\n          continue;\n        }\n\n        if (str[_j] === ')') {\n          count--;\n\n          if (count === 0) {\n            _j++;\n            break;\n          }\n        } else if (str[_j] === '(') {\n          count++;\n\n          if (str[_j + 1] !== '?') {\n            throw new TypeError(\"Capturing groups are not allowed at \" + _j);\n          }\n        }\n\n        pattern += str[_j++];\n      }\n\n      if (count) throw new TypeError(\"Unbalanced pattern at \" + i);\n      if (!pattern) throw new TypeError(\"Missing pattern at \" + i);\n      tokens.push({\n        type: 'PATTERN',\n        index: i,\n        value: pattern\n      });\n      i = _j;\n      continue;\n    }\n\n    tokens.push({\n      type: 'CHAR',\n      index: i,\n      value: str[i++]\n    });\n  }\n\n  tokens.push({\n    type: 'END',\n    index: i,\n    value: ''\n  });\n  return tokens;\n}\n\nexport function parse(str, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var tokens = lexer(str);\n  var _options = options,\n      _options$prefixes = _options.prefixes,\n      prefixes = _options$prefixes === void 0 ? './' : _options$prefixes;\n  var defaultPattern = \"[^\" + escapeString(options.delimiter || '/#?') + \"]+?\";\n  var result = [];\n  var key = 0;\n  var i = 0;\n  var path = '';\n\n  var tryConsume = function tryConsume(type) {\n    if (i < tokens.length && tokens[i].type === type) return tokens[i++].value;\n    return undefined;\n  };\n\n  var mustConsume = function mustConsume(type) {\n    var value = tryConsume(type);\n    if (value !== undefined) return value;\n    var _tokens$i = tokens[i],\n        nextType = _tokens$i.type,\n        index = _tokens$i.index;\n    throw new TypeError(\"Unexpected \" + nextType + \" at \" + index + \", expected \" + type);\n  };\n\n  var consumeText = function consumeText() {\n    var result = '';\n    var value;\n\n    while (value = tryConsume('CHAR') || tryConsume('ESCAPED_CHAR')) {\n      result += value;\n    }\n\n    return result;\n  };\n\n  while (i < tokens.length) {\n    var char = tryConsume('CHAR');\n    var name = tryConsume('NAME');\n    var pattern = tryConsume('PATTERN');\n\n    if (name || pattern) {\n      var prefix = char || '';\n\n      if (prefixes.indexOf(prefix) === -1) {\n        path += prefix;\n        prefix = '';\n      }\n\n      if (path) {\n        result.push(path);\n        path = '';\n      }\n\n      result.push({\n        name: name || key++,\n        prefix: prefix,\n        suffix: '',\n        pattern: pattern || defaultPattern,\n        modifier: tryConsume('MODIFIER') || ''\n      });\n      continue;\n    }\n\n    var _value = char || tryConsume('ESCAPED_CHAR');\n\n    if (_value) {\n      path += _value;\n      continue;\n    }\n\n    if (path) {\n      result.push(path);\n      path = '';\n    }\n\n    var open = tryConsume('OPEN');\n\n    if (open) {\n      var _prefix = consumeText();\n\n      var _name = tryConsume('NAME') || '';\n\n      var _pattern = tryConsume('PATTERN') || '';\n\n      var suffix = consumeText();\n      mustConsume('CLOSE');\n      result.push({\n        name: _name || (_pattern ? key++ : ''),\n        pattern: _name && !_pattern ? defaultPattern : _pattern,\n        prefix: _prefix,\n        suffix: suffix,\n        modifier: tryConsume('MODIFIER') || ''\n      });\n      continue;\n    }\n\n    mustConsume('END');\n  }\n\n  return result;\n}\nexport function compile(str, options) {\n  return tokensToFunction(parse(str, options), options);\n}\nexport function tokensToFunction(tokens, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var reFlags = flags(options);\n  var _options2 = options,\n      _options2$encode = _options2.encode,\n      encode = _options2$encode === void 0 ? function (x) {\n    return x;\n  } : _options2$encode,\n      _options2$validate = _options2.validate,\n      validate = _options2$validate === void 0 ? true : _options2$validate;\n  var matches = tokens.map(function (token) {\n    if (typeof token === 'object') {\n      return new RegExp(\"^(?:\" + token.pattern + \")$\", reFlags);\n    }\n\n    return undefined;\n  });\n  return function (data) {\n    var path = '';\n\n    for (var i = 0; i < tokens.length; i++) {\n      var _token = tokens[i];\n\n      if (typeof _token === 'string') {\n        path += _token;\n        continue;\n      }\n\n      var _value2 = data ? data[_token.name] : undefined;\n\n      var optional = _token.modifier === '?' || _token.modifier === '*';\n      var repeat = _token.modifier === '*' || _token.modifier === '+';\n\n      if (Array.isArray(_value2)) {\n        if (!repeat) {\n          throw new TypeError(\"Expected \\\"\" + _token.name + \"\\\" to not repeat, but got an array\");\n        }\n\n        if (_value2.length === 0) {\n          if (optional) continue;\n          throw new TypeError(\"Expected \\\"\" + _token.name + \"\\\" to not be empty\");\n        }\n\n        for (var j = 0; j < _value2.length; j++) {\n          var segment = encode(_value2[j], _token);\n\n          if (validate && !matches[i].test(segment)) {\n            throw new TypeError(\"Expected all \\\"\" + _token.name + \"\\\" to match \\\"\" + _token.pattern + \"\\\", but got \\\"\" + segment + \"\\\"\");\n          }\n\n          path += _token.prefix + segment + _token.suffix;\n        }\n\n        continue;\n      }\n\n      if (typeof _value2 === 'string' || typeof _value2 === 'number') {\n        var _segment = encode(String(_value2), _token);\n\n        if (validate && !matches[i].test(_segment)) {\n          throw new TypeError(\"Expected \\\"\" + _token.name + \"\\\" to match \\\"\" + _token.pattern + \"\\\", but got \\\"\" + _segment + \"\\\"\");\n        }\n\n        path += _token.prefix + _segment + _token.suffix;\n        continue;\n      }\n\n      if (optional) continue;\n      var typeOfMessage = repeat ? 'an array' : 'a string';\n      throw new TypeError(\"Expected \\\"\" + _token.name + \"\\\" to be \" + typeOfMessage);\n    }\n\n    return path;\n  };\n}\nexport function match(str, options) {\n  var keys = [];\n  var re = pathToRegexp(str, keys, options);\n  return regexpToFunction(re, keys, options);\n}\nexport function regexpToFunction(re, keys, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options3 = options,\n      _options3$decode = _options3.decode,\n      decode = _options3$decode === void 0 ? function (x) {\n    return x;\n  } : _options3$decode;\n  return function (pathname) {\n    var m = re.exec(pathname);\n    if (!m) return false;\n    var path = m[0],\n        index = m.index;\n    var params = Object.create(null);\n\n    var _loop = function _loop(i) {\n      if (m[i] === undefined) return \"continue\";\n      var key = keys[i - 1];\n\n      if (key.modifier === '*' || key.modifier === '+') {\n        params[key.name] = m[i].split(key.prefix + key.suffix).map(function (value) {\n          return decode(value, key);\n        });\n      } else {\n        params[key.name] = decode(m[i], key);\n      }\n    };\n\n    for (var i = 1; i < m.length; i++) {\n      var _ret = _loop(i);\n\n      if (_ret === \"continue\") continue;\n    }\n\n    return {\n      path: path,\n      index: index,\n      params: params\n    };\n  };\n}\n\nfunction escapeString(str) {\n  return str.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, '\\\\$1');\n}\n\nfunction flags(options) {\n  return options && options.sensitive ? '' : 'i';\n}\n\nfunction regexpToRegexp(path, keys) {\n  if (!keys) return path;\n  var groups = path.source.match(/\\((?!\\?)/g);\n\n  if (groups) {\n    for (var i = 0; i < groups.length; i++) {\n      keys.push({\n        name: i,\n        prefix: '',\n        suffix: '',\n        modifier: '',\n        pattern: ''\n      });\n    }\n  }\n\n  return path;\n}\n\nfunction arrayToRegexp(paths, keys, options) {\n  var parts = paths.map(function (path) {\n    return pathToRegexp(path, keys, options).source;\n  });\n  return new RegExp(\"(?:\" + parts.join('|') + \")\", flags(options));\n}\n\nfunction stringToRegexp(path, keys, options) {\n  return tokensToRegexp(parse(path, options), keys, options);\n}\n\nexport function tokensToRegexp(tokens, keys, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options4 = options,\n      _options4$strict = _options4.strict,\n      strict = _options4$strict === void 0 ? false : _options4$strict,\n      _options4$start = _options4.start,\n      start = _options4$start === void 0 ? true : _options4$start,\n      _options4$end = _options4.end,\n      end = _options4$end === void 0 ? true : _options4$end,\n      _options4$encode = _options4.encode,\n      encode = _options4$encode === void 0 ? function (x) {\n    return x;\n  } : _options4$encode;\n  var endsWith = \"[\" + escapeString(options.endsWith || '') + \"]|$\";\n  var delimiter = \"[\" + escapeString(options.delimiter || '/#?') + \"]\";\n  var route = start ? '^' : '';\n\n  for (var _iterator = tokens, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n    var _ref;\n\n    if (_isArray) {\n      if (_i >= _iterator.length) break;\n      _ref = _iterator[_i++];\n    } else {\n      _i = _iterator.next();\n      if (_i.done) break;\n      _ref = _i.value;\n    }\n\n    var _token2 = _ref;\n\n    if (typeof _token2 === 'string') {\n      route += escapeString(encode(_token2));\n    } else {\n      var prefix = escapeString(encode(_token2.prefix));\n      var suffix = escapeString(encode(_token2.suffix));\n\n      if (_token2.pattern) {\n        if (keys) keys.push(_token2);\n\n        if (prefix || suffix) {\n          if (_token2.modifier === '+' || _token2.modifier === '*') {\n            var mod = _token2.modifier === '*' ? '?' : '';\n            route += \"(?:\" + prefix + \"((?:\" + _token2.pattern + \")(?:\" + suffix + prefix + \"(?:\" + _token2.pattern + \"))*)\" + suffix + \")\" + mod;\n          } else {\n            route += \"(?:\" + prefix + \"(\" + _token2.pattern + \")\" + suffix + \")\" + _token2.modifier;\n          }\n        } else {\n          route += \"(\" + _token2.pattern + \")\" + _token2.modifier;\n        }\n      } else {\n        route += \"(?:\" + prefix + suffix + \")\" + _token2.modifier;\n      }\n    }\n  }\n\n  if (end) {\n    if (!strict) route += delimiter + \"?\";\n    route += !options.endsWith ? '$' : \"(?=\" + endsWith + \")\";\n  } else {\n    var endToken = tokens[tokens.length - 1];\n    var isEndDelimited = typeof endToken === 'string' ? delimiter.indexOf(endToken[endToken.length - 1]) > -1 : endToken === undefined;\n\n    if (!strict) {\n      route += \"(?:\" + delimiter + \"(?=\" + endsWith + \"))?\";\n    }\n\n    if (!isEndDelimited) {\n      route += \"(?=\" + delimiter + \"|\" + endsWith + \")\";\n    }\n  }\n\n  return new RegExp(route, flags(options));\n}\nexport function pathToRegexp(path, keys, options) {\n  if (path instanceof RegExp) return regexpToRegexp(path, keys);\n  if (Array.isArray(path)) return arrayToRegexp(path, keys, options);\n  return stringToRegexp(path, keys, options);\n}","import { compile, pathToRegexp } from './path-to-regexp';\nvar cache = {};\nvar cacheLimit = 10000;\nvar cacheCount = 0;\nexport function compileToPath(rule) {\n  if (cache[rule]) {\n    return cache[rule];\n  }\n\n  var result = compile(rule);\n\n  if (cacheCount < cacheLimit) {\n    cache[rule] = result;\n    cacheCount++;\n  }\n\n  return result;\n}\nexport function compilePath(path, options) {\n  if (options === void 0) {\n    options = {\n      end: false,\n      strict: false,\n      sensitive: false\n    };\n  }\n\n  var cacheKey = \"\" + options.end + options.strict + options.sensitive;\n  var pathCache = cache[cacheKey] || (cache[cacheKey] = {});\n\n  if (pathCache[path]) {\n    return pathCache[path];\n  }\n\n  var keys = [];\n  var regexp = pathToRegexp(path, keys, options);\n  var result = {\n    regexp: regexp,\n    keys: keys\n  };\n\n  if (cacheCount < cacheLimit) {\n    pathCache[path] = result;\n    cacheCount++;\n  }\n\n  return result;\n}\nexport function matchPath(pathname, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  if (typeof options === 'string' || Array.isArray(options)) {\n    options = {\n      path: options\n    };\n  }\n\n  var _options = options,\n      path = _options.path,\n      _options$exact = _options.exact,\n      exact = _options$exact === void 0 ? false : _options$exact,\n      _options$strict = _options.strict,\n      strict = _options$strict === void 0 ? false : _options$strict,\n      _options$sensitive = _options.sensitive,\n      sensitive = _options$sensitive === void 0 ? false : _options$sensitive;\n  var paths = [].concat(path);\n  return paths.reduce(function (matched, path) {\n    if (!path) return null;\n    if (matched) return matched;\n\n    if (path === '*') {\n      return {\n        path: path,\n        url: pathname,\n        isExact: true,\n        params: {}\n      };\n    }\n\n    var _compilePath = compilePath(path, {\n      end: exact,\n      strict: strict,\n      sensitive: sensitive\n    }),\n        regexp = _compilePath.regexp,\n        keys = _compilePath.keys;\n\n    var match = regexp.exec(pathname);\n    if (!match) return null;\n    var url = match[0],\n        values = match.slice(1);\n    var isExact = pathname === url;\n    if (exact && !isExact) return null;\n    return {\n      path: path,\n      url: path === '/' && url === '' ? '/' : url,\n      isExact: isExact,\n      params: keys.reduce(function (memo, key, index) {\n        memo[key.name] = values[index];\n        return memo;\n      }, {})\n    };\n  }, null);\n}\nexport default matchPath;","import _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nexport var TaskCountEvent = 'TaskCountEvent';\nexport var LoadingState;\n\n(function (LoadingState) {\n  LoadingState[\"Start\"] = \"Start\";\n  LoadingState[\"Stop\"] = \"Stop\";\n  LoadingState[\"Depth\"] = \"Depth\";\n})(LoadingState || (LoadingState = {}));\n\nexport var PEvent =\n/*#__PURE__*/\nfunction () {\n  function PEvent(name, data, bubbling) {\n    if (bubbling === void 0) {\n      bubbling = false;\n    }\n\n    this.name = name;\n    this.data = data;\n    this.bubbling = bubbling;\n\n    _defineProperty(this, \"target\", null);\n\n    _defineProperty(this, \"currentTarget\", null);\n  }\n\n  var _proto = PEvent.prototype;\n\n  _proto.setTarget = function setTarget(target) {\n    this.target = target;\n  };\n\n  _proto.setCurrentTarget = function setCurrentTarget(target) {\n    this.currentTarget = target;\n  };\n\n  return PEvent;\n}();\nexport var PDispatcher =\n/*#__PURE__*/\nfunction () {\n  function PDispatcher(parent) {\n    this.parent = parent;\n\n    _defineProperty(this, \"storeHandlers\", {});\n  }\n\n  var _proto2 = PDispatcher.prototype;\n\n  _proto2.addListener = function addListener(ename, handler) {\n    var dictionary = this.storeHandlers[ename];\n\n    if (!dictionary) {\n      this.storeHandlers[ename] = dictionary = [];\n    }\n\n    dictionary.push(handler);\n    return this;\n  };\n\n  _proto2.removeListener = function removeListener(ename, handler) {\n    var _this = this;\n\n    if (!ename) {\n      Object.keys(this.storeHandlers).forEach(function (key) {\n        delete _this.storeHandlers[key];\n      });\n    } else {\n      var handlers = this.storeHandlers;\n\n      if (handlers.propertyIsEnumerable(ename)) {\n        var dictionary = handlers[ename];\n\n        if (!handler) {\n          delete handlers[ename];\n        } else {\n          var n = dictionary.indexOf(handler);\n\n          if (n > -1) {\n            dictionary.splice(n, 1);\n          }\n\n          if (dictionary.length === 0) {\n            delete handlers[ename];\n          }\n        }\n      }\n    }\n\n    return this;\n  };\n\n  _proto2.dispatch = function dispatch(evt) {\n    if (!evt.target) {\n      evt.setTarget(this);\n    }\n\n    evt.setCurrentTarget(this);\n    var dictionary = this.storeHandlers[evt.name];\n\n    if (dictionary) {\n      for (var i = 0, k = dictionary.length; i < k; i++) {\n        dictionary[i](evt);\n      }\n    }\n\n    if (this.parent && evt.bubbling) {\n      this.parent.dispatch(evt);\n    }\n\n    return this;\n  };\n\n  _proto2.setParent = function setParent(parent) {\n    this.parent = parent;\n    return this;\n  };\n\n  return PDispatcher;\n}();\nexport var TaskCounter =\n/*#__PURE__*/\nfunction (_PDispatcher) {\n  _inheritsLoose(TaskCounter, _PDispatcher);\n\n  function TaskCounter(deferSecond) {\n    var _this2;\n\n    _this2 = _PDispatcher.call(this) || this;\n    _this2.deferSecond = deferSecond;\n\n    _defineProperty(_assertThisInitialized(_this2), \"list\", []);\n\n    _defineProperty(_assertThisInitialized(_this2), \"ctimer\", null);\n\n    return _this2;\n  }\n\n  var _proto3 = TaskCounter.prototype;\n\n  _proto3.addItem = function addItem(promise, note) {\n    var _this3 = this;\n\n    if (note === void 0) {\n      note = '';\n    }\n\n    if (!this.list.some(function (item) {\n      return item.promise === promise;\n    })) {\n      this.list.push({\n        promise: promise,\n        note: note\n      });\n      promise.then(function () {\n        return _this3.completeItem(promise);\n      }, function () {\n        return _this3.completeItem(promise);\n      });\n\n      if (this.list.length === 1) {\n        this.dispatch(new PEvent(TaskCountEvent, LoadingState.Start));\n        this.ctimer = setTimeout(function () {\n          _this3.ctimer = null;\n\n          if (_this3.list.length > 0) {\n            _this3.dispatch(new PEvent(TaskCountEvent, LoadingState.Depth));\n          }\n        }, this.deferSecond * 1000);\n      }\n    }\n\n    return promise;\n  };\n\n  _proto3.completeItem = function completeItem(promise) {\n    var i = this.list.findIndex(function (item) {\n      return item.promise === promise;\n    });\n\n    if (i > -1) {\n      this.list.splice(i, 1);\n\n      if (this.list.length === 0) {\n        if (this.ctimer) {\n          clearTimeout(this.ctimer);\n          this.ctimer = null;\n        }\n\n        this.dispatch(new PEvent(TaskCountEvent, LoadingState.Stop));\n      }\n    }\n\n    return this;\n  };\n\n  return TaskCounter;\n}(PDispatcher);","/*!\n * @description Recursive object extending\n * @author Viacheslav Lotsmanov <lotsmanov89@gmail.com>\n * @license MIT\n *\n * The MIT License (MIT)\n *\n * Copyright (c) 2013-2018 Viacheslav Lotsmanov\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy of\n * this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to\n * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\n * the Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\n * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n'use strict';\n\nfunction isSpecificValue(val) {\n\treturn (\n\t\tval instanceof Buffer\n\t\t|| val instanceof Date\n\t\t|| val instanceof RegExp\n\t) ? true : false;\n}\n\nfunction cloneSpecificValue(val) {\n\tif (val instanceof Buffer) {\n\t\tvar x = Buffer.alloc\n\t\t\t? Buffer.alloc(val.length)\n\t\t\t: new Buffer(val.length);\n\t\tval.copy(x);\n\t\treturn x;\n\t} else if (val instanceof Date) {\n\t\treturn new Date(val.getTime());\n\t} else if (val instanceof RegExp) {\n\t\treturn new RegExp(val);\n\t} else {\n\t\tthrow new Error('Unexpected situation');\n\t}\n}\n\n/**\n * Recursive cloning array.\n */\nfunction deepCloneArray(arr) {\n\tvar clone = [];\n\tarr.forEach(function (item, index) {\n\t\tif (typeof item === 'object' && item !== null) {\n\t\t\tif (Array.isArray(item)) {\n\t\t\t\tclone[index] = deepCloneArray(item);\n\t\t\t} else if (isSpecificValue(item)) {\n\t\t\t\tclone[index] = cloneSpecificValue(item);\n\t\t\t} else {\n\t\t\t\tclone[index] = deepExtend({}, item);\n\t\t\t}\n\t\t} else {\n\t\t\tclone[index] = item;\n\t\t}\n\t});\n\treturn clone;\n}\n\nfunction safeGetProperty(object, property) {\n\treturn property === '__proto__' ? undefined : object[property];\n}\n\n/**\n * Extening object that entered in first argument.\n *\n * Returns extended object or false if have no target object or incorrect type.\n *\n * If you wish to clone source object (without modify it), just use empty new\n * object as first argument, like this:\n *   deepExtend({}, yourObj_1, [yourObj_N]);\n */\nvar deepExtend = module.exports = function (/*obj_1, [obj_2], [obj_N]*/) {\n\tif (arguments.length < 1 || typeof arguments[0] !== 'object') {\n\t\treturn false;\n\t}\n\n\tif (arguments.length < 2) {\n\t\treturn arguments[0];\n\t}\n\n\tvar target = arguments[0];\n\n\t// convert arguments to array and cut off target object\n\tvar args = Array.prototype.slice.call(arguments, 1);\n\n\tvar val, src, clone;\n\n\targs.forEach(function (obj) {\n\t\t// skip argument if isn't an object, is null, or is an array\n\t\tif (typeof obj !== 'object' || obj === null || Array.isArray(obj)) {\n\t\t\treturn;\n\t\t}\n\n\t\tObject.keys(obj).forEach(function (key) {\n\t\t\tsrc = safeGetProperty(target, key); // source value\n\t\t\tval = safeGetProperty(obj, key); // new value\n\n\t\t\t// recursion prevention\n\t\t\tif (val === target) {\n\t\t\t\treturn;\n\n\t\t\t/**\n\t\t\t * if new value isn't object then just overwrite by new value\n\t\t\t * instead of extending.\n\t\t\t */\n\t\t\t} else if (typeof val !== 'object' || val === null) {\n\t\t\t\ttarget[key] = val;\n\t\t\t\treturn;\n\n\t\t\t// just clone arrays (and recursive clone objects inside)\n\t\t\t} else if (Array.isArray(val)) {\n\t\t\t\ttarget[key] = deepCloneArray(val);\n\t\t\t\treturn;\n\n\t\t\t// custom cloning and overwrite for specific objects\n\t\t\t} else if (isSpecificValue(val)) {\n\t\t\t\ttarget[key] = cloneSpecificValue(val);\n\t\t\t\treturn;\n\n\t\t\t// overwrite by new value if source isn't object or array\n\t\t\t} else if (typeof src !== 'object' || src === null || Array.isArray(src)) {\n\t\t\t\ttarget[key] = deepExtend({}, val);\n\t\t\t\treturn;\n\n\t\t\t// source value and new value is objects both, extending...\n\t\t\t} else {\n\t\t\t\ttarget[key] = deepExtend(src, val);\n\t\t\t\treturn;\n\t\t\t}\n\t\t});\n\t});\n\n\treturn target;\n};\n","/*global global:true process:true*/\nimport { TaskCountEvent, TaskCounter } from './sprite';\n// export const root: {__REDUX_DEVTOOLS_EXTENSION__?: any; __REDUX_DEVTOOLS_EXTENSION__OPTIONS?: any; onerror: any; onunhandledrejection: any} = ((typeof self == 'object' &&\n//   self.self === self &&\n//   self) ||\n//   (typeof global == 'object' && global.global === global && global) ||\n//   this) as any;\nvar loadings = {};\nvar depthTime = 2;\nexport function setLoadingDepthTime(second) {\n  depthTime = second;\n}\nexport function setLoading(item, moduleName, group) {\n  if (moduleName === void 0) {\n    moduleName = MetaData.appModuleName;\n  }\n\n  if (group === void 0) {\n    group = 'global';\n  }\n\n  if (MetaData.isServer) {\n    return item;\n  }\n\n  var key = moduleName + config.NSP + group;\n\n  if (!loadings[key]) {\n    loadings[key] = new TaskCounter(depthTime);\n    loadings[key].addListener(TaskCountEvent, function (e) {\n      var store = MetaData.clientStore;\n\n      if (store) {\n        var _actions;\n\n        var actions = MetaData.actionCreatorMap[moduleName][ActionTypes.MLoading];\n\n        var _action = actions((_actions = {}, _actions[group] = e.data, _actions));\n\n        store.dispatch(_action);\n      }\n    });\n  }\n\n  loadings[key].addItem(item);\n  return item;\n}\nexport var config = {\n  NSP: '/',\n  VSP: '.',\n  MSP: ','\n};\nexport function setConfig(_config) {\n  _config.NSP && (config.NSP = _config.NSP);\n  _config.VSP && (config.VSP = _config.VSP);\n  _config.MSP && (config.MSP = _config.MSP);\n}\nexport var MetaData = {\n  isServer: typeof global !== 'undefined' && typeof window === 'undefined',\n  isDev: process.env.NODE_ENV !== 'production',\n  actionCreatorMap: null,\n  clientStore: null,\n  appModuleName: null,\n  moduleGetter: null\n};\nexport var ActionTypes = {\n  MLoading: 'Loading',\n  MInit: 'Init',\n  MRouteParams: 'RouteParams',\n  Error: \"medux\" + config.NSP + \"Error\",\n  RouteChange: \"medux\" + config.NSP + \"RouteChange\"\n};\nexport var client = MetaData.isServer ? undefined : typeof window === 'undefined' ? global : window;\nexport function isPromise(data) {\n  return typeof data === 'object' && typeof data['then'] === 'function';\n}\nexport function getClientStore() {\n  return MetaData.clientStore;\n}\nexport function isServer() {\n  return MetaData.isServer;\n}\nexport function reducer(target, key, descriptor) {\n  if (!key && !descriptor) {\n    key = target.key;\n    descriptor = target.descriptor;\n  }\n\n  var fun = descriptor.value;\n  fun.__actionName__ = key;\n  fun.__isReducer__ = true;\n  descriptor.enumerable = true;\n  return target.descriptor === descriptor ? target : descriptor;\n}\nexport function effect(loadingForGroupName, loadingForModuleName) {\n  if (loadingForGroupName === undefined) {\n    loadingForGroupName = 'global';\n    loadingForModuleName = MetaData.appModuleName;\n  }\n\n  return function (target, key, descriptor) {\n    if (!key && !descriptor) {\n      key = target.key;\n      descriptor = target.descriptor;\n    }\n\n    var fun = descriptor.value;\n    fun.__actionName__ = key;\n    fun.__isEffect__ = true;\n    descriptor.enumerable = true;\n\n    if (loadingForGroupName) {\n      var before = function before(curAction, moduleName, promiseResult) {\n        if (!MetaData.isServer) {\n          if (!loadingForModuleName) {\n            loadingForModuleName = moduleName;\n          }\n\n          setLoading(promiseResult, loadingForModuleName, loadingForGroupName);\n        }\n      };\n\n      if (!fun.__decorators__) {\n        fun.__decorators__ = [];\n      }\n\n      fun.__decorators__.push([before, null]);\n    }\n\n    return target.descriptor === descriptor ? target : descriptor;\n  };\n}\nexport function logger(before, after) {\n  return function (target, key, descriptor) {\n    if (!key && !descriptor) {\n      key = target.key;\n      descriptor = target.descriptor;\n    }\n\n    var fun = descriptor.value;\n\n    if (!fun.__decorators__) {\n      fun.__decorators__ = [];\n    }\n\n    fun.__decorators__.push([before, after]);\n  };\n}\nexport function delayPromise(second) {\n  return function (target, key, descriptor) {\n    if (!key && !descriptor) {\n      key = target.key;\n      descriptor = target.descriptor;\n    }\n\n    var fun = descriptor.value;\n\n    descriptor.value = function () {\n      var delay = new Promise(function (resolve) {\n        setTimeout(function () {\n          resolve(true);\n        }, second * 1000);\n      });\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return Promise.all([delay, fun.apply(target, args)]).then(function (items) {\n        return items[1];\n      });\n    };\n  };\n}\nexport function isProcessedError(error) {\n  if (typeof error !== 'object' || error.meduxProcessed === undefined) {\n    return undefined;\n  } else {\n    return !!error.meduxProcessed;\n  }\n}\nexport function setProcessedError(error, meduxProcessed) {\n  if (typeof error === 'object') {\n    error.meduxProcessed = meduxProcessed;\n    return error;\n  } else {\n    return {\n      meduxProcessed: meduxProcessed,\n      error: error\n    };\n  }\n}\n\nfunction bindThis(fun, thisObj) {\n  var newFun = fun.bind(thisObj);\n  Object.keys(fun).forEach(function (key) {\n    newFun[key] = fun[key];\n  });\n  return newFun;\n}\n\nfunction transformAction(actionName, action, listenerModule, actionHandlerMap) {\n  if (!actionHandlerMap[actionName]) {\n    actionHandlerMap[actionName] = {};\n  }\n\n  if (actionHandlerMap[actionName][listenerModule]) {\n    throw new Error(\"Action duplicate or conflict : \" + actionName + \".\");\n  }\n\n  actionHandlerMap[actionName][listenerModule] = action;\n}\n\nfunction addModuleActionCreatorList(moduleName, actionName) {\n  var actions = MetaData.actionCreatorMap[moduleName];\n\n  if (!actions[actionName]) {\n    actions[actionName] = function () {\n      for (var _len2 = arguments.length, payload = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        payload[_key2] = arguments[_key2];\n      }\n\n      return {\n        type: moduleName + config.NSP + actionName,\n        payload: payload\n      };\n    };\n  }\n}\n\nexport function injectActions(store, moduleName, handlers) {\n  for (var actionNames in handlers) {\n    if (typeof handlers[actionNames] === 'function') {\n      (function () {\n        var handler = handlers[actionNames];\n\n        if (handler.__isReducer__ || handler.__isEffect__) {\n          handler = bindThis(handler, handlers);\n          actionNames.split(config.MSP).forEach(function (actionName) {\n            actionName = actionName.trim().replace(new RegExp(\"^this[\" + config.NSP + \"]\"), \"\" + moduleName + config.NSP);\n            var arr = actionName.split(config.NSP);\n\n            if (arr[1]) {\n              handler.__isHandler__ = true;\n              transformAction(actionName, handler, moduleName, handler.__isEffect__ ? store._medux_.effectMap : store._medux_.reducerMap);\n            } else {\n              handler.__isHandler__ = false;\n              transformAction(moduleName + config.NSP + actionName, handler, moduleName, handler.__isEffect__ ? store._medux_.effectMap : store._medux_.reducerMap);\n              addModuleActionCreatorList(moduleName, actionName);\n            }\n          });\n        }\n      })();\n    }\n  }\n\n  return MetaData.actionCreatorMap[moduleName];\n}","import { ActionTypes, config } from './basic';\nexport function errorAction(error) {\n  return {\n    type: ActionTypes.Error,\n    payload: [error]\n  };\n}\nexport function routeChangeAction(route) {\n  return {\n    type: ActionTypes.RouteChange,\n    payload: [route]\n  };\n}\nexport function routeParamsAction(moduleName, params) {\n  return {\n    type: \"\" + moduleName + config.NSP + ActionTypes.MRouteParams,\n    payload: [params]\n  };\n}","import { ActionTypes, MetaData, client, config, isProcessedError, isPromise, setProcessedError } from './basic';\nimport { applyMiddleware, compose, createStore } from 'redux';\nimport { errorAction, routeChangeAction, routeParamsAction } from './actions';\n\nfunction isPromiseModule(module) {\n  return typeof module['then'] === 'function';\n}\n\nexport function loadModel(moduleName, store, options) {\n  var hasInjected = store._medux_.injectedModules[moduleName];\n\n  if (!hasInjected) {\n    var moduleGetter = MetaData.moduleGetter;\n    var result = moduleGetter[moduleName]();\n\n    if (isPromiseModule(result)) {\n      return result.then(function (module) {\n        moduleGetter[moduleName] = function () {\n          return module;\n        };\n\n        return module.default.model(store, options);\n      });\n    } else {\n      return result.default.model(store, options);\n    }\n  }\n}\nexport function getActionData(action) {\n  return Array.isArray(action.payload) ? action.payload : [];\n}\n\nfunction bindHistory(store, history) {\n  var inTimeTravelling = false;\n\n  var handleLocationChange = function handleLocationChange(location) {\n    if (!inTimeTravelling) {\n      var _ref = store.getState(),\n          route = _ref.route;\n\n      if (route) {\n        if (history.equal(route.location, location)) {\n          return;\n        }\n      }\n\n      var data = history.locationToRouteData(location);\n      store.dispatch(routeChangeAction({\n        location: location,\n        data: data\n      }));\n    } else {\n      inTimeTravelling = false;\n    }\n  };\n\n  history.subscribe(handleLocationChange);\n  store.subscribe(function () {\n    if (history.initialized) {\n      var storeRouteState = store.getState().route;\n\n      if (!history.equal(storeRouteState.location, history.getLocation())) {\n        inTimeTravelling = true;\n        history.patch(storeRouteState.location, storeRouteState.data);\n      }\n    }\n  });\n  history.initialized && handleLocationChange(history.getLocation());\n}\n\nexport function buildStore(history, preloadedState, storeReducers, storeMiddlewares, storeEnhancers) {\n  if (preloadedState === void 0) {\n    preloadedState = {};\n  }\n\n  if (storeReducers === void 0) {\n    storeReducers = {};\n  }\n\n  if (storeMiddlewares === void 0) {\n    storeMiddlewares = [];\n  }\n\n  if (storeEnhancers === void 0) {\n    storeEnhancers = [];\n  }\n\n  if (storeReducers.route) {\n    throw new Error(\"the reducer name 'route' is not allowed\");\n  }\n\n  storeReducers.route = function (state, action) {\n    if (action.type === ActionTypes.RouteChange) {\n      var payload = getActionData(action)[0];\n\n      if (!state) {\n        return payload;\n      }\n\n      return Object.assign({}, state, {}, payload);\n    }\n\n    return state;\n  };\n\n  var combineReducers = function combineReducers(rootState, action) {\n    if (!store) {\n      return rootState;\n    }\n\n    var meta = store._medux_;\n    meta.prevState = rootState;\n    var currentState = Object.assign({}, rootState);\n    meta.currentState = currentState;\n    Object.keys(storeReducers).forEach(function (moduleName) {\n      currentState[moduleName] = storeReducers[moduleName](currentState[moduleName], action);\n    });\n    var handlersCommon = meta.reducerMap[action.type] || {}; // 支持泛监听，形如 */loading\n\n    var handlersEvery = meta.reducerMap[action.type.replace(new RegExp(\"[^\" + config.NSP + \"]+\"), '*')] || {};\n    var handlers = Object.assign({}, handlersCommon, {}, handlersEvery);\n    var handlerModules = Object.keys(handlers);\n\n    if (handlerModules.length > 0) {\n      var orderList = [];\n      var priority = action.priority ? [].concat(action.priority) : [];\n      handlerModules.forEach(function (moduleName) {\n        var fun = handlers[moduleName];\n\n        if (moduleName === MetaData.appModuleName) {\n          orderList.unshift(moduleName);\n        } else {\n          orderList.push(moduleName);\n        }\n\n        if (!fun.__isHandler__) {\n          priority.unshift(moduleName);\n        }\n      });\n      orderList.unshift.apply(orderList, priority);\n      var moduleNameMap = {};\n      orderList.forEach(function (moduleName) {\n        if (!moduleNameMap[moduleName]) {\n          moduleNameMap[moduleName] = true;\n          var fun = handlers[moduleName];\n          currentState[moduleName] = fun.apply(void 0, getActionData(action));\n        }\n      });\n    }\n\n    var changed = Object.keys(rootState).length !== Object.keys(currentState).length || Object.keys(rootState).some(function (moduleName) {\n      return rootState[moduleName] !== currentState[moduleName];\n    });\n    meta.prevState = changed ? currentState : rootState;\n    return meta.prevState;\n  };\n\n  var middleware = function middleware(_ref2) {\n    var dispatch = _ref2.dispatch;\n    return function (next) {\n      return function (originalAction) {\n        if (MetaData.isServer) {\n          if (originalAction.type.split(config.NSP)[1] === ActionTypes.MLoading) {\n            return originalAction;\n          }\n        }\n\n        var meta = store._medux_;\n        meta.beforeState = meta.prevState;\n        var action = next(originalAction);\n\n        if (action.type === ActionTypes.RouteChange) {\n          var rootRouteParams = meta.prevState.route.data.params;\n          Object.keys(rootRouteParams).forEach(function (moduleName) {\n            var routeParams = rootRouteParams[moduleName];\n\n            if (routeParams && Object.keys(routeParams).length > 0 && meta.injectedModules[moduleName]) {\n              dispatch(routeParamsAction(moduleName, routeParams));\n            }\n          });\n        }\n\n        var handlersCommon = meta.effectMap[action.type] || {}; // 支持泛监听，形如 */loading\n\n        var handlersEvery = meta.effectMap[action.type.replace(new RegExp(\"[^\" + config.NSP + \"]+\"), '*')] || {};\n        var handlers = Object.assign({}, handlersCommon, {}, handlersEvery);\n        var handlerModules = Object.keys(handlers);\n\n        if (handlerModules.length > 0) {\n          var orderList = [];\n          var priority = action.priority ? [].concat(action.priority) : [];\n          handlerModules.forEach(function (moduleName) {\n            var fun = handlers[moduleName];\n\n            if (moduleName === MetaData.appModuleName) {\n              orderList.unshift(moduleName);\n            } else {\n              orderList.push(moduleName);\n            }\n\n            if (!fun.__isHandler__) {\n              priority.unshift(moduleName);\n            }\n          });\n          orderList.unshift.apply(orderList, priority);\n          var moduleNameMap = {};\n          var promiseResults = [];\n          orderList.forEach(function (moduleName) {\n            if (!moduleNameMap[moduleName]) {\n              moduleNameMap[moduleName] = true;\n              var fun = handlers[moduleName];\n              var effectResult = fun.apply(void 0, getActionData(action));\n              var decorators = fun.__decorators__;\n\n              if (decorators) {\n                var results = [];\n                decorators.forEach(function (decorator, index) {\n                  results[index] = decorator[0](action, moduleName, effectResult);\n                });\n                fun.__decoratorResults__ = results;\n              }\n\n              var errorHandler = effectResult.then(function (reslove) {\n                if (decorators) {\n                  var _results = fun.__decoratorResults__ || [];\n\n                  decorators.forEach(function (decorator, index) {\n                    if (decorator[1]) {\n                      decorator[1]('Resolved', _results[index], reslove);\n                    }\n                  });\n                  fun.__decoratorResults__ = undefined;\n                }\n\n                return reslove;\n              }, function (error) {\n                if (decorators) {\n                  var _results2 = fun.__decoratorResults__ || [];\n\n                  decorators.forEach(function (decorator, index) {\n                    if (decorator[1]) {\n                      decorator[1]('Rejected', _results2[index], error);\n                    }\n                  });\n                  fun.__decoratorResults__ = undefined;\n                }\n\n                if (action.type === ActionTypes.Error) {\n                  if (isProcessedError(error) === undefined) {\n                    error = setProcessedError(error, true);\n                  }\n\n                  throw error;\n                } else if (isProcessedError(error)) {\n                  throw error;\n                } else {\n                  return dispatch(errorAction(error));\n                }\n              });\n              promiseResults.push(errorHandler);\n            }\n          });\n\n          if (promiseResults.length) {\n            return Promise.all(promiseResults);\n          }\n        }\n\n        return action;\n      };\n    };\n  };\n\n  var preLoadMiddleware = function preLoadMiddleware() {\n    return function (next) {\n      return function (action) {\n        var _action$type$split = action.type.split(config.NSP),\n            moduleName = _action$type$split[0],\n            actionName = _action$type$split[1];\n\n        if (moduleName && actionName && MetaData.moduleGetter[moduleName]) {\n          var initModel = loadModel(moduleName, store, undefined);\n\n          if (isPromise(initModel)) {\n            return initModel.then(function () {\n              return next(action);\n            });\n          }\n        }\n\n        return next(action);\n      };\n    };\n  };\n\n  var middlewareEnhancer = applyMiddleware.apply(void 0, [preLoadMiddleware].concat(storeMiddlewares, [middleware]));\n\n  var enhancer = function enhancer(newCreateStore) {\n    return function () {\n      var newStore = newCreateStore.apply(void 0, arguments);\n      var modelStore = newStore;\n      modelStore._medux_ = {\n        beforeState: {},\n        prevState: {},\n        currentState: {},\n        reducerMap: {},\n        effectMap: {},\n        injectedModules: {},\n        currentViews: {}\n      };\n      return newStore;\n    };\n  };\n\n  var enhancers = [].concat(storeEnhancers, [middlewareEnhancer, enhancer]);\n\n  if (MetaData.isDev && client && client.__REDUX_DEVTOOLS_EXTENSION__) {\n    enhancers.push(client.__REDUX_DEVTOOLS_EXTENSION__(client.__REDUX_DEVTOOLS_EXTENSION__OPTIONS));\n  }\n\n  var store = createStore(combineReducers, preloadedState, compose.apply(void 0, enhancers));\n  bindHistory(store, history);\n  MetaData.clientStore = store;\n  return store;\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _decorate from \"@babel/runtime/helpers/esm/decorate\";\nimport { MetaData, client, config, injectActions, isPromise, reducer } from './basic';\nimport { buildStore, loadModel as _loadModel } from './store';\nexport var exportModule = function exportModule(moduleName, initState, ActionHandles, views) {\n  var model = function model(store, options) {\n    var hasInjected = store._medux_.injectedModules[moduleName];\n\n    if (!hasInjected) {\n      store._medux_.injectedModules[moduleName] = true;\n      var moduleState = store.getState()[moduleName];\n      var handlers = new ActionHandles(moduleName, store);\n\n      var _actions = injectActions(store, moduleName, handlers);\n\n      handlers.actions = _actions;\n\n      if (!moduleState) {\n        var params = store._medux_.prevState.route.data.params;\n        initState.isModule = true;\n\n        var initAction = _actions.Init(initState, params[moduleName], options);\n\n        return store.dispatch(initAction);\n      }\n    }\n\n    return void 0;\n  };\n\n  model.moduleName = moduleName;\n  model.initState = initState;\n  var actions = {};\n  return {\n    moduleName: moduleName,\n    model: model,\n    views: views,\n    actions: actions\n  };\n};\nexport var BaseModelHandlers = _decorate(null, function (_initialize) {\n  var BaseModelHandlers = // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  function BaseModelHandlers(moduleName, store) {\n    this.moduleName = moduleName;\n    this.store = store;\n\n    _initialize(this);\n  };\n\n  return {\n    F: BaseModelHandlers,\n    d: [{\n      kind: \"field\",\n      key: \"actions\",\n      value: function value() {\n        return null;\n      }\n    }, {\n      kind: \"get\",\n      key: \"state\",\n      value: function state() {\n        return this.getState();\n      } //ie8不支持getter\n\n    }, {\n      kind: \"method\",\n      key: \"getState\",\n      value: function getState() {\n        return this.store._medux_.prevState[this.moduleName];\n      }\n    }, {\n      kind: \"get\",\n      key: \"rootState\",\n      value: function rootState() {\n        return this.getRootState();\n      } //ie8不支持getter\n\n    }, {\n      kind: \"method\",\n      key: \"getRootState\",\n      value: function getRootState() {\n        return this.store._medux_.prevState;\n      }\n    }, {\n      kind: \"get\",\n      key: \"currentState\",\n      value: function currentState() {\n        return this.getCurrentState();\n      } //ie8不支持getter\n\n    }, {\n      kind: \"method\",\n      key: \"getCurrentState\",\n      value: function getCurrentState() {\n        return this.store._medux_.currentState[this.moduleName];\n      }\n    }, {\n      kind: \"get\",\n      key: \"currentRootState\",\n      value: function currentRootState() {\n        return this.getCurrentRootState();\n      } //ie8不支持getter\n\n    }, {\n      kind: \"method\",\n      key: \"getCurrentRootState\",\n      value: function getCurrentRootState() {\n        return this.store._medux_.currentState;\n      }\n    }, {\n      kind: \"get\",\n      key: \"beforeState\",\n      value: function beforeState() {\n        return this.getBeforeState();\n      } //ie8不支持getter\n\n    }, {\n      kind: \"method\",\n      key: \"getBeforeState\",\n      value: function getBeforeState() {\n        return this.store._medux_.beforeState[this.moduleName];\n      }\n    }, {\n      kind: \"get\",\n      key: \"beforeRootState\",\n      value: function beforeRootState() {\n        return this.getBeforeRootState();\n      } //ie8不支持getter\n\n    }, {\n      kind: \"method\",\n      key: \"getBeforeRootState\",\n      value: function getBeforeRootState() {\n        return this.store._medux_.beforeState;\n      }\n    }, {\n      kind: \"method\",\n      key: \"dispatch\",\n      value: function dispatch(action) {\n        return this.store.dispatch(action);\n      }\n    }, {\n      kind: \"method\",\n      key: \"callThisAction\",\n      value: function callThisAction(handler) {\n        var actions = MetaData.actionCreatorMap[this.moduleName];\n\n        for (var _len = arguments.length, rest = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          rest[_key - 1] = arguments[_key];\n        }\n\n        return actions[handler.__actionName__].apply(actions, rest);\n      }\n    }, {\n      kind: \"method\",\n      key: \"updateState\",\n      value: function updateState(payload) {\n        this.dispatch(this.callThisAction(this.Update, Object.assign({}, this.getState(), {}, payload)));\n      }\n    }, {\n      kind: \"method\",\n      key: \"loadModel\",\n      value: function loadModel(moduleName, options) {\n        return _loadModel(moduleName, this.store, options);\n      }\n    }, {\n      kind: \"method\",\n      decorators: [reducer],\n      key: \"Init\",\n      value: function Init(initState, routeParams, options) {\n        return Object.assign({}, initState, {\n          routeParams: routeParams || initState.routeParams\n        }, options);\n      }\n    }, {\n      kind: \"method\",\n      decorators: [reducer],\n      key: \"Update\",\n      value: function Update(payload) {\n        return payload;\n      }\n    }, {\n      kind: \"method\",\n      decorators: [reducer],\n      key: \"RouteParams\",\n      value: function RouteParams(payload) {\n        var state = this.getState();\n        return Object.assign({}, state, {\n          routeParams: payload\n        });\n      }\n    }, {\n      kind: \"method\",\n      decorators: [reducer],\n      key: \"Loading\",\n      value: function Loading(payload) {\n        var state = this.getState();\n        return Object.assign({}, state, {\n          loading: Object.assign({}, state.loading, {}, payload)\n        });\n      }\n    }]\n  };\n});\nexport function isPromiseModule(module) {\n  return typeof module['then'] === 'function';\n}\nexport function isPromiseView(moduleView) {\n  return typeof moduleView['then'] === 'function';\n}\nexport function exportActions(moduleGetter) {\n  MetaData.moduleGetter = moduleGetter;\n  MetaData.actionCreatorMap = Object.keys(moduleGetter).reduce(function (maps, moduleName) {\n    maps[moduleName] = typeof Proxy === 'undefined' ? {} : new Proxy({}, {\n      get: function get(target, key) {\n        return function () {\n          for (var _len2 = arguments.length, payload = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            payload[_key2] = arguments[_key2];\n          }\n\n          return {\n            type: moduleName + config.NSP + key,\n            payload: payload\n          };\n        };\n      },\n      set: function set() {\n        return true;\n      }\n    });\n    return maps;\n  }, {});\n  return MetaData.actionCreatorMap;\n}\nexport function getView(moduleName, viewName, modelOptions) {\n  var moduleGetter = MetaData.moduleGetter;\n  var result = moduleGetter[moduleName]();\n\n  if (isPromiseModule(result)) {\n    return result.then(function (module) {\n      moduleGetter[moduleName] = function () {\n        return module;\n      };\n\n      var view = module.default.views[viewName];\n\n      if (MetaData.isServer) {\n        return view;\n      }\n\n      var initModel = module.default.model(MetaData.clientStore, modelOptions);\n\n      if (isPromise(initModel)) {\n        return initModel.then(function () {\n          return view;\n        });\n      } else {\n        return view;\n      }\n    });\n  } else {\n    var view = result.default.views[viewName];\n\n    if (MetaData.isServer) {\n      return view;\n    }\n\n    var initModel = result.default.model(MetaData.clientStore, modelOptions);\n\n    if (isPromise(initModel)) {\n      return initModel.then(function () {\n        return view;\n      });\n    } else {\n      return view;\n    }\n  }\n}\n\nfunction getModuleByName(moduleName, moduleGetter) {\n  var result = moduleGetter[moduleName]();\n\n  if (isPromiseModule(result)) {\n    return result.then(function (module) {\n      //在SSR时loadView不能出现异步，否则浏览器初轮渲染不会包括异步组件，从而导致和服务器返回不一致\n      moduleGetter[moduleName] = function () {\n        return module;\n      };\n\n      return module;\n    });\n  } else {\n    return result;\n  }\n}\n\nfunction getModuleListByNames(moduleNames, moduleGetter) {\n  var preModules = moduleNames.map(function (moduleName) {\n    var module = getModuleByName(moduleName, moduleGetter);\n\n    if (isPromiseModule(module)) {\n      return module;\n    } else {\n      return Promise.resolve(module);\n    }\n  });\n  return Promise.all(preModules);\n}\n\nexport function renderApp(render, moduleGetter, appModuleName, history, storeOptions) {\n  if (storeOptions === void 0) {\n    storeOptions = {};\n  }\n\n  MetaData.appModuleName = appModuleName;\n  var ssrInitStoreKey = storeOptions.ssrInitStoreKey || 'meduxInitStore';\n  var initData = {};\n\n  if (storeOptions.initData || client[ssrInitStoreKey]) {\n    initData = Object.assign({}, client[ssrInitStoreKey], {}, storeOptions.initData);\n  }\n\n  var store = buildStore(history, initData, storeOptions.reducers, storeOptions.middlewares, storeOptions.enhancers);\n  var reduxStore = store;\n  var preModuleNames = [appModuleName];\n\n  if (initData) {\n    preModuleNames.push.apply(preModuleNames, Object.keys(initData).filter(function (key) {\n      return key !== appModuleName && initData[key].isModule;\n    }));\n  } // 在ssr时，client必须在第一次render周期中完成和ssr一至的输出结构，所以不能出现异步模块\n\n\n  return getModuleListByNames(preModuleNames, moduleGetter).then(function (_ref) {\n    var appModule = _ref[0];\n    var initModel = appModule.default.model(store, undefined);\n    render(reduxStore, appModule.default.model, appModule.default.views, ssrInitStoreKey);\n\n    if (isPromise(initModel)) {\n      return initModel.then(function () {\n        return reduxStore;\n      });\n    } else {\n      return reduxStore;\n    }\n  });\n}\nexport function renderSSR(render, moduleGetter, appModuleName, history, storeOptions) {\n  var ssrInitStoreKey, store, storeState, paths, appModule, inited, i, k, _paths$i$split, _moduleName, module;\n\n  return _regeneratorRuntime.async(function renderSSR$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          if (storeOptions === void 0) {\n            storeOptions = {};\n          }\n\n          MetaData.appModuleName = appModuleName;\n          ssrInitStoreKey = storeOptions.ssrInitStoreKey || 'meduxInitStore';\n          store = buildStore(history, storeOptions.initData, storeOptions.reducers, storeOptions.middlewares, storeOptions.enhancers);\n          storeState = store.getState();\n          paths = storeState.route.data.paths;\n          paths.length === 0 && paths.push(appModuleName);\n          appModule = undefined;\n          inited = {};\n          i = 0, k = paths.length;\n\n        case 10:\n          if (!(i < k)) {\n            _context.next = 21;\n            break;\n          }\n\n          _paths$i$split = paths[i].split(config.VSP), _moduleName = _paths$i$split[0];\n\n          if (inited[_moduleName]) {\n            _context.next = 18;\n            break;\n          }\n\n          inited[_moduleName] = true;\n          module = moduleGetter[_moduleName]();\n          _context.next = 17;\n          return _regeneratorRuntime.awrap(module.default.model(store, undefined));\n\n        case 17:\n          if (i === 0) {\n            appModule = module;\n          }\n\n        case 18:\n          i++;\n          _context.next = 10;\n          break;\n\n        case 21:\n          return _context.abrupt(\"return\", render(store, appModule.default.model, appModule.default.views, ssrInitStoreKey));\n\n        case 22:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}","import { compilePath, compileToPath, matchPath } from './matchPath';\nimport assignDeep from 'deep-extend';\nimport { config as coreConfig } from '@medux/core';\nvar config = {\n  escape: true,\n  dateParse: true,\n  splitKey: 'q',\n  defaultRouteParams: {}\n};\nexport function setRouteConfig(conf) {\n  conf.escape !== undefined && (config.escape = conf.escape);\n  conf.dateParse !== undefined && (config.dateParse = conf.dateParse);\n  conf.splitKey && (config.splitKey = conf.splitKey);\n  conf.defaultRouteParams && (config.defaultRouteParams = conf.defaultRouteParams);\n}\n\nfunction excludeDefaultData(data, def, holde, views) {\n  var result = {};\n  Object.keys(data).forEach(function (moduleName) {\n    var value = data[moduleName];\n    var defaultValue = def[moduleName];\n\n    if (value !== defaultValue) {\n      if (typeof value === typeof defaultValue && typeof value === 'object' && !Array.isArray(value)) {\n        value = excludeDefaultData(value, defaultValue, !!views && !views[moduleName]);\n      }\n\n      if (value !== undefined) {\n        result[moduleName] = value;\n      }\n    }\n  });\n\n  if (Object.keys(result).length === 0 && !holde) {\n    return undefined;\n  }\n\n  return result;\n}\n\nvar ISO_DATE_FORMAT = /^\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d(\\.\\d+)?(Z|[+-][01]\\d:[0-5]\\d)$/;\n\nfunction dateParse(prop, value) {\n  if (typeof value === 'string' && ISO_DATE_FORMAT.test(value)) {\n    return new Date(value);\n  }\n\n  return value;\n}\n\nfunction searchParse(search) {\n  if (!search) {\n    return {};\n  }\n\n  if (config.escape) {\n    search = unescape(search);\n  }\n\n  try {\n    return JSON.parse(search, config.dateParse ? dateParse : undefined);\n  } catch (error) {\n    return {};\n  }\n}\n\nfunction joinSearchString(arr) {\n  var strs = [''];\n\n  for (var i = 0, k = arr.length; i < k; i++) {\n    strs.push(arr[i] || '');\n  }\n\n  return strs.join(\"&\" + config.splitKey + \"=\");\n}\n\nfunction searchStringify(searchData) {\n  if (typeof searchData !== 'object') {\n    return '';\n  }\n\n  var str = JSON.stringify(searchData);\n\n  if (str === '{}') {\n    return '';\n  }\n\n  if (config.escape) {\n    return escape(str);\n  } else {\n    return str;\n  }\n}\n\nfunction splitSearch(search) {\n  var reg = new RegExp(\"[&?#]\" + config.splitKey + \"=[^&]*\", 'g');\n  var arr = search.match(reg);\n  var stackParams = [];\n\n  if (arr) {\n    stackParams = arr.map(function (str) {\n      return searchParse(str.split('=')[1]);\n    });\n  }\n\n  return stackParams;\n}\n\nfunction checkPathArgs(params) {\n  var obj = {};\n\n  for (var _key in params) {\n    if (params.hasOwnProperty(_key)) {\n      (function () {\n        var val = params[_key];\n\n        var props = _key.split('.');\n\n        if (props.length > 1) {\n          props.reduce(function (prev, cur, index, arr) {\n            if (index === arr.length - 1) {\n              prev[cur] = val;\n            } else {\n              prev[cur] = {};\n            }\n\n            return prev[cur];\n          }, obj);\n        } else {\n          obj[_key] = val;\n        }\n      })();\n    }\n  }\n\n  return obj;\n}\n\nfunction pathnameParse(pathname, routeConfig, paths, args) {\n  for (var _rule in routeConfig) {\n    if (routeConfig.hasOwnProperty(_rule)) {\n      var item = routeConfig[_rule];\n\n      var _ref = typeof item === 'string' ? [item, null] : item,\n          _viewName = _ref[0],\n          pathConfig = _ref[1];\n\n      var match = matchPath(pathname, {\n        path: _rule,\n        exact: !pathConfig\n      });\n\n      if (match) {\n        paths.push(_viewName);\n\n        var _moduleName = _viewName.split(coreConfig.VSP)[0];\n\n        var params = match.params;\n\n        if (params && Object.keys(params).length > 0) {\n          args[_moduleName] = Object.assign({}, args[_moduleName], {}, checkPathArgs(params));\n        }\n\n        if (pathConfig) {\n          pathnameParse(pathname, pathConfig, paths, args);\n        }\n\n        return;\n      }\n    }\n  }\n}\n\nfunction compileConfig(routeConfig, parentAbsoluteViewName, viewToRule, ruleToKeys) {\n  if (parentAbsoluteViewName === void 0) {\n    parentAbsoluteViewName = '';\n  }\n\n  if (viewToRule === void 0) {\n    viewToRule = {};\n  }\n\n  if (ruleToKeys === void 0) {\n    ruleToKeys = {};\n  }\n\n  for (var _rule2 in routeConfig) {\n    if (routeConfig.hasOwnProperty(_rule2)) {\n      if (!ruleToKeys[_rule2]) {\n        var _compilePath = compilePath(_rule2, {\n          end: true,\n          strict: false,\n          sensitive: false\n        }),\n            keys = _compilePath.keys;\n\n        ruleToKeys[_rule2] = keys.reduce(function (prev, cur) {\n          prev.push(cur.name);\n          return prev;\n        }, []);\n      }\n\n      var item = routeConfig[_rule2];\n\n      var _ref2 = typeof item === 'string' ? [item, null] : item,\n          _viewName2 = _ref2[0],\n          pathConfig = _ref2[1];\n\n      var absoluteViewName = parentAbsoluteViewName + '/' + _viewName2;\n      viewToRule[absoluteViewName] = _rule2;\n\n      if (pathConfig) {\n        compileConfig(pathConfig, absoluteViewName, viewToRule, ruleToKeys);\n      }\n    }\n  }\n\n  return {\n    viewToRule: viewToRule,\n    ruleToKeys: ruleToKeys\n  };\n}\n\nfunction assignRouteData(paths, stackParams, args) {\n  if (!stackParams[0]) {\n    stackParams[0] = {};\n  }\n\n  if (args) {\n    stackParams[0] = assignDeep({}, args, stackParams[0]);\n  }\n\n  var firstStackParams = stackParams[0];\n  var views = paths.reduce(function (prev, cur) {\n    var _cur$split = cur.split(coreConfig.VSP),\n        moduleName = _cur$split[0],\n        viewName = _cur$split[1];\n\n    if (viewName) {\n      if (!prev[moduleName]) {\n        prev[moduleName] = {};\n      }\n\n      prev[moduleName][viewName] = true;\n\n      if (!firstStackParams[moduleName]) {\n        firstStackParams[moduleName] = {};\n      }\n    }\n\n    return prev;\n  }, {});\n  Object.keys(firstStackParams).forEach(function (moduleName) {\n    firstStackParams[moduleName] = assignDeep({}, config.defaultRouteParams[moduleName], firstStackParams[moduleName]);\n  });\n  var params = assignDeep.apply(void 0, [{}].concat(stackParams));\n  Object.keys(params).forEach(function (moduleName) {\n    if (!firstStackParams[moduleName]) {\n      params[moduleName] = assignDeep({}, config.defaultRouteParams[moduleName], params[moduleName]);\n    }\n  });\n  return {\n    views: views,\n    paths: paths,\n    params: params,\n    stackParams: stackParams\n  };\n}\n\nexport function fillRouteData(routePayload) {\n  var extend = routePayload.extend || {\n    views: {},\n    paths: [],\n    stackParams: [],\n    params: {}\n  };\n  var stackParams = [].concat(extend.stackParams);\n\n  if (routePayload.stackParams) {\n    routePayload.stackParams.forEach(function (item, index) {\n      if (item) {\n        stackParams[index] = assignDeep({}, stackParams[index], item);\n      }\n    });\n  }\n\n  return assignRouteData(routePayload.paths || extend.paths, stackParams);\n}\n\nfunction extractHashData(params) {\n  var searchParams = {};\n  var hashParams = {};\n\n  var _loop = function _loop(_moduleName2) {\n    if (params[_moduleName2] && params.hasOwnProperty(_moduleName2)) {\n      var _data = params[_moduleName2];\n      var keys = Object.keys(_data);\n\n      if (keys.length > 0) {\n        keys.forEach(function (key) {\n          if (key.startsWith('_')) {\n            if (!hashParams[_moduleName2]) {\n              hashParams[_moduleName2] = {};\n            }\n\n            hashParams[_moduleName2][key] = _data[key];\n          } else {\n            if (!searchParams[_moduleName2]) {\n              searchParams[_moduleName2] = {};\n            }\n\n            searchParams[_moduleName2][key] = _data[key];\n          }\n        });\n      } else {\n        searchParams[_moduleName2] = {};\n      }\n    }\n  };\n\n  for (var _moduleName2 in params) {\n    _loop(_moduleName2);\n  }\n\n  return {\n    search: searchStringify(searchParams),\n    hash: searchStringify(hashParams)\n  };\n}\n\nexport function buildTransformRoute(routeConfig) {\n  var _compileConfig = compileConfig(routeConfig),\n      viewToRule = _compileConfig.viewToRule,\n      ruleToKeys = _compileConfig.ruleToKeys;\n\n  var locationToRoute = function locationToRoute(location) {\n    var paths = [];\n    var pathsArgs = {};\n    pathnameParse(location.pathname, routeConfig, paths, pathsArgs);\n    var stackParams = splitSearch(location.search);\n    var hashStackParams = splitSearch(location.hash);\n    hashStackParams.forEach(function (item, index) {\n      if (item) {\n        if (!stackParams[index]) {\n          stackParams[index] = {};\n        }\n\n        assignDeep(stackParams[index], item);\n      }\n    });\n    return assignRouteData(paths, stackParams, pathsArgs);\n  };\n\n  var routeToLocation = function routeToLocation(routeData) {\n    var views = routeData.views,\n        paths = routeData.paths,\n        params = routeData.params,\n        stackParams = routeData.stackParams;\n    var firstStackParams = stackParams[0];\n    var pathname = '';\n    var firstStackParamsFilter;\n\n    if (paths.length > 0) {\n      firstStackParamsFilter = assignDeep({}, firstStackParams);\n      paths.reduce(function (parentAbsoluteViewName, viewName, index) {\n        var absoluteViewName = parentAbsoluteViewName + '/' + viewName;\n        var rule = viewToRule[absoluteViewName];\n        var moduleName = viewName.split(coreConfig.VSP)[0];\n\n        if (index === paths.length - 1) {\n          var toPath = compileToPath(rule);\n\n          var _keys = ruleToKeys[rule] || [];\n\n          var args = _keys.reduce(function (prev, cur) {\n            if (typeof cur === 'string') {\n              var props = cur.split('.');\n\n              if (props.length) {\n                prev[cur] = props.reduce(function (p, c) {\n                  return p[c];\n                }, params[moduleName]);\n                return prev;\n              }\n            }\n\n            prev[cur] = params[moduleName][cur];\n            return prev;\n          }, {});\n\n          pathname = toPath(args);\n        }\n\n        var keys = ruleToKeys[rule] || [];\n        keys.forEach(function (key) {\n          if (typeof key === 'string') {\n            var props = key.split('.');\n\n            if (props.length) {\n              props.reduce(function (p, c, i) {\n                if (i === props.length - 1) {\n                  delete p[c];\n                }\n\n                return p[c] || {};\n              }, firstStackParamsFilter[moduleName] || {});\n              return;\n            }\n          }\n\n          if (firstStackParamsFilter[moduleName]) {\n            delete firstStackParamsFilter[moduleName][key];\n          }\n        });\n        return absoluteViewName;\n      }, '');\n    } else {\n      firstStackParamsFilter = firstStackParams;\n    }\n\n    var arr = [].concat(stackParams);\n    arr[0] = excludeDefaultData(firstStackParamsFilter, config.defaultRouteParams, false, views);\n    var searchStrings = [];\n    var hashStrings = [];\n    arr.forEach(function (params, index) {\n      var _extractHashData = extractHashData(params),\n          search = _extractHashData.search,\n          hash = _extractHashData.hash;\n\n      search && (searchStrings[index] = search);\n      hash && (hashStrings[index] = hash);\n    });\n    return {\n      pathname: pathname,\n      search: '?' + joinSearchString(searchStrings).substr(1),\n      hash: '#' + joinSearchString(hashStrings).substr(1)\n    };\n  };\n\n  return {\n    locationToRoute: locationToRoute,\n    routeToLocation: routeToLocation\n  };\n}\nexport function fillBrowserRouteData(routePayload) {\n  var extend = routePayload.extend || {\n    views: {},\n    paths: [],\n    stackParams: [],\n    params: {}\n  };\n  var stackParams = [].concat(extend.stackParams);\n\n  if (routePayload.params) {\n    stackParams[0] = assignDeep({}, stackParams[0], routePayload.params);\n  }\n\n  return assignRouteData(routePayload.paths || extend.paths, stackParams);\n}\n\nfunction isBrowserRoutePayload(data) {\n  return typeof data !== 'string' && !data['pathname'];\n}\n\nexport function getBrowserRouteActions(getBrowserHistoryActions) {\n  return {\n    push: function push(data) {\n      var args = data;\n\n      if (isBrowserRoutePayload(data)) {\n        args = fillBrowserRouteData(data);\n      }\n\n      getBrowserHistoryActions().push(args);\n    },\n    replace: function replace(data) {\n      var args = data;\n\n      if (isBrowserRoutePayload(data)) {\n        args = fillBrowserRouteData(data);\n      }\n\n      getBrowserHistoryActions().replace(args);\n    },\n    go: function go(n) {\n      getBrowserHistoryActions().go(n);\n    },\n    goBack: function goBack() {\n      getBrowserHistoryActions().goBack();\n    },\n    goForward: function goForward() {\n      getBrowserHistoryActions().goForward();\n    }\n  };\n}\nexport function buildToBrowserUrl(getTransformRoute) {\n  function toUrl() {\n    for (var _len = arguments.length, args = new Array(_len), _key2 = 0; _key2 < _len; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    if (args.length === 1) {\n      var _location = getTransformRoute().routeToLocation(fillBrowserRouteData(args[0]));\n\n      args = [_location.pathname, _location.search, _location.hash];\n    }\n\n    var _ref3 = args,\n        pathname = _ref3[0],\n        search = _ref3[1],\n        hash = _ref3[2];\n    var url = pathname;\n\n    if (search) {\n      url += search;\n    }\n\n    if (hash) {\n      url += hash;\n    }\n\n    return url;\n  }\n\n  return toUrl;\n}","import _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport React from 'react';\nimport { exportModule as baseExportModule, renderApp as baseRenderApp, renderSSR as baseRenderSSR, getView, isPromiseView } from '@medux/core';\nimport { Provider } from 'react-redux';\nexport function renderApp(render, moduleGetter, appModuleName, historyProxy, storeOptions) {\n  return baseRenderApp(function (store, appModel, appViews, ssrInitStoreKey) {\n    var ReduxProvider = function ReduxProvider(props) {\n      return React.createElement(Provider, {\n        store: store\n      }, props.children);\n    };\n\n    render(ReduxProvider, appViews.Main, ssrInitStoreKey);\n  }, moduleGetter, appModuleName, historyProxy, storeOptions);\n}\nexport function renderSSR(render, moduleGetter, appModuleName, historyProxy, storeOptions) {\n  if (storeOptions === void 0) {\n    storeOptions = {};\n  }\n\n  return baseRenderSSR(function (store, appModel, appViews, ssrInitStoreKey) {\n    var data = store.getState();\n\n    var ReduxProvider = function ReduxProvider(props) {\n      return React.createElement(Provider, {\n        store: store\n      }, props.children);\n    };\n\n    return {\n      store: store,\n      ssrInitStoreKey: ssrInitStoreKey,\n      data: data,\n      html: render(ReduxProvider, appViews.Main)\n    };\n  }, moduleGetter, appModuleName, historyProxy, storeOptions);\n}\nexport var loadView = function loadView(moduleName, viewName, modelOptions, Loading) {\n  var _temp;\n\n  return _temp = function (_React$Component) {\n    _inheritsLoose(Loader, _React$Component);\n\n    function Loader(props, context) {\n      var _this;\n\n      _this = _React$Component.call(this, props, context) || this;\n\n      _defineProperty(_assertThisInitialized(_this), \"state\", {\n        Component: null\n      });\n\n      var moduleViewResult = getView(moduleName, viewName, modelOptions);\n\n      if (isPromiseView(moduleViewResult)) {\n        moduleViewResult.then(function (Component) {\n          Object.keys(Loader).forEach(function (key) {\n            return Component[key] = Loader[key];\n          });\n          Object.keys(Component).forEach(function (key) {\n            return Loader[key] = Component[key];\n          });\n\n          _this.setState({\n            Component: Component\n          });\n        });\n      } else {\n        Object.keys(Loader).forEach(function (key) {\n          return moduleViewResult[key] = Loader[key];\n        });\n        Object.keys(moduleViewResult).forEach(function (key) {\n          return Loader[key] = moduleViewResult[key];\n        });\n        _this.state = {\n          Component: moduleViewResult\n        };\n      }\n\n      return _this;\n    }\n\n    var _proto = Loader.prototype;\n\n    _proto.render = function render() {\n      var Component = this.state.Component;\n      return Component ? React.createElement(Component, this.props) : Loading ? React.createElement(Loading, this.props) : null;\n    };\n\n    return Loader;\n  }(React.Component), _temp;\n};\nexport var exportModule = baseExportModule;","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nexport { createBrowserHistory, createMemoryHistory, createHashHistory } from 'history';\n\nfunction isLocation(data) {\n  return !!data['pathname'];\n}\n\nvar BrowserHistoryProxy = function () {\n  function BrowserHistoryProxy(history, locationToRoute) {\n    this.history = history;\n    this.locationToRoute = locationToRoute;\n\n    _defineProperty(this, \"initialized\", true);\n  }\n\n  var _proto = BrowserHistoryProxy.prototype;\n\n  _proto.getLocation = function getLocation() {\n    return this.history.location;\n  };\n\n  _proto.subscribe = function subscribe(listener) {\n    this.history.listen(listener);\n  };\n\n  _proto.locationToRouteData = function locationToRouteData(location) {\n    return location.state || this.locationToRoute(location);\n  };\n\n  _proto.equal = function equal(a, b) {\n    return a.pathname === b.pathname && a.search === b.search && a.hash === b.hash;\n  };\n\n  _proto.patch = function patch(location, routeData) {\n    this.history.push(Object.assign({}, location, {\n      state: routeData\n    }));\n  };\n\n  return BrowserHistoryProxy;\n}();\n\nvar BrowserHistoryActions = function () {\n  function BrowserHistoryActions(history, routeToLocation) {\n    this.history = history;\n    this.routeToLocation = routeToLocation;\n  }\n\n  var _proto2 = BrowserHistoryActions.prototype;\n\n  _proto2.push = function push(data) {\n    if (typeof data === 'string') {\n      this.history.push(data);\n    } else if (isLocation(data)) {\n      this.history.push(Object.assign({}, data, {\n        state: undefined\n      }));\n    } else {\n      var _location = this.routeToLocation(data);\n\n      this.history.push(Object.assign({}, _location, {\n        state: data\n      }));\n    }\n  };\n\n  _proto2.replace = function replace(data) {\n    if (typeof data === 'string') {\n      this.history.replace(data);\n    } else if (isLocation(data)) {\n      this.history.replace(Object.assign({}, data, {\n        state: undefined\n      }));\n    } else {\n      var _location2 = this.routeToLocation(data);\n\n      this.history.replace(Object.assign({}, _location2, {\n        state: data\n      }));\n    }\n  };\n\n  _proto2.go = function go(n) {\n    this.history.go(n);\n  };\n\n  _proto2.goBack = function goBack() {\n    this.history.goBack();\n  };\n\n  _proto2.goForward = function goForward() {\n    this.history.goForward();\n  };\n\n  return BrowserHistoryActions;\n}();\n\nexport function createHistory(history, transformRoute) {\n  var historyProxy = new BrowserHistoryProxy(history, transformRoute.locationToRoute);\n  var historyActions = new BrowserHistoryActions(history, transformRoute.routeToLocation);\n  return {\n    historyProxy: historyProxy,\n    historyActions: historyActions\n  };\n}","import {RootState as BaseRootState, ModuleGetter, StoreOptions} from '@medux/core/types/export';\nimport {History, createLocation} from 'history';\nimport {Location, TransformRoute, buildToBrowserUrl, buildTransformRoute, getBrowserRouteActions} from '@medux/route-plan-a';\nimport React, {ReactElement} from 'react';\nimport {Router, StaticRouter, withRouter} from 'react-router-dom';\nimport {renderApp, renderSSR} from '@medux/react';\nimport {renderToNodeStream, renderToString} from 'react-dom/server';\n\nimport ReactDOM from 'react-dom';\nimport {createHistory} from '@medux/web';\n\nexport {loadView, exportModule} from '@medux/react';\nexport {ActionTypes, delayPromise, LoadingState, exportActions, BaseModelHandlers, effect, errorAction, reducer} from '@medux/core';\nexport {setRouteConfig} from '@medux/route-plan-a';\n\nexport type RouteData = import('@medux/core/types/export').RouteData;\nexport type LoadView<MG extends ModuleGetter> = import('@medux/react').LoadView<MG>;\nexport type BaseModelState<R = {[key: string]: any}> = import('@medux/core/types/export').BaseModelState<R>;\nexport type BrowserRoutePayload<P> = import('@medux/route-plan-a').BrowserRoutePayload<P>;\nexport type RouteConfig = import('@medux/route-plan-a').RouteConfig;\nexport type ToBrowserUrl<Params> = import('@medux/route-plan-a').ToBrowserUrl<Params>;\nexport type BrowserHistoryActions<Params> = import('@medux/route-plan-a').BrowserHistoryActions<BrowserRoutePayload<Params>>;\n\nlet historyActions: BrowserHistoryActions<RouteData> | undefined = undefined;\nlet transformRoute: TransformRoute | undefined = undefined;\n\nexport function getBrowserHistory<Params>(): {historyActions: BrowserHistoryActions<Params>; toUrl: ToBrowserUrl<Params>} {\n  return {historyActions: getBrowserRouteActions<Params>(() => historyActions!), toUrl: buildToBrowserUrl(() => transformRoute!)};\n}\n\nexport function buildApp<M extends ModuleGetter, A extends Extract<keyof M, string>>(\n  moduleGetter: M,\n  appModuleName: A,\n  history: History,\n  routeConfig: RouteConfig,\n  storeOptions: StoreOptions = {},\n  container: string | Element | ((component: ReactElement<any>) => void) = 'root'\n) {\n  if (!transformRoute) {\n    transformRoute = buildTransformRoute(routeConfig);\n  }\n  const historyData = createHistory(history, transformRoute);\n  const {historyProxy} = historyData;\n  historyActions = historyData.historyActions;\n\n  return renderApp(\n    (Provider, AppMainView, ssrInitStoreKey) => {\n      const WithRouter = withRouter(AppMainView);\n      const app = (\n        <Provider>\n          <Router history={history}>\n            <WithRouter />\n          </Router>\n        </Provider>\n      );\n      if (typeof container === 'function') {\n        container(app);\n      } else {\n        const render = window[ssrInitStoreKey] ? ReactDOM.hydrate : ReactDOM.render;\n        render(app, typeof container === 'string' ? document.getElementById(container) : container);\n      }\n    },\n    moduleGetter,\n    appModuleName,\n    historyProxy,\n    storeOptions\n  );\n}\n\nexport function buildSSR<M extends ModuleGetter, A extends Extract<keyof M, string>>(\n  moduleGetter: M,\n  appModuleName: A,\n  location: string,\n  routeConfig: RouteConfig,\n  storeOptions: StoreOptions = {},\n  renderToStream: boolean = false\n): Promise<{html: string | ReadableStream; data: any; ssrInitStoreKey: string}> {\n  if (!transformRoute) {\n    transformRoute = buildTransformRoute(routeConfig);\n  }\n  const historyData = createHistory({listen: () => void 0, location: createLocation(location)} as any, transformRoute);\n  const {historyProxy} = historyData;\n  historyActions = historyData.historyActions;\n\n  const render = renderToStream ? renderToNodeStream : renderToString;\n  return renderSSR(\n    (Provider, AppMainView) => {\n      return render(\n        <Provider>\n          <StaticRouter location={location}>\n            <AppMainView />\n          </StaticRouter>\n        </Provider>\n      );\n    },\n    moduleGetter,\n    appModuleName,\n    historyProxy,\n    storeOptions\n  );\n}\n\nexport type RootState<G extends ModuleGetter> = BaseRootState<G, Location>;\n"],"names":["parse","str","options","tokens","i","length","char","push","type","index","value","count","pattern","_j","TypeError","name","j","code","charCodeAt","lexer","_options$prefixes","prefixes","defaultPattern","escapeString","delimiter","result","key","path","tryConsume","mustConsume","undefined","_tokens$i","nextType","consumeText","prefix","indexOf","suffix","modifier","_value","_prefix","_name","_pattern","compile","reFlags","flags","_options2","_options2$encode","encode","x","_options2$validate","validate","matches","map","token","RegExp","data","_token","_value2","optional","repeat","Array","isArray","segment","test","typeOfMessage","_segment","String","tokensToFunction","replace","sensitive","stringToRegexp","keys","_options4","_options4$strict","strict","_options4$start","start","_options4$end","end","_options4$encode","endsWith","route","_iterator","_isArray","_i","Symbol","iterator","_ref","next","done","_token2","mod","endToken","isEndDelimited","tokensToRegexp","pathToRegexp","groups","source","match","regexpToRegexp","paths","parts","join","arrayToRegexp","cache","cacheCount","compilePath","cacheKey","pathCache","regexp","matchPath","pathname","_options","_options$exact","exact","_options$strict","_options$sensitive","concat","reduce","matched","url","isExact","params","_compilePath","exec","values","slice","memo","LoadingState","isSpecificValue","val","Buffer","Date","cloneSpecificValue","alloc","copy","getTime","Error","deepCloneArray","arr","clone","forEach","item","deepExtend","safeGetProperty","object","property","module","arguments","src","target","args","prototype","call","obj","Object","PEvent","bubbling","_defineProperty","this","_proto","setTarget","setCurrentTarget","currentTarget","TaskCounter","_PDispatcher","deferSecond","_this2","_assertThisInitialized","_inheritsLoose","_proto3","addItem","promise","note","_this3","list","some","then","completeItem","dispatch","Start","ctimer","setTimeout","Depth","findIndex","splice","clearTimeout","Stop","PDispatcher","parent","_proto2","addListener","ename","handler","dictionary","storeHandlers","removeListener","_this","handlers","propertyIsEnumerable","n","evt","k","setParent","loadings","config","NSP","VSP","MSP","MetaData","isServer","global","window","isDev","process","env","NODE_ENV","actionCreatorMap","clientStore","appModuleName","moduleGetter","ActionTypes","MLoading","MInit","MRouteParams","RouteChange","client","isPromise","reducer","descriptor","fun","__actionName__","__isReducer__","enumerable","isProcessedError","error","meduxProcessed","transformAction","actionName","action","listenerModule","actionHandlerMap","addModuleActionCreatorList","moduleName","actions","_len2","payload","_key2","errorAction","loadModel","store","_medux_","injectedModules","default","model","getActionData","bindHistory","history","inTimeTravelling","handleLocationChange","location","getState","equal","locationToRouteData","routeChangeAction","subscribe","initialized","storeRouteState","getLocation","patch","buildStore","preloadedState","storeReducers","storeMiddlewares","storeEnhancers","state","assign","middlewareEnhancer","applyMiddleware","apply","_action$type$split","split","initModel","_ref2","originalAction","meta","beforeState","prevState","rootRouteParams","routeParams","routeParamsAction","handlersCommon","effectMap","handlersEvery","handlerModules","orderList","priority","unshift","__isHandler__","moduleNameMap","promiseResults","effectResult","decorators","__decorators__","results","decorator","__decoratorResults__","errorHandler","reslove","_results","_results2","setProcessedError","Promise","all","enhancers","newCreateStore","newStore","modelStore","currentState","reducerMap","currentViews","__REDUX_DEVTOOLS_EXTENSION__","__REDUX_DEVTOOLS_EXTENSION__OPTIONS","createStore","rootState","changed","compose","BaseModelHandlers","_decorate","_initialize","F","d","kind","getRootState","getCurrentState","getCurrentRootState","getBeforeState","getBeforeRootState","_len","rest","_key","callThisAction","Update","_loadModel","initState","loading","isPromiseModule","getModuleListByNames","moduleNames","preModules","getModuleByName","resolve","escape","dateParse","splitKey","defaultRouteParams","ISO_DATE_FORMAT","prop","joinSearchString","strs","searchStringify","searchData","JSON","stringify","splitSearch","search","reg","stackParams","unescape","searchParse","checkPathArgs","hasOwnProperty","props","prev","cur","assignRouteData","assignDeep","firstStackParams","views","_cur$split","coreConfig","viewName","buildTransformRoute","routeConfig","_compileConfig","compileConfig","parentAbsoluteViewName","viewToRule","ruleToKeys","_rule2","_viewName2","pathConfig","absoluteViewName","locationToRoute","pathsArgs","pathnameParse","_rule","_viewName","_moduleName","hash","routeToLocation","routeData","firstStackParamsFilter","rule","toPath","compileToPath","p","c","excludeDefaultData","def","holde","defaultValue","searchStrings","hashStrings","_extractHashData","searchParams","hashParams","_loop","_moduleName2","_data","startsWith","extractHashData","substr","fillBrowserRouteData","routePayload","extend","isBrowserRoutePayload","renderApp","render","historyProxy","storeOptions","ssrInitStoreKey","initData","reducers","middlewares","reduxStore","preModuleNames","filter","isModule","appModule","baseRenderApp","appModel","appViews","React","createElement","Provider","children","Main","renderSSR","storeState","inited","_paths$i$split","_regeneratorRuntime","async","_context","awrap","abrupt","stop","baseRenderSSR","html","exportModule","ActionHandles","moduleState","_actions","actionNames","thisObj","newFun","__isEffect__","bind","trim","injectActions","initAction","Init","isLocation","BrowserHistoryProxy","listener","listen","a","b","BrowserHistoryActions","_location","_location2","go","goBack","goForward","createHistory","transformRoute","historyActions","container","historyData","AppMainView","WithRouter","withRouter","app","Router","ReactDOM","hydrate","document","getElementById","renderToStream","createLocation","renderToNodeStream","renderToString","StaticRouter","second","delay","items","loadingForGroupName","loadingForModuleName","curAction","promiseResult","group","e","_action","setLoading","maps","Proxy","get","set","getBrowserHistoryActions","toUrl","getTransformRoute","_ref3","modelOptions","Loading","_React$Component","Loader","context","Component","moduleViewResult","view","getView","setState","conf"],"mappings":"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"}