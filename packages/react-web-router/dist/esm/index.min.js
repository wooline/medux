import e,{useEffect as t,useState as r}from"react";import{unmountComponentAtNode as n,hydrate as o,render as i}from"react-dom";import{connect as a}from"react-redux";var u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function c(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},r.exports),r.exports}var s=c((function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}}})),f=c((function(e){var t=function(e){var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,i=Object.create(o.prototype),a=new k(n||[]);return i._invoke=function(e,t,r){var n=l;return function(o,i){if(n===p)throw new Error("Generator is already running");if(n===h){if("throw"===o)throw i;return R()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=x(a,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var c=f(e,t,r);if("normal"===c.type){if(n=r.done?h:d,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=h,r.method="throw",r.arg=c.arg)}}}(e,r,a),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l="suspendedStart",d="suspendedYield",p="executing",h="completed",v={};function m(){}function y(){}function g(){}var w={};w[i]=function(){return this};var b=Object.getPrototypeOf,S=b&&b(b(T([])));S&&S!==r&&n.call(S,i)&&(w=S);var _=g.prototype=m.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function r(o,i,a,u){var c=f(e[o],e,i);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,u)}),(function(e){r("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return r("throw",e,a,u)}))}u(c.arg)}var o;this._invoke=function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}}function x(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method))return v;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=f(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function T(e){if(e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}return{next:R}}function R(){return{value:t,done:!0}}return y.prototype=_.constructor=g,g.constructor=y,y.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},E(P.prototype),P.prototype[a]=function(){return this},e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(_),c(_,u,"Generator"),_[i]=function(){return this},_.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}));function l(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}var d=function(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){l(i,n,o,a,u,"next",e)}function u(e){l(i,n,o,a,u,"throw",e)}a(void 0)}))}};var p=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e};var h=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e};var v=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t};var m=function(e){if(Array.isArray(e))return e};var y=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)};var g=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n};var w=function(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}};var b=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var S=function(e){return m(e)||y(e)||w(e)||b()},_=c((function(e){function t(r){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(r)}e.exports=t}));var E=function(e,t){if("object"!==_(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)};var P=function(e){var t=E(e,"string");return"symbol"===_(t)?t:String(t)};function x(){x=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){["method","field"].forEach((function(r){t.forEach((function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r=e.prototype;["method","field"].forEach((function(n){t.forEach((function(t){var o=t.placement;if(t.kind===n&&("static"===o||"prototype"===o)){var i="static"===o?e:r;this.defineClassElement(i,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var n=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===n?void 0:n.call(e)}}Object.defineProperty(e,t.key,r)},decorateClass:function(e,t){var r=[],n=[],o={static:[],prototype:[],own:[]};if(e.forEach((function(e){this.addElementPlacement(e,o)}),this),e.forEach((function(e){if(!k(e))return r.push(e);var t=this.decorateElement(e,o);r.push(t.element),r.push.apply(r,t.extras),n.push.apply(n,t.finishers)}),this),!t)return{elements:r,finishers:n};var i=this.decorateConstructor(r,t);return n.push.apply(n,i.finishers),i.finishers=n,i},addElementPlacement:function(e,t,r){var n=t[e.placement];if(!r&&-1!==n.indexOf(e.key))throw new TypeError("Duplicated element ("+e.key+")");n.push(e.key)},decorateElement:function(e,t){for(var r=[],n=[],o=e.decorators,i=o.length-1;i>=0;i--){var a=t[e.placement];a.splice(a.indexOf(e.key),1);var u=this.fromElementDescriptor(e),c=this.toElementFinisherExtras((0,o[i])(u)||u);e=c.element,this.addElementPlacement(e,t),c.finisher&&n.push(c.finisher);var s=c.extras;if(s){for(var f=0;f<s.length;f++)this.addElementPlacement(s[f],t);r.push.apply(r,s)}}return{element:e,finishers:n,extras:r}},decorateConstructor:function(e,t){for(var r=[],n=t.length-1;n>=0;n--){var o=this.fromClassDescriptor(e),i=this.toClassDescriptor((0,t[n])(o)||o);if(void 0!==i.finisher&&r.push(i.finisher),void 0!==i.elements){e=i.elements;for(var a=0;a<e.length-1;a++)for(var u=a+1;u<e.length;u++)if(e[a].key===e[u].key&&e[a].placement===e[u].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){if(void 0!==e)return S(e).map((function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=P(e.key),n=String(e.placement);if("static"!==n&&"prototype"!==n&&"own"!==n)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+n+'"');var o=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var i={kind:t,key:r,placement:n,descriptor:Object.assign({},o)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(o,"get","The property descriptor of a field descriptor"),this.disallowProperty(o,"set","The property descriptor of a field descriptor"),this.disallowProperty(o,"value","The property descriptor of a field descriptor"),i.initializer=e.initializer),i},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:R(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:e.map(this.fromElementDescriptor,this)};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=R(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var n=(0,t[r])(e);if(void 0!==n){if("function"!=typeof n)throw new TypeError("Finishers must return a constructor.");e=n}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function M(e){var t,r=P(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var n={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(n.decorators=e.decorators),"field"===e.kind&&(n.initializer=e.value),n}function O(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function k(e){return e.decorators&&e.decorators.length}function T(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function R(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}var A=function(e,t,r,n){var o=x();if(n)for(var i=0;i<n.length;i++)o=n[i](o);var a=t((function(e){o.initializeInstanceElements(e,u.elements)}),r),u=o.decorateClass(function(e){for(var t=[],r=function(e){return"method"===e.kind&&e.key===i.key&&e.placement===i.placement},n=0;n<e.length;n++){var o,i=e[n];if("method"===i.kind&&(o=t.find(r)))if(T(i.descriptor)||T(o.descriptor)){if(k(i)||k(o))throw new ReferenceError("Duplicated methods ("+i.key+") can't be decorated.");o.descriptor=i.descriptor}else{if(k(i)){if(k(o))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+i.key+").");o.decorators=i.decorators}O(i,o)}else t.push(i)}return t}(a.d.map(M)),e);return o.initializeClassElements(a.F,u.elements),o.runClassFinishers(a.F,u.finishers)},j=c((function(e,t){t.__esModule=!0,t.client=t.isServerEnv=t.env=void 0;var r="object"==typeof window&&window.window||"object"==typeof u&&u.global||u;t.env=r;var n="undefined"==typeof window&&"object"==typeof u&&u.global===u;t.isServerEnv=n;var o=n?void 0:r;t.client=o})),D=c((function(e,t){t.__esModule=!0,t.isPlainObject=l,t.deepMerge=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];l(e)||(e={});if(r.length<1)return e;return r.forEach((function(t,n){if(l(t)){var o=!1,i=null;n===r.length-1?o=!0:n===r.length-2&&(i=r[n+1]),Object.keys(t).forEach((function(r){var n=e[r],a=t[r];l(a)?l(n)?e[r]=d(o,n,a):e[r]=o||i&&!i[r]?a:d(o,{},a):e[r]=a}))}})),e},t.TaskCounter=t.PDispatcher=t.PEvent=t.LoadingState=t.TaskCountEvent=void 0;var r,n=s(h),o=s(v),i=s(p),a="TaskCountEvent";t.TaskCountEvent=a,t.LoadingState=r,function(e){e.Start="Start",e.Stop="Stop",e.Depth="Depth"}(r||(t.LoadingState=r={}));var u=function(){function e(e,t,r){void 0===r&&(r=!1),this.name=e,this.data=t,this.bubbling=r,(0,i.default)(this,"target",null),(0,i.default)(this,"currentTarget",null)}var t=e.prototype;return t.setTarget=function(e){this.target=e},t.setCurrentTarget=function(e){this.currentTarget=e},e}();t.PEvent=u;var c=function(){function e(e){this.parent=e,(0,i.default)(this,"storeHandlers",{})}var t=e.prototype;return t.addListener=function(e,t){var r=this.storeHandlers[e];return r||(this.storeHandlers[e]=r=[]),r.push(t),this},t.removeListener=function(e,t){var r=this;if(e){var n=this.storeHandlers;if(n.propertyIsEnumerable(e)){var o=n[e];if(t){var i=o.indexOf(t);i>-1&&o.splice(i,1),0===o.length&&delete n[e]}else delete n[e]}}else Object.keys(this.storeHandlers).forEach((function(e){delete r.storeHandlers[e]}));return this},t.dispatch=function(e){e.target||e.setTarget(this),e.setCurrentTarget(this);var t=this.storeHandlers[e.name];if(t)for(var r=0,n=t.length;r<n;r++)t[r](e);return this.parent&&e.bubbling&&this.parent.dispatch(e),this},t.setParent=function(e){return this.parent=e,this},e}();t.PDispatcher=c;var f=function(e){function t(t){var r;return(r=e.call(this)||this).deferSecond=t,(0,i.default)((0,n.default)(r),"list",[]),(0,i.default)((0,n.default)(r),"ctimer",null),r}(0,o.default)(t,e);var c=t.prototype;return c.addItem=function(e,t){var n=this;return void 0===t&&(t=""),this.list.some((function(t){return t.promise===e}))||(this.list.push({promise:e,note:t}),e.then((function(){return n.completeItem(e)}),(function(){return n.completeItem(e)})),1===this.list.length&&(this.dispatch(new u(a,r.Start)),this.ctimer=j.env.setTimeout((function(){n.ctimer=null,n.list.length>0&&n.dispatch(new u(a,r.Depth))}),1e3*this.deferSecond))),e},c.completeItem=function(e){var t=this.list.findIndex((function(t){return t.promise===e}));return t>-1&&(this.list.splice(t,1),0===this.list.length&&(this.ctimer&&(j.env.clearTimeout.call(null,this.ctimer),this.ctimer=null),this.dispatch(new u(a,r.Stop)))),this},t}(c);function l(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function d(e,t,r){return Object.keys(r).forEach((function(n){var o=t[n],i=r[n];l(i)?l(o)?t[n]=d(e,o,i):t[n]=e?i:d(e,{},i):t[n]=i})),t}t.TaskCounter=f})),N=c((function(e,t){t.__esModule=!0,t.setConfig=function(e){void 0!==e.NSP&&(r.NSP=e.NSP),void 0!==e.MSP&&(r.MSP=e.MSP),void 0!==e.SSRKey&&(r.SSRKey=e.SSRKey),void 0!==e.MutableData&&(r.MutableData=e.MutableData),void 0!==e.DEVTOOLS&&(r.DEVTOOLS=e.DEVTOOLS)},t.warn=function(e){},t.deepMergeState=function(e){void 0===e&&(e={});for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(r.MutableData)return D.deepMerge.apply(void 0,[e].concat(n));return D.deepMerge.apply(void 0,[{},e].concat(n))},t.mergeState=function(e){void 0===e&&(e={});for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(r.MutableData)return Object.assign.apply(Object,[e].concat(n));return Object.assign.apply(Object,[{},e].concat(n))},t.snapshotState=function(e){if(r.MutableData)return JSON.parse(JSON.stringify(e));return e},t.getAppModuleName=function(){return o.appModuleName},t.setLoadingDepthTime=function(e){a=e},t.setLoading=u,t.reducer=function(e,t,r){t||r||(t=e.key,r=e.descriptor);var n=r.value;return n.__actionName__=t,n.__isReducer__=!0,r.enumerable=!0,e.descriptor===r?e:r},t.effect=function(e,t){void 0===e&&(e="global",t=o.appModuleName||"");return function(r,n,i){n||i||(n=r.key,i=r.descriptor);var a=i.value;if(a.__actionName__=n,a.__isEffect__=!0,i.enumerable=!0,e){a.__decorators__||(a.__decorators__=[]),a.__decorators__.push([function(r,n,i){j.isServerEnv||(""===t?t=o.appModuleName:t||(t=n),u(i,t,e))},null])}return r.descriptor===i?r:i}},t.logger=function(e,t){return function(r,n,o){n||o||(n=r.key,o=r.descriptor);var i=o.value;i.__decorators__||(i.__decorators__=[]),i.__decorators__.push([e,t])}},t.delayPromise=function(e){return function(t,r,n){r||n||(r=t.key,n=t.descriptor);var o=n.value;n.value=function(){for(var r=new Promise((function(t){j.env.setTimeout((function(){t(!0)}),1e3*e)})),n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return Promise.all([r,o.apply(t,i)]).then((function(e){return e[1]}))}}},t.isPromise=function(e){return"object"==typeof e&&"function"==typeof e.then},t.isServer=function(){return j.isServerEnv},t.serverSide=function(e){if(j.isServerEnv)return e();return},t.MetaData=t.ActionTypes=t.config=void 0;var r={NSP:".",MSP:",",SSRKey:"meduxInitStore",MutableData:!1,DEVTOOLS:!1};t.config=r;var n={MLoading:"Loading",MInit:"Init",Error:"medux"+r.NSP+"Error"};t.ActionTypes=n;var o={appViewName:null,facadeMap:null,clientStore:null,appModuleName:null,moduleGetter:null};t.MetaData=o;var i={},a=2;function u(e,t,u){if(void 0===t&&(t=o.appModuleName),void 0===u&&(u="global"),j.isServerEnv)return e;var c=t+r.NSP+u;return i[c]||(i[c]=new D.TaskCounter(a),i[c].addListener(D.TaskCountEvent,(function(e){var r=o.clientStore;if(r){var i,a=(0,o.facadeMap[t].actions[n.MLoading])(((i={})[u]=e.data,i));r.dispatch(a)}}))),i[c].addItem(e),e}})),C=c((function(e,t){t.__esModule=!0,t.errorAction=function(e){return{type:N.ActionTypes.Error,payload:[e]}},t.moduleInitAction=function(e,t){return{type:""+e+N.config.NSP+N.ActionTypes.MInit,payload:[t]}}})),L=c((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,r=e.Symbol;"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable";return t}})),H=c((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n,o=(r=L)&&r.__esModule?r:{default:r};n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==u?u:e;var i=(0,o.default)(n);t.default=i})),I=c((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=H)&&"object"==typeof r&&"default"in r?r.default:r,o=function(){return Math.random().toString(36).substring(7).split("").join(".")},i={INIT:"@@redux/INIT"+o(),REPLACE:"@@redux/REPLACE"+o(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+o()}};function a(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function u(e,t){var r=t&&t.type;return"Given "+(r&&'action "'+String(r)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function c(e,t){return function(){return t(e.apply(this,arguments))}}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(r,!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}t.__DO_NOT_USE__ActionTypes=i,t.applyMiddleware=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},o={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},i=t.map((function(e){return e(o)}));return l({},r,{dispatch:n=d.apply(void 0,i)(r.dispatch)})}}},t.bindActionCreators=function(e,t){if("function"==typeof e)return c(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var r={};for(var n in e){var o=e[n];"function"==typeof o&&(r[n]=c(o,t))}return r},t.combineReducers=function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var o=t[n];"function"==typeof e[o]&&(r[o]=e[o])}var a,c=Object.keys(r);try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if(void 0===r(void 0,{type:i.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===r(void 0,{type:i.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+i.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(r)}catch(e){a=e}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var n=!1,o={},i=0;i<c.length;i++){var s=c[i],f=r[s],l=e[s],d=f(l,t);if(void 0===d){var p=u(s,t);throw new Error(p)}o[s]=d,n=n||d!==l}return(n=n||c.length!==Object.keys(e).length)?o:e}},t.compose=d,t.createStore=function e(t,r,o){var u;if("function"==typeof r&&"function"==typeof o||"function"==typeof o&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof r&&void 0===o&&(o=r,r=void 0),void 0!==o){if("function"!=typeof o)throw new Error("Expected the enhancer to be a function.");return o(e)(t,r)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var c=t,s=r,f=[],l=f,d=!1;function p(){l===f&&(l=f.slice())}function h(){if(d)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return s}function v(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(d)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return p(),l.push(e),function(){if(t){if(d)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,p();var r=l.indexOf(e);l.splice(r,1),f=null}}}function m(e){if(!a(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(d)throw new Error("Reducers may not dispatch actions.");try{d=!0,s=c(s,e)}finally{d=!1}for(var t=f=l,r=0;r<t.length;r++){(0,t[r])()}return e}function y(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");c=e,m({type:i.REPLACE})}function g(){var e,t=v;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function r(){e.next&&e.next(h())}return r(),{unsubscribe:t(r)}}})[n]=function(){return this},e}return m({type:i.INIT}),(u={dispatch:m,subscribe:v,getState:h,replaceReducer:y})[n]=g,u}})),U=c((function(e,t){function r(e){var t=e.default.moduleName,r=N.MetaData.moduleGetter,n=r[t];return n.__module__===e||((n=function(){return e}).__module__=e,r[t]=n),n}function n(e,t,r,n){if(n[e]||(n[e]={}),n[e][r])throw new Error("Action duplicate or conflict : "+e+".");n[e][r]=t}function o(e,t,r){for(var o in r)"function"==typeof r[o]&&function(){var i,a,u,c=r[o];(c.__isReducer__||c.__isEffect__)&&(a=r,u=(i=c).bind(a),Object.keys(i).forEach((function(e){u[e]=i[e]})),c=u,o.split(N.config.MSP).forEach((function(r){(r=r.trim().replace(new RegExp("^this["+N.config.NSP+"]"),""+t+N.config.NSP)).split(N.config.NSP)[1]?(c.__isHandler__=!0,n(r,c,t,c.__isEffect__?e._medux_.effectMap:e._medux_.reducerMap)):(c.__isHandler__=!1,n(t+N.config.NSP+r,c,t,c.__isEffect__?e._medux_.effectMap:e._medux_.reducerMap))})))}()}function i(e,t){if(!!!t._medux_.injectedModules[e]){var n=N.MetaData.moduleGetter[e]();return(0,N.isPromise)(n)?n.then((function(e){return r(e),e.default.model(t)})):(r(n),n.default.model(t))}}t.__esModule=!0,t.cacheModule=r,t.getClientStore=function(){return N.MetaData.clientStore},t.injectActions=o,t.loadModel=i,t.getView=function(e,t){var n=N.MetaData.moduleGetter[e]();if((0,N.isPromise)(n))return n.then((function(e){r(e);var n=e.default.views[t];if(j.isServerEnv)return n;var o=e.default.model(N.MetaData.clientStore);return(0,N.isPromise)(o)?o.then((function(){return n})):n}));r(n);var o=n.default.views[t];if(j.isServerEnv)return o;var i=n.default.model(N.MetaData.clientStore);if((0,N.isPromise)(i))return i.then((function(){return o}));return o},t.getModuleByName=function(e,t){var n=t[e]();if((0,N.isPromise)(n))return n.then((function(e){return r(e),e}));return r(n),n},t.exportModule=t.CoreModuleHandlers=void 0;var a=(0,s(A).default)(null,(function(e){return{F:function(t){this.initState=t,e(this)},d:[{kind:"field",key:"actions",value:function(){return null}},{kind:"field",key:"store",value:function(){return null}},{kind:"field",key:"moduleName",value:function(){return""}},{kind:"get",key:"state",value:function(){return this.store._medux_.realtimeState[this.moduleName]}},{kind:"get",key:"rootState",value:function(){return this.store._medux_.realtimeState}},{kind:"method",key:"dispatch",value:function(e){return this.store.dispatch(e)}},{kind:"method",key:"loadModel",value:function(e){return i(e,this.store)}},{kind:"method",decorators:[N.reducer],key:"Init",value:function(e){return e}},{kind:"method",decorators:[N.reducer],key:"Update",value:function(e,t){return(0,N.mergeState)(this.state,e)}},{kind:"method",decorators:[N.reducer],key:"Loading",value:function(e){var t=(0,N.mergeState)(this.state.loading,e);return(0,N.mergeState)(this.state,{loading:t})}}]}}));t.CoreModuleHandlers=a;t.exportModule=function(e,t,r){return{moduleName:e,model:function(r){if(!r._medux_.injectedModules[e]){r._medux_.injectedModules[e]=!0;var n=new t;n.moduleName=e,n.store=r,n.actions=N.MetaData.facadeMap[e].actions;var i=n.initState;o(r,e,n);var a=r.getState()[e]||{},u=Object.assign({},i,a);if(!u.initialized)return u.initialized=!0,r.dispatch((0,C.moduleInitAction)(e,u))}},views:r,initState:void 0,actions:void 0}}})),F=c((function(e,t){function r(e){return Array.isArray(e.payload)?e.payload:[]}function n(e){if("object"==typeof e&&void 0!==e.meduxProcessed)return!!e.meduxProcessed}t.__esModule=!0,t.getActionData=r,t.buildStore=function(e,t,o,i){void 0===e&&(e={});void 0===t&&(t={});void 0===o&&(o=[]);void 0===i&&(i=[]);N.MetaData.clientStore&&N.MetaData.clientStore.destroy();var a,u=function(e,n){if(!a)return e;var o=a._medux_,i=o.currentState,u=o.realtimeState;Object.keys(t).forEach((function(r){var o=t[r](e[r],n);N.config.MutableData&&u[r]&&u[r]!==o&&(0,N.warn)("Use rewrite instead of replace to update state in MutableData"),u[r]=o}));var c=o.reducerMap[n.type]||{},s=o.reducerMap[n.type.replace(new RegExp("[^"+N.config.NSP+"]+"),"*")]||{},f=Object.assign({},c,s),l=Object.keys(f);if(l.length>0){var d=[],p=n.priority?[].concat(n.priority):[];l.forEach((function(e){var t=f[e];e===N.MetaData.appModuleName?d.unshift(e):d.push(e),t.__isHandler__||p.unshift(e)})),d.unshift.apply(d,p);var h={};d.forEach((function(e){if(!h[e]){h[e]=!0;var t=f[e].apply(void 0,r(n).concat([i]));N.config.MutableData&&u[e]&&u[e]!==t&&(0,N.warn)("Use rewrite instead of replace to update state in MutableData"),u[e]=t}}))}return u},c=[I.applyMiddleware.apply(void 0,[function(){return function(e){return function(t){var r=t.type.split(N.config.NSP),n=r[0],o=r[1];if(n&&o&&N.MetaData.moduleGetter[n]&&!a._medux_.injectedModules[n]){if(o===N.ActionTypes.MInit)return(0,U.loadModel)(n,a);var i=(0,U.loadModel)(n,a);if((0,N.isPromise)(i))return i.then((function(){return e(t)}))}return e(t)}}}].concat(o,[function(e){var t=e.dispatch;return function(e){return function(o){if(j.isServerEnv&&o.type.split(N.config.NSP)[1]===N.ActionTypes.MLoading)return o;var i=a._medux_,u=a.getState();i.realtimeState=(0,N.mergeState)(u),i.currentState=(0,N.snapshotState)(u);var c=i.currentState,s=e(o),f=i.effectMap[s.type]||{},l=i.effectMap[s.type.replace(new RegExp("[^"+N.config.NSP+"]+"),"*")]||{},d=Object.assign({},f,l),p=Object.keys(d);if(p.length>0){var h=[],v=s.priority?[].concat(s.priority):[];p.forEach((function(e){var t=d[e];e===N.MetaData.appModuleName?h.unshift(e):h.push(e),t.__isHandler__||v.unshift(e)})),h.unshift.apply(h,v);var m={},y=[];if(h.forEach((function(e){if(!m[e]){m[e]=!0;var o=d[e],i=o.apply(void 0,r(s).concat([c])),a=o.__decorators__;if(a){var u=[];a.forEach((function(t,r){u[r]=t[0](s,e,i)})),o.__decoratorResults__=u}var f=i.then((function(e){if(a){var t=o.__decoratorResults__||[];a.forEach((function(r,n){r[1]&&r[1]("Resolved",t[n],e)})),o.__decoratorResults__=void 0}return e}),(function(e){if(a){var r=o.__decoratorResults__||[];a.forEach((function(t,n){t[1]&&t[1]("Rejected",r[n],e)})),o.__decoratorResults__=void 0}if(s.type===N.ActionTypes.Error)throw void 0===n(e)&&(e=function(e,t){return"object"==typeof e?(e.meduxProcessed=t,e):{meduxProcessed:t,error:e}}(e,!0)),e;if(n(e))throw e;return t((0,C.errorAction)(e))}));y.push(f)}})),y.length)return Promise.all(y)}return s}}}])),function(e){return function(){var t=e.apply(void 0,arguments),r=t;return r._medux_={realtimeState:{},currentState:{},reducerMap:{},effectMap:{},injectedModules:{}},t}}].concat(i);N.config.DEVTOOLS&&j.client&&j.client.__REDUX_DEVTOOLS_EXTENSION__&&c.push(j.client.__REDUX_DEVTOOLS_EXTENSION__(j.client.__REDUX_DEVTOOLS_EXTENSION__OPTIONS));(a=(0,I.createStore)(u,e,I.compose.apply(void 0,c))).destroy=function(){},j.isServerEnv||(N.MetaData.clientStore=a);return a}})),B=c((function(e,t){t.__esModule=!0,t.getRootModuleAPI=function(e){if(!N.MetaData.facadeMap)if(e)N.MetaData.facadeMap=Object.keys(e).reduce((function(t,r){var n=e[r],o={},i={};n.forEach((function(e){o[e]=function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return{type:r+N.config.NSP+e,payload:n}},i[e]=r+N.config.NSP+e}));var a={name:r,actions:o,actionNames:i};return t[r]=a,t}),{});else{var t={};N.MetaData.facadeMap=new Proxy({},{set:function(e,t,r,n){return Reflect.set(e,t,r,n)},get:function(e,r,n){var o=Reflect.get(e,r,n);return void 0!==o?o:(t[r]||(t[r]={name:r,actionNames:new Proxy({},{get:function(e,t){return r+N.config.NSP+t}}),actions:new Proxy({},{get:function(e,t){return function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return{type:r+N.config.NSP+t,payload:n}}}})}),t[r])}})}return N.MetaData.facadeMap},t.modelHotReplacement=function(e,t){var r=N.MetaData.clientStore;if(r._medux_.injectedModules[e]){o(e,r._medux_.reducerMap),o(e,r._medux_.effectMap);var n=new t;n.moduleName=e,n.store=r,n.actions=N.MetaData.facadeMap[e].actions,(0,U.injectActions)(r,e,n),j.env.console.log("[HMR] @medux Updated model: "+e)}},t.viewHotReplacement=function(e,t){var r=N.MetaData.moduleGetter[e]();if(!r)throw"views cannot apply update for HMR.";r.default.views=t,j.env.console.warn("[HMR] @medux Updated views: "+e),u=N.MetaData.moduleGetter[N.MetaData.appModuleName]().default.views[N.MetaData.appViewName],a||(a=j.env.setTimeout((function(){a=0,i(u),j.env.console.warn("[HMR] @medux view re rendering")}),0))},t.renderApp=function(e,t,r,n,o,i){return c.apply(this,arguments)},t.renderSSR=function(e,t,r,n,o,i){return p.apply(this,arguments)};var r=s(f),n=s(d);function o(e,t){for(var r in t){if(t.hasOwnProperty(r))delete t[r][e]}}var i=function(){},a=0,u=null;function c(){return(c=(0,n.default)(r.default.mark((function e(t,n,o,u,c,s){var f,l,d,p,h,v,m;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===c&&(c={}),a&&(j.env.clearTimeout.call(null,a),a=0),f="string"==typeof o?o:o.default.moduleName,N.MetaData.appModuleName=f,N.MetaData.appViewName=u,N.MetaData.moduleGetter=n,"string"!=typeof o&&(0,U.cacheModule)(o),l=N.config.SSRKey,d=c.initData||{},j.client[l]&&(d=Object.assign({},d,j.client[l])),p=(0,F.buildStore)(d,c.reducers,c.middlewares,c.enhancers),(h=s(p).filter((function(e){return e!==f}))).unshift(f),e.next=15,Promise.all(h.map((function(e){if(n[e])return(0,U.getModuleByName)(e,n)})));case 15:return v=e.sent,m=v[0],e.next=19,m.default.model(p);case 19:return i=t(p,m.default.model,m.default.views[u],l),e.abrupt("return",{store:p});case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var l=function(){};function p(){return(p=(0,n.default)(r.default.mark((function e(t,n,o,i,a,u){var c,s,f,d,p;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a={}),N.MetaData.appModuleName=o,N.MetaData.appViewName=i,N.MetaData.moduleGetter=n,c=N.config.SSRKey,s=(0,F.buildStore)(a.initData,a.reducers,a.middlewares,a.enhancers),(f=u(s).filter((function(e){return e!==o}))).unshift(o),e.next=10,Promise.all(f.map((function(e){return n[e]?(0,U.getModuleByName)(e,n):null})));case 10:return d=e.sent,p=d[0],e.next=14,Promise.all(d.map((function(e){return e&&e.default.model(s)})));case 14:return s.dispatch=l,e.abrupt("return",t(s,p.default.model,p.default.views[i],c));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}})),K=c((function(e,t){t.__esModule=!0,t.isServerEnv=t.client=t.env=t.viewHotReplacement=t.modelHotReplacement=t.renderSSR=t.renderApp=t.getRootModuleAPI=t.deepMerge=t.LoadingState=t.getView=t.exportModule=t.getClientStore=t.loadModel=t.cacheModule=t.CoreModuleHandlers=t.getActionData=t.getAppModuleName=t.isPromise=t.serverSide=t.isServer=t.setLoadingDepthTime=t.setLoading=t.delayPromise=t.setConfig=t.mergeState=t.deepMergeState=t.logger=t.effect=t.config=t.reducer=t.ActionTypes=t.errorAction=void 0,t.errorAction=C.errorAction,t.ActionTypes=N.ActionTypes,t.reducer=N.reducer,t.config=N.config,t.effect=N.effect,t.logger=N.logger,t.deepMergeState=N.deepMergeState,t.mergeState=N.mergeState,t.setConfig=N.setConfig,t.delayPromise=N.delayPromise,t.setLoading=N.setLoading,t.setLoadingDepthTime=N.setLoadingDepthTime,t.isServer=N.isServer,t.serverSide=N.serverSide,t.isPromise=N.isPromise,t.getAppModuleName=N.getAppModuleName,t.getActionData=F.getActionData,t.CoreModuleHandlers=U.CoreModuleHandlers,t.cacheModule=U.cacheModule,t.loadModel=U.loadModel,t.getClientStore=U.getClientStore,t.exportModule=U.exportModule,t.getView=U.getView,t.LoadingState=D.LoadingState,t.deepMerge=D.deepMerge,t.getRootModuleAPI=B.getRootModuleAPI,t.renderApp=B.renderApp,t.renderSSR=B.renderSSR,t.modelHotReplacement=B.modelHotReplacement,t.viewHotReplacement=B.viewHotReplacement,t.env=j.env,t.client=j.client,t.isServerEnv=j.isServerEnv})),V=c((function(e,t){t.__esModule=!0,t.setRouteConfig=function(e){void 0!==e.RSP&&(r.RSP=e.RSP),e.historyMax&&(r.historyMax=e.historyMax),e.homeUri&&(r.homeUri=e.homeUri)},t.extractNativeLocation=function(e){var t=Object.assign({},e);return["tag","params","action","key","history","stack"].forEach((function(e){delete t[e]})),t},t.locationToUri=n,t.uriToLocation=function(e){var t=o(e),r=t[0],n=t[1],i=t[2],a={tag:n,params:JSON.parse(i)};return{key:r,location:a}},t.buildHistoryStack=function(e,t,i,a){var u=r.historyMax,c=e.tag,s=n(e,i),f=a.history,l=a.stack,d=[].concat(f),p=[].concat(l);if("RELAUNCH"===t)d=[s],p=[s];else if("PUSH"===t)d.unshift(s),d.length>u&&(d.length=u),o(p[0],"tag")!==c?(p.unshift(s),p.length>u&&(p.length=u)):p[0]=s;else if("REPLACE"===t)d[0]=s,p[0]=s,c===o(p[1],"tag")&&p.splice(1,1),p.length>u&&(p.length=u);else if(t.startsWith("POP")){var h=parseInt(t.replace("POP",""),10)||1;if(h>1e3)d=[],p.splice(0,h-1e3);else{var v=d.splice(0,h+1,s).reduce((function(e,t){var r=o(t,"tag");return e[e.length-1]!==r&&e.push(r),e}),[]);v[v.length-1]===o(d[1],"tag")&&v.pop(),p.splice(0,v.length,s),c===o(p[1],"tag")&&p.splice(1,1)}}return{history:d,stack:p}},t.routeConfig=void 0;var r={RSP:"|",historyMax:10,homeUri:"|home|{app:{}}"};function n(e,t){return[t,e.tag,JSON.stringify(e.params)].join(r.RSP)}function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=t[0],i=t[1],a=o.split(r.RSP,3),u={key:0,tag:1,query:2};return i?a[u[i]]:a}t.routeConfig=r})),G=c((function(e,t){function r(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function n(e,t){var o={};return Object.keys(t).forEach((function(i){if(e.hasOwnProperty(i)){var a=e[i],u=t[i];r(a)&&r(u)&&a!==u?o[i]=n(a,u):o[i]=a}else o[i]=t[i]})),o}function o(e,t){var n={},i=!1;if(Object.keys(e).forEach((function(a){var u=e[a],c=t[a];u!==c&&(typeof u==typeof c&&r(u)&&(u=o(u,c)),void 0!==u&&(i=!0,n[a]=u))})),i)return n}function i(e){var t,n,o=Object.keys(e);return 0===o.length?[void 0,void 0]:(o.forEach((function(o){var a=e[o];if(o.startsWith("_"))n||(n={}),n[o]=a;else if(r(a)){var u=i(a),c=u[0],s=u[1];c&&(t||(t={}),t[o]=c),s&&(n||(n={}),n[o]=s)}else t||(t={}),t[o]=a})),[t,n])}t.__esModule=!0,t.isPlainObject=r,t.extendDefault=function(e,t){r(e)||(e={});r(t)||(t={});return n(e,t)},t.excludeDefault=function(e,t,n){if(!r(e))return{};if(!r(t))return e;var i=o(e,t);if(n){var a={};return Object.keys(e).forEach((function(e){a[e]=i&&void 0!==i[e]?i[e]:{}})),a}return i||{}},t.splitPrivate=function(e,t){if(!r(e))return[void 0,void 0];var n=Object.keys(e);if(0===n.length)return[void 0,void 0];var o=i(e),a=o[0],u=o[1];return n.forEach((function(e){t[e]||(a||(a={}),a[e]||(a[e]={}))})),[a,u]}})),W=c((function(e,t){function r(e,t){void 0===t&&(t={});for(var r=function(e){for(var t=[],r=0;r<e.length;){var n=e[r];if("*"!==n&&"+"!==n&&"?"!==n)if("\\"!==n)if("{"!==n)if("}"!==n)if(":"!==n)if("("!==n)t.push({type:"CHAR",index:r,value:e[r++]});else{var o=1,i="";if("?"===e[u=r+1])throw new TypeError('Pattern cannot start with "?" at '+u);for(;u<e.length;)if("\\"!==e[u]){if(")"===e[u]){if(0==--o){u++;break}}else if("("===e[u]&&(o++,"?"!==e[u+1]))throw new TypeError("Capturing groups are not allowed at "+u);i+=e[u++]}else i+=e[u++]+e[u++];if(o)throw new TypeError("Unbalanced pattern at "+r);if(!i)throw new TypeError("Missing pattern at "+r);t.push({type:"PATTERN",index:r,value:i}),r=u}else{for(var a="",u=r+1;u<e.length;){var c=e.charCodeAt(u);if(!(c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||95===c))break;a+=e[u++]}if(!a)throw new TypeError("Missing parameter name at "+r);t.push({type:"NAME",index:r,value:a}),r=u}else t.push({type:"CLOSE",index:r,value:e[r++]});else t.push({type:"OPEN",index:r,value:e[r++]});else t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});else t.push({type:"MODIFIER",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),n=t.prefixes,o=void 0===n?"./":n,a="[^"+i(t.delimiter||"/#?")+"]+?",u=[],c=0,s=0,f="",l=function(e){if(s<r.length&&r[s].type===e)return r[s++].value},d=function(e){var t=l(e);if(void 0!==t)return t;var n=r[s],o=n.type,i=n.index;throw new TypeError("Unexpected "+o+" at "+i+", expected "+e)},p=function(){for(var e,t="";e=l("CHAR")||l("ESCAPED_CHAR");)t+=e;return t};s<r.length;){var h=l("CHAR"),v=l("NAME"),m=l("PATTERN");if(v||m){var y=h||"";-1===o.indexOf(y)&&(f+=y,y=""),f&&(u.push(f),f=""),u.push({name:v||c++,prefix:y,suffix:"",pattern:m||a,modifier:l("MODIFIER")||""})}else{var g=h||l("ESCAPED_CHAR");if(g)f+=g;else if(f&&(u.push(f),f=""),l("OPEN")){y=p();var w=l("NAME")||"",b=l("PATTERN")||"",S=p();d("CLOSE"),u.push({name:w||(b?c++:""),pattern:w&&!b?a:b,prefix:y,suffix:S,modifier:l("MODIFIER")||""})}else d("END")}}return u}function n(e,t){void 0===t&&(t={});var r=a(t),n=t.encode,o=void 0===n?function(e){return e}:n,i=t.validate,u=void 0===i||i,c=e.map((function(e){if("object"==typeof e)return new RegExp("^(?:"+e.pattern+")$",r)}));return function(t){for(var r="",n=0;n<e.length;n++){var i=e[n];if("string"!=typeof i){var a=t?t[i.name]:void 0,s="?"===i.modifier||"*"===i.modifier,f="*"===i.modifier||"+"===i.modifier;if(Array.isArray(a)){if(!f)throw new TypeError('Expected "'+i.name+'" to not repeat, but got an array');if(0===a.length){if(s)continue;throw new TypeError('Expected "'+i.name+'" to not be empty')}for(var l=0;l<a.length;l++){var d=o(a[l],i);if(u&&!c[n].test(d))throw new TypeError('Expected all "'+i.name+'" to match "'+i.pattern+'", but got "'+d+'"');r+=i.prefix+d+i.suffix}}else if("string"!=typeof a&&"number"!=typeof a){if(!s){var p=f?"an array":"a string";throw new TypeError('Expected "'+i.name+'" to be '+p)}}else{d=o(String(a),i);if(u&&!c[n].test(d))throw new TypeError('Expected "'+i.name+'" to match "'+i.pattern+'", but got "'+d+'"');r+=i.prefix+d+i.suffix}}else r+=i}return r}}function o(e,t,r){void 0===r&&(r={});var n=r.decode,o=void 0===n?function(e){return e}:n;return function(r){var n=e.exec(r);if(!n)return!1;for(var i=n[0],a=n.index,u=Object.create(null),c=function(e){if(void 0===n[e])return"continue";var r=t[e-1];"*"===r.modifier||"+"===r.modifier?u[r.name]=n[e].split(r.prefix+r.suffix).map((function(e){return o(e,r)})):u[r.name]=o(n[e],r)},s=1;s<n.length;s++)c(s);return{path:i,index:a,params:u}}}function i(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function a(e){return e&&e.sensitive?"":"i"}function u(e,t,r){void 0===r&&(r={});for(var n=r.strict,o=void 0!==n&&n,u=r.start,c=void 0===u||u,s=r.end,f=void 0===s||s,l=r.encode,d=void 0===l?function(e){return e}:l,p="["+i(r.endsWith||"")+"]|$",h="["+i(r.delimiter||"/#?")+"]",v=c?"^":"",m=0,y=e;m<y.length;m++){var g=y[m];if("string"==typeof g)v+=i(d(g));else{var w=i(d(g.prefix)),b=i(d(g.suffix));if(g.pattern)if(t&&t.push(g),w||b)if("+"===g.modifier||"*"===g.modifier){var S="*"===g.modifier?"?":"";v+="(?:"+w+"((?:"+g.pattern+")(?:"+b+w+"(?:"+g.pattern+"))*)"+b+")"+S}else v+="(?:"+w+"("+g.pattern+")"+b+")"+g.modifier;else v+="("+g.pattern+")"+g.modifier;else v+="(?:"+w+b+")"+g.modifier}}if(f)o||(v+=h+"?"),v+=r.endsWith?"(?="+p+")":"$";else{var _=e[e.length-1],E="string"==typeof _?h.indexOf(_[_.length-1])>-1:void 0===_;o||(v+="(?:"+h+"(?="+p+"))?"),E||(v+="(?="+h+"|"+p+")")}return new RegExp(v,a(r))}function c(e,t,n){return e instanceof RegExp?function(e,t){if(!t)return e;for(var r=/\((?:\?<(.*?)>)?(?!\?)/g,n=0,o=r.exec(e.source);o;)t.push({name:o[1]||n++,prefix:"",suffix:"",modifier:"",pattern:""}),o=r.exec(e.source);return e}(e,t):Array.isArray(e)?function(e,t,r){var n=e.map((function(e){return c(e,t,r).source}));return new RegExp("(?:"+n.join("|")+")",a(r))}(e,t,n):function(e,t,n){return u(r(e,n),t,n)}(e,t,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.pathToRegexp=t.tokensToRegexp=t.regexpToFunction=t.match=t.tokensToFunction=t.compile=t.parse=void 0,t.parse=r,t.compile=function(e,t){return n(r(e,t),t)},t.tokensToFunction=n,t.match=function(e,t){var r=[];return o(c(e,r,t),r,t)},t.regexpToFunction=o,t.tokensToRegexp=u,t.pathToRegexp=c})),z=c((function(e,t){t.__esModule=!0,t.compilePath=n,t.parseRule=o,t.extractPathParams=function e(t,r,n){for(var i in t)if(t.hasOwnProperty(i)){var a=o(i,r);if(a){var u=a.args,c=a.matchPathame,s=a.subPathname,f=t[i](u,n);if("string"!=typeof f)return f&&s?c+e(f,s,n):r;r=f}}return r};var r={};function n(e){if(r[e])return r[e];var t=[],n={regexp:(0,W.pathToRegexp)(e.replace(/\$$/,""),t,{end:e.endsWith("$"),strict:!1,sensitive:!1}),keys:t},o=Object.keys(r);return o.length>1e3&&delete r[o[0]],r[e]=n,n}function o(e,t){var r=n(e),o=r.regexp,i=r.keys,a=o.exec(t);if(!a)return null;var u=a[0],c=a.slice(1);return{args:i.reduce((function(e,t,r){return e[t.name]=c[r],e}),{}),matchPathame:u,subPathname:t.replace(u,"")}}})),$=c((function(e,t){function r(e,t){var r=new RegExp("[?&#]"+t+"=([^&]+)"),n=e.match(r);return n?n[1]:""}function n(e){return btoa?btoa(e):Buffer?Buffer.from(e).toString("base64"):e}function o(e){return atob?atob(e):Buffer?Buffer.from(e,"base64").toString():e}t.__esModule=!0,t.isLocationMap=function(e){if("function"==typeof e.in&&"function"==typeof e.out)return!0;return!1},t.createWebLocationTransform=function(e,t,i,a,u){void 0===i&&(i=!1);void 0===a&&(a=JSON);void 0===u&&(u="");var c={_cache:{},get:function(e){if(this._cache[e]){var t=this._cache[e],r=t.tag,n=t.pathParams;return{tag:r,pathParams:JSON.parse(n)}}},set:function(e,t,r){var n=Object.keys(this._cache);n.length>100&&delete this._cache[n[0]],this._cache[e]={tag:t,pathParams:JSON.stringify(r)}}};return{in:function(n){var s=function(e,t,n,i){var a=t?r(e.search,t):e.search,u=t?r(e.hash,t):e.hash;n&&(a=a&&o(a),u=u&&o(u));var c=("/"+e.pathname).replace(/\/+/g,"/");return{pathname:c.length>1?c.replace(/\/$/,""):c,search:a?i(a):void 0,hash:u?i(u):void 0}}(n,u,i,a.parse),f=s.pathname,l=s.search,d=s.hash,p={tag:f,params:{}};if(t){var h=c.get(f)||{},v=h.pathParams,m=h.tag;m&&v||(v={},m=(0,z.extractPathParams)(t,f,v),c.set(f,m,v)),p.tag=m,p.params=(0,K.deepMerge)(v,l,d)}else p.params=(0,K.deepMerge)(l,d);return p.params=function(e,t){return Object.keys(e).reduce((function(r,n){return t.hasOwnProperty(n)&&(r[n]=(0,G.extendDefault)(e[n],t[n])),r}),{})}(p.params,e),p},out:function(r){var o,s=(0,G.excludeDefault)(r.params,e,!0);if(t){var f=c.get(r.tag)||{},l=f.pathParams,d=f.tag;d&&l||(l={},d=(0,z.extractPathParams)(t,r.tag,l),c.set(r.tag,d,l)),s=(0,G.excludeDefault)(s,l,!1),o=(0,G.splitPrivate)(s,l)}else o=(0,G.splitPrivate)(s,{});return function(e,t,r,o,i,a){var u=t?a(t):"",c=r?a(r):"";i&&(u=u&&n(u),c=c&&n(c));var s=("/"+e).replace(/\/+/g,"/");return{pathname:s.length>1?s.replace(/\/$/,""):s,search:o?o+"="+u:u,hash:o?o+"="+c:c}}(r.tag,o[0],o[1],u,i,a.stringify)}}}})),q=c((function(e,t){t.__esModule=!0,t.beforeRouteChangeAction=m,t.routeParamsAction=y,t.routeChangeAction=g,t.BaseHistoryActions=t.routeReducer=t.routeMiddleware=t.RouteActionTypes=t.RouteModuleHandlers=t.setRouteConfig=t.extractPathParams=t.PathnameRules=t.createWebLocationTransform=void 0;var r=s(f),n=s(d),o=s(p),i=s(h),a=s(v),u=s(A);t.setRouteConfig=V.setRouteConfig,t.createWebLocationTransform=$.createWebLocationTransform,t.PathnameRules=z.PathnameRules,t.extractPathParams=z.extractPathParams;var c=(0,u.default)(null,(function(e,t){return{F:function(t){function r(){for(var r,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=t.call.apply(t,[this].concat(o))||this,e((0,i.default)(r)),r}return(0,a.default)(r,t),r}(t),d:[{kind:"method",decorators:[K.reducer],key:"Init",value:function(e){var t=this.rootState.route.params[this.moduleName];return t?(0,K.deepMergeState)(e,t):e}},{kind:"method",decorators:[K.reducer],key:"RouteParams",value:function(e){return(0,K.deepMergeState)(this.state,e)}}]}}),K.CoreModuleHandlers);t.RouteModuleHandlers=c;var l={MRouteParams:"RouteParams",RouteChange:"medux"+K.config.NSP+"RouteChange",BeforeRouteChange:"medux"+K.config.NSP+"BeforeRouteChange"};function m(e){return{type:l.BeforeRouteChange,payload:[e]}}function y(e,t,r){return{type:""+e+K.config.NSP+l.MRouteParams,payload:[t,r]}}function g(e){return{type:l.RouteChange,payload:[e]}}t.RouteActionTypes=l;t.routeMiddleware=function(e){var t=e.dispatch,r=e.getState;return function(e){return function(n){if(n.type===l.RouteChange){var o=n.payload[0],i=o.params,a=r();Object.keys(i).forEach((function(e){var r,n=i[e];n&&(null!==(r=a[e])&&void 0!==r&&r.initialized&&t(y(e,n,o.action)))}))}return e(n)}}};t.routeReducer=function(e,t){return t.type===l.RouteChange?(0,K.mergeState)(e,t.payload[0]):e};var w=function(){function e(e,t){this.nativeHistory=e,this.locationTransform=t,(0,o.default)(this,"_tid",0),(0,o.default)(this,"_routeState",void 0),(0,o.default)(this,"_startupUri",void 0),(0,o.default)(this,"store",void 0);var r=this.locationTransform.in(e.getLocation()),n=this._createKey(),i=this.locationToRouteState(r,"RELAUNCH",n);this._routeState=i,this._startupUri=(0,V.locationToUri)(r,n);var a=(0,V.extractNativeLocation)(i);e.relaunch(a,n)}var t,i=e.prototype;return i.getRouteState=function(){return this._routeState},i.setStore=function(e){this.store=e},i.getCurKey=function(){return this._routeState.key},i._createKey=function(){return this._tid++,""+this._tid},i.findHistoryByKey=function(e){return this._routeState.history.findIndex((function(t){return t.startsWith(""+e+V.routeConfig.RSP)}))},i.payloadToLocation=function(e){if("string"==typeof e){var t=this.nativeHistory.parseUrl(e);return this.locationTransform.in(t)}var r=e.tag,n=!0===e.extendParams?this._routeState.params:e.extendParams,o=n&&e.params?(0,K.deepMerge)({},n,e.params):e.params;return{tag:r||this._routeState.tag||"/",params:o}},i.locationToUrl=function(e){var t=e.tag,r=!0===e.extendParams?this._routeState.params:e.extendParams,n=r&&e.params?(0,K.deepMerge)({},r,e.params):e.params,o=this.locationTransform.out({tag:t||this._routeState.tag||"/",params:n});return this.nativeHistory.toUrl(o)},i.locationToRouteState=function(e,t,r){var n=(0,V.buildHistoryStack)(e,t,r,this._routeState||{history:[],stack:[]}),o=n.history,i=n.stack,a=this.locationTransform.out(e);return Object.assign({},e,{action:t,key:r,history:o,stack:i},a)},i.dispatch=(t=(0,n.default)(r.default.mark((function e(t,n,o,i){var a,u;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===o&&(o=""),o=o||this._createKey(),a=this.locationToRouteState(t,n,o),e.next=5,this.store.dispatch(m(a));case 5:return this._routeState=a,e.next=8,this.store.dispatch(g(a));case 8:return i&&(u=(0,V.extractNativeLocation)(a),"number"==typeof i?this.nativeHistory.pop&&this.nativeHistory.pop(u,i,o):this.nativeHistory[i]&&this.nativeHistory[i](u,o)),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)}))),function(e,r,n,o){return t.apply(this,arguments)}),i.relaunch=function(e,t){var r=this.payloadToLocation(e);return this.dispatch(r,"RELAUNCH","",t?"":"relaunch")},i.push=function(e,t){var r=this.payloadToLocation(e);return this.dispatch(r,"PUSH","",t?"":"push")},i.replace=function(e,t){var r=this.payloadToLocation(e);return this.dispatch(r,"REPLACE","",t?"":"replace")},i.pop=function(e,t,r,n){void 0===e&&(e=1),void 0===t&&(t="FIRST"),e=e||1;var o=n?this._routeState.stack[e]:this._routeState.history[e],i=n?1e3+e:e;if(!o)if(i=1e6,"HOME"===t)o=V.routeConfig.homeUri;else{if("FIRST"!==t)return Promise.reject(1);o=this._startupUri}var a=(0,V.uriToLocation)(o),u=a.key,c=a.location;return this.dispatch(c,"POP"+i,u,r?"":i)},i.back=function(e,t,r){return void 0===e&&(e=1),void 0===t&&(t="FIRST"),this.pop(e,t,r,!0)},i.home=function(e,t){return void 0===e&&(e="FIRST"),this.relaunch("HOME"===e?V.routeConfig.homeUri:this._startupUri,t)},e}();t.BaseHistoryActions=w}));function J(e){return"/"===e.charAt(0)}function X(e,t){for(var r=t,n=r+1,o=e.length;n<o;r+=1,n+=1)e[r]=e[n];e.pop()}var Y=function(e,t){void 0===t&&(t="");var r,n=e&&e.split("/")||[],o=t&&t.split("/")||[],i=e&&J(e),a=t&&J(t),u=i||a;if(e&&J(e)?o=n:n.length&&(o.pop(),o=o.concat(n)),!o.length)return"/";if(o.length){var c=o[o.length-1];r="."===c||".."===c||""===c}else r=!1;for(var s=0,f=o.length;0<=f;f--){var l=o[f];"."===l?X(o,f):".."===l?(X(o,f),s++):s&&(X(o,f),s--)}if(!u)for(;s--;s)o.unshift("..");!u||""===o[0]||o[0]&&J(o[0])||o.unshift("");var d=o.join("/");return r&&"/"!==d.substr(-1)&&(d+="/"),d},Q=c((function(e){e.exports=Y}));function Z(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var ee=function e(t,r){if(t===r)return!0;if(null==t||null==r)return!1;if(Array.isArray(t))return Array.isArray(r)&&t.length===r.length&&t.every((function(t,n){return e(t,r[n])}));if("object"!=typeof t&&"object"!=typeof r)return!1;var n=Z(t),o=Z(r);return n!==t||o!==r?e(n,o):Object.keys(Object.assign({},t,r)).every((function(n){return e(t[n],r[n])}))},te=c((function(e){e.exports=ee})),re=c((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){if(!e)throw new Error("Invariant failed")}})),ne=c((function(e,t){function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var n=r(Q),o=r(te),i=r(re);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e){return"/"===e.charAt(0)?e:"/"+e}function c(e){return"/"===e.charAt(0)?e.substr(1):e}function s(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function f(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function l(e){var t=e||"/",r="",n="",o=t.indexOf("#");-1!==o&&(n=t.substr(o),t=t.substr(0,o));var i=t.indexOf("?");return-1!==i&&(r=t.substr(i),t=t.substr(0,i)),{pathname:t,search:"?"===r?"":r,hash:"#"===n?"":n}}function d(e){var t=e.pathname,r=e.search,n=e.hash,o=t||"/";return r&&"?"!==r&&(o+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(o+="#"===n.charAt(0)?n:"#"+n),o}function p(e,t,r,o){var i;"string"==typeof e?(i=l(e)).state=t:(void 0===(i=a({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return r&&(i.key=r),o?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=n(i.pathname,o.pathname)):i.pathname=o.pathname:i.pathname||(i.pathname="/"),i}function h(){var e=null,t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,r,n,o){if(null!=e){var i="function"==typeof e?e(t,r):e;"string"==typeof i?"function"==typeof n?n(i,o):o(!0):o(!1!==i)}else o(!0)},appendListener:function(e){var r=!0;function n(){r&&e.apply(void 0,arguments)}return t.push(n),function(){r=!1,t=t.filter((function(e){return e!==n}))}},notifyListeners:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];t.forEach((function(e){return e.apply(void 0,r)}))}}}var v=!("undefined"==typeof window||!window.document||!window.document.createElement);function m(e,t){t(window.confirm(e))}var y="popstate",g="hashchange";function w(){try{return window.history.state||{}}catch(e){return{}}}var b="hashchange",S={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+c(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:c,decodePath:u},slash:{encodePath:u,decodePath:u}};function _(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function E(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function P(e){window.location.replace(_(window.location.href)+"#"+e)}function x(e,t,r){return Math.min(Math.max(e,t),r)}t.createBrowserHistory=function(e){void 0===e&&(e={}),v||i(!1);var t=window.history,r=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),n=!(-1===window.navigator.userAgent.indexOf("Trident")),o=e,c=o.forceRefresh,l=void 0!==c&&c,b=o.getUserConfirmation,S=void 0===b?m:b,_=o.keyLength,E=void 0===_?6:_,P=e.basename?f(u(e.basename)):"";function x(e){var t=e||{},r=t.key,n=t.state,o=window.location,i=o.pathname+o.search+o.hash;return P&&(i=s(i,P)),p(i,n,r)}function M(){return Math.random().toString(36).substr(2,E)}var O=h();function k(e){a(F,e),F.length=t.length,O.notifyListeners(F.location,F.action)}function T(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||j(x(e.state))}function R(){j(x(w()))}var A=!1;function j(e){A?(A=!1,k()):O.confirmTransitionTo(e,"POP",S,(function(t){t?k({action:"POP",location:e}):function(e){var t=F.location,r=N.indexOf(t.key);-1===r&&(r=0);var n=N.indexOf(e.key);-1===n&&(n=0);var o=r-n;o&&(A=!0,L(o))}(e)}))}var D=x(w()),N=[D.key];function C(e){return P+d(e)}function L(e){t.go(e)}var H=0;function I(e){1===(H+=e)&&1===e?(window.addEventListener(y,T),n&&window.addEventListener(g,R)):0===H&&(window.removeEventListener(y,T),n&&window.removeEventListener(g,R))}var U=!1,F={length:t.length,action:"POP",location:D,createHref:C,push:function(e,n){var o=p(e,n,M(),F.location);O.confirmTransitionTo(o,"PUSH",S,(function(e){if(e){var n=C(o),i=o.key,a=o.state;if(r)if(t.pushState({key:i,state:a},null,n),l)window.location.href=n;else{var u=N.indexOf(F.location.key),c=N.slice(0,u+1);c.push(o.key),N=c,k({action:"PUSH",location:o})}else window.location.href=n}}))},replace:function(e,n){var o="REPLACE",i=p(e,n,M(),F.location);O.confirmTransitionTo(i,o,S,(function(e){if(e){var n=C(i),a=i.key,u=i.state;if(r)if(t.replaceState({key:a,state:u},null,n),l)window.location.replace(n);else{var c=N.indexOf(F.location.key);-1!==c&&(N[c]=i.key),k({action:o,location:i})}else window.location.replace(n)}}))},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(e){void 0===e&&(e=!1);var t=O.setPrompt(e);return U||(I(1),U=!0),function(){return U&&(U=!1,I(-1)),t()}},listen:function(e){var t=O.appendListener(e);return I(1),function(){I(-1),t()}}};return F},t.createHashHistory=function(e){void 0===e&&(e={}),v||i(!1);var t=window.history,r=(window.navigator.userAgent.indexOf("Firefox"),e),n=r.getUserConfirmation,o=void 0===n?m:n,c=r.hashType,l=void 0===c?"slash":c,y=e.basename?f(u(e.basename)):"",g=S[l],w=g.encodePath,x=g.decodePath;function M(){var e=x(E());return y&&(e=s(e,y)),p(e)}var O=h();function k(e){a(F,e),F.length=t.length,O.notifyListeners(F.location,F.action)}var T=!1,R=null;function A(){var e=E(),t=w(e);if(e!==t)P(t);else{var r=M(),n=F.location;if(!T&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(n,r))return;if(R===d(r))return;R=null,function(e){T?(T=!1,k()):O.confirmTransitionTo(e,"POP",o,(function(t){t?k({action:"POP",location:e}):function(e){var t=F.location,r=C.lastIndexOf(d(t));-1===r&&(r=0);var n=C.lastIndexOf(d(e));-1===n&&(n=0);var o=r-n;o&&(T=!0,L(o))}(e)}))}(r)}}var j=E(),D=w(j);j!==D&&P(D);var N=M(),C=[d(N)];function L(e){t.go(e)}var H=0;function I(e){1===(H+=e)&&1===e?window.addEventListener(b,A):0===H&&window.removeEventListener(b,A)}var U=!1,F={length:t.length,action:"POP",location:N,createHref:function(e){var t=document.querySelector("base"),r="";return t&&t.getAttribute("href")&&(r=_(window.location.href)),r+"#"+w(y+d(e))},push:function(e,t){var r=p(e,void 0,void 0,F.location);O.confirmTransitionTo(r,"PUSH",o,(function(e){if(e){var t=d(r),n=w(y+t);if(E()!==n){R=t,function(e){window.location.hash=e}(n);var o=C.lastIndexOf(d(F.location)),i=C.slice(0,o+1);i.push(t),C=i,k({action:"PUSH",location:r})}else k()}}))},replace:function(e,t){var r="REPLACE",n=p(e,void 0,void 0,F.location);O.confirmTransitionTo(n,r,o,(function(e){if(e){var t=d(n),o=w(y+t);E()!==o&&(R=t,P(o));var i=C.indexOf(d(F.location));-1!==i&&(C[i]=t),k({action:r,location:n})}}))},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(e){void 0===e&&(e=!1);var t=O.setPrompt(e);return U||(I(1),U=!0),function(){return U&&(U=!1,I(-1)),t()}},listen:function(e){var t=O.appendListener(e);return I(1),function(){I(-1),t()}}};return F},t.createMemoryHistory=function(e){void 0===e&&(e={});var t=e,r=t.getUserConfirmation,n=t.initialEntries,o=void 0===n?["/"]:n,i=t.initialIndex,u=void 0===i?0:i,c=t.keyLength,s=void 0===c?6:c,f=h();function l(e){a(b,e),b.length=b.entries.length,f.notifyListeners(b.location,b.action)}function v(){return Math.random().toString(36).substr(2,s)}var m=x(u,0,o.length-1),y=o.map((function(e){return p(e,void 0,"string"==typeof e?v():e.key||v())})),g=d;function w(e){var t=x(b.index+e,0,b.entries.length-1),n=b.entries[t];f.confirmTransitionTo(n,"POP",r,(function(e){e?l({action:"POP",location:n,index:t}):l()}))}var b={length:y.length,action:"POP",location:y[m],index:m,entries:y,createHref:g,push:function(e,t){var n=p(e,t,v(),b.location);f.confirmTransitionTo(n,"PUSH",r,(function(e){if(e){var t=b.index+1,r=b.entries.slice(0);r.length>t?r.splice(t,r.length-t,n):r.push(n),l({action:"PUSH",location:n,index:t,entries:r})}}))},replace:function(e,t){var n="REPLACE",o=p(e,t,v(),b.location);f.confirmTransitionTo(o,n,r,(function(e){e&&(b.entries[b.index]=o,l({action:n,location:o}))}))},go:w,goBack:function(){w(-1)},goForward:function(){w(1)},canGo:function(e){var t=b.index+e;return 0<=t&&t<b.entries.length},block:function(e){return void 0===e&&(e=!1),f.setPrompt(e)},listen:function(e){return f.appendListener(e)}};return b},t.createLocation=p,t.locationsAreEqual=function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&o(e.state,t.state)},t.parsePath=l,t.createPath=d})),oe=c((function(e){e.exports=ne})),ie=c((function(e,t){t.__esModule=!0,t.createRouter=function(e,t){var r=new i(e);return new a(r,t)},t.HistoryActions=t.WebNativeHistory=void 0;var r=s(h),n=s(v),o=s(p),i=function(){function e(e){if((0,o.default)(this,"history",void 0),"Hash"===e)this.history=(0,oe.createHashHistory)();else if("Memory"===e)this.history=(0,oe.createMemoryHistory)();else if("Browser"===e)this.history=(0,oe.createBrowserHistory)();else{var t=e.split("?"),r=t[0],n=t[1],i=void 0===n?"":n;this.history={action:"PUSH",length:0,listen:function(){return function(){}},createHref:function(){return""},push:function(){},replace:function(){},go:function(){},goBack:function(){},goForward:function(){},block:function(){return function(){}},location:{pathname:r,search:i&&"?"+i,hash:""}}}}var t=e.prototype;return t.getLocation=function(){var e=this.history.location,t=e.pathname,r=void 0===t?"":t,n=e.search,o=void 0===n?"":n,i=e.hash,a=void 0===i?"":i;return{pathname:r,search:decodeURIComponent(o).replace("?",""),hash:decodeURIComponent(a).replace("#","")}},t.getUrl=function(){var e=this.history.location,t=e.pathname,r=void 0===t?"":t,n=e.search,o=void 0===n?"":n,i=e.hash;return[r,o,void 0===i?"":i].join("")},t.parseUrl=function(e){if(!e)return{pathname:"/",search:"",hash:""};var t=e.split(/[?#]/);2===t.length&&e.indexOf("?")<0&&t.splice(1,0,"");var r=t[0],n=t[1],o=void 0===n?"":n,i=t[2];return{pathname:r,search:o,hash:void 0===i?"":i}},t.toUrl=function(e){return[e.pathname,e.search&&"?"+e.search,e.hash&&"#"+e.hash].join("")},t.block=function(e){var t=this;return this.history.block((function(r,n){var o=r.pathname,i=void 0===o?"":o,a=r.search,u=void 0===a?"":a,c=r.hash;return e([i,u,void 0===c?"":c].join(""),t.getKey(r),n)}))},t.getKey=function(e){return e.state||""},t.push=function(e,t){this.history.push(this.toUrl(e),t)},t.replace=function(e,t){this.history.replace(this.toUrl(e),t)},t.relaunch=function(e,t){this.history.push(this.toUrl(e),t)},t.pop=function(e,t,r){t<500?this.history.go(-t):this.history.push(this.toUrl(e),r)},e}();t.WebNativeHistory=i;var a=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).nativeHistory=t,(0,o.default)((0,r.default)(i),"_unlistenHistory",void 0),(0,o.default)((0,r.default)(i),"_timer",0),i._unlistenHistory=i.nativeHistory.block((function(e,t,r){if(t!==i.getCurKey()){var n,o=0;return"POP"===r&&(o=i.findHistoryByKey(t)),(n=o>0?function(){i._timer=0,i.pop(o)}:"REPLACE"===r?function(){i._timer=0,i.replace(e)}:"PUSH"===r?function(){i._timer=0,i.push(e)}:function(){i._timer=0,i.relaunch(e)})&&!i._timer&&(i._timer=K.env.setTimeout(n,50)),!1}})),i}(0,n.default)(t,e);var i=t.prototype;return i.getNativeHistory=function(){return this.nativeHistory.history},i.destroy=function(){this._unlistenHistory()},i.refresh=function(){this.nativeHistory.history.go(0)},t}(q.BaseHistoryActions);t.HistoryActions=a}));function ae(){return(ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ue(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}var ce=function(){return e.createElement("div",null,"error")},se={loadView:function(n,o,i,a,u){var c=(i||{}).forwardRef,s=!0,f=function(i){t((function(){return function(){s=!1}}),[]);var f=r((function(){var e=K.getView(n,o);return K.isPromise(e)?(e.then((function(e){s&&d({Component:e})})).catch((function(){s&&d({Component:u||ce})})),null):{Component:e}})),l=f[0],d=f[1],p=i.forwardRef2,h=ue(i,["forwardRef2"]),v=c?{ref:p}:{};return l?e.createElement(l.Component,ae({},h,v)):a?e.createElement(a,i):null};return c?e.forwardRef((function(t,r){return e.createElement(f,ae({},t,{forwardRef:r}))})):f},getActions:void 0,state:void 0,store:void 0,history:void 0,request:void 0,response:void 0};function fe(e,t){t&&K.getRootModuleAPI(JSON.parse(t))}function le(){var e=K.getRootModuleAPI();return se.getActions=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.reduce((function(t,r){return t[r]=e[r].actions,t}),{})},{App:se,Modules:e,Actions:{}}}var de=a,pe=e.memo((function(r){var n=r.children,o="";return e.Children.forEach(n,(function(e){e&&"title"===e.type&&(o=e.props.children)})),K.isServer()?e.createElement("head",null,n):(t((function(){o&&(document.title=o)}),[o]),null)})),he=e.memo((function(t){var r=t.children,n=t.elseView,o=[];return e.Children.forEach(r,(function(e){e&&o.push(e)})),o.length>0?e.createElement(e.Fragment,null,o):e.createElement(e.Fragment,null,n)})),ve=e.memo((function(t){var r=t.children,n=t.elseView,o=[];return e.Children.forEach(r,(function(e){e&&o.push(e)})),o.length>0?e.createElement(e.Fragment,null,o[0]):e.createElement(e.Fragment,null,n)}));var me=e.forwardRef((function(t,r){var n=t.onClick,o=t.replace,i=ue(t,["onClick","replace"]),a=i.target,u=Object.assign({},i,{onClick:function(e){try{n&&n(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||a&&"_self"!==a||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),o?se.history.replace(i.href):se.history.push(i.href))}});return e.createElement("a",ae({},u,{ref:r}))}));function ye(e){K.setConfig(e),q.setRouteConfig(e)}var ge,we=K.exportModule;function be(t,r){var a=r.appModuleName,u=void 0===a?"app":a,c=r.appViewName,s=void 0===c?"main":c,f=r.historyType,l=void 0===f?"Browser":f,d=r.locationTransform,p=r.storeOptions,h=void 0===p?{}:p,v=r.container,m=void 0===v?"root":v;return se.history=ie.createRouter(l,d),h.middlewares||(h.middlewares=[]),h.middlewares.unshift(q.routeMiddleware),h.reducers||(h.reducers={}),h.reducers.route=q.routeReducer,h.initData||(h.initData={}),h.initData=K.mergeState(h.initData,{route:se.history.getRouteState()}),K.renderApp((function(t,r,a,u){var c=function(r){var a="string"==typeof m?K.env.document.getElementById(m):m;n(a),(K.env[u]?o:i)(e.createElement(r,{store:t}),a)};return c(a),c}),t,u,s,h,(function(e){se.store=e,se.history.setStore(e);var t=se.history.getRouteState();return Object.keys(t.params)}))}function Se(e){ge=e}function _e(t,r){var n=r.request,o=r.response,i=r.appModuleName,a=void 0===i?"app":i,u=r.appViewName,c=void 0===u?"main":u,s=r.locationTransform,f=r.storeOptions,l=void 0===f?{}:f,d=r.container,p=void 0===d?"root":d;return ge||(ge=Buffer.from("process.env.MEDUX_ENV_SSRTPL","base64").toString()),se.request=n,se.response=o,se.history=ie.createRouter(n.url,s),l.initData||(l.initData={}),l.initData=K.mergeState(l.initData,{route:se.history.getRouteState()}),K.renderSSR((function(t,r,n,o){var i=t.getState();return{store:t,ssrInitStoreKey:o,data:i,html:require("react-dom/server").renderToString(e.createElement(n,{store:t}))}}),t,a,c,l,(function(e){se.store=e,Object.defineProperty(se,"state",{get:function(){return e.getState()}}),se.history.setStore(e);var t=se.history.getRouteState();return Object.keys(t.params)})).then((function(e){var t=e.html,r=e.data,n=e.ssrInitStoreKey,o=ge.match(new RegExp("<[^<>]+id=['\"]"+p+"['\"][^<>]*>","m"));if(o){var i=t.split(/<head>|<\/head>/,3);return t=i[0]+i[2],ge.replace("</head>",i[1]+"\r\n<script>window."+n+" = "+JSON.stringify(r)+";<\/script>\r\n</head>").replace(o[0],o[0]+t)}return t}))}var Ee=K.ActionTypes,Pe=q.RouteModuleHandlers,xe=K.LoadingState,Me=q.createWebLocationTransform,Oe=K.deepMerge,ke=K.deepMergeState,Te=K.delayPromise,Re=K.effect,Ae=K.errorAction,je=K.isServer,De=K.logger,Ne=K.modelHotReplacement,Ce=K.reducer,Le=K.serverSide,He=K.setLoading,Ie=K.setLoadingDepthTime,Ue=K.viewHotReplacement;export{Ee as ActionTypes,Pe as BaseModuleHandlers,pe as DocumentHead,he as Else,me as Link,xe as LoadingState,ve as Switch,be as buildApp,_e as buildSSR,de as connectRedux,Me as createWebLocationTransform,Oe as deepMerge,ke as deepMergeState,Te as delayPromise,Re as effect,Ae as errorAction,le as exportApp,we as exportModule,je as isServer,De as logger,Ne as modelHotReplacement,fe as patchActions,Ce as reducer,Le as serverSide,ye as setConfig,He as setLoading,Ie as setLoadingDepthTime,Se as setSsrHtmlTpl,Ue as viewHotReplacement};
//# sourceMappingURL=index.min.js.map
