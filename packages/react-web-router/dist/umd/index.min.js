!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","react-dom"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).MeduxWeb={},t.React,t.ReactDOM)}(this,(function(t,e,r){"use strict";function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var i=n(e);function o(){return(o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var a,s="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")();function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,c(t,e)}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}s.isServer="undefined"==typeof window&&"object"==typeof global&&global.global===global,t.LoadingState=void 0,(a=t.LoadingState||(t.LoadingState={})).Start="Start",a.Stop="Stop",a.Depth="Depth";var d=function(e){function r(t){var r;return l(u(r=e.call(this)||this),"list",[]),l(u(r),"ctimer",0),r.deferSecond=t,r}f(r,e);var n=r.prototype;return n.addItem=function(e,r){var n=this;return void 0===r&&(r=""),this.list.some((function(t){return t.promise===e}))||(this.list.push({promise:e,note:r}),e.finally((function(){return n.completeItem(e)})),1!==this.list.length||this.ctimer||(this.dispatch(t.LoadingState.Start),this.ctimer=s.setTimeout((function(){n.ctimer=0,n.list.length>0&&n.dispatch(t.LoadingState.Depth)}),1e3*this.deferSecond))),e},n.completeItem=function(e){var r=this.list.findIndex((function(t){return t.promise===e}));return r>-1&&(this.list.splice(r,1),0===this.list.length&&(this.ctimer&&(s.clearTimeout.call(null,this.ctimer),this.ctimer=0),this.dispatch(t.LoadingState.Stop))),this},r}(function(){function t(){l(this,"listenerId",0),l(this,"listenerMap",{})}var e=t.prototype;return e.addListener=function(t){this.listenerId++;var e=""+this.listenerId,r=this.listenerMap;return r[e]=t,function(){delete r[e]}},e.dispatch=function(t){var e=this.listenerMap;Object.keys(e).forEach((function(r){e[r](t)}))},t}());function h(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function p(t,e,r){return Object.keys(r).forEach((function(n){var i=e[n],o=r[n];h(o)?h(i)?e[n]=p(t,i,o):e[n]=t?o:p(t,{},o):e[n]=o})),e}function v(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return h(t)||(t={}),(r=r.filter((function(t){return h(t)&&Object.keys(t).length}))).length<1||r.forEach((function(e,n){if(h(e)){var i=!1,o=null;n===r.length-1?i=!0:n===r.length-2&&(o=r[n+1]),Object.keys(e).forEach((function(r){var n=t[r],a=e[r];h(a)?h(n)?t[r]=p(i,n,a):t[r]=i||o&&!o[r]?a:p(i,{},a):t[r]=a}))}})),t}function m(t){return"object"==typeof t&&"function"==typeof t.then}function y(){return s.isServer}var g={NSP:".",MSP:",",MutableData:!1,DepthTimeOnLoading:2};var w={MLoading:"Loading",MInit:"Init",MReInit:"ReInit",Error:"medux"+g.NSP+"Error"},b={injectedModules:{},reducersMap:{},effectsMap:{}};function k(t,e,r,n){var i;n[t]||(n[t]={}),n[t][r]&&(i="Action duplicate or conflict : "+t+".","development"===process.env.NODE_ENV&&s.console.warn(i)),n[t][r]=e}function E(t,e){var r=b.injectedModules;if(!r[t])for(var n in r[t]=!0,e)"function"==typeof e[n]&&function(){var r=e[n];(r.__isReducer__||r.__isEffect__)&&n.split(g.MSP).forEach((function(e){(e=e.trim().replace(new RegExp("^this["+g.NSP+"]"),""+t+g.NSP)).split(g.NSP)[1]?k(e,r,t,r.__isEffect__?b.effectsMap:b.reducersMap):k(t+g.NSP+e,r,t,r.__isEffect__?b.effectsMap:b.reducersMap)}))}()}var x={};function S(t,e,r){if(void 0===e&&(e=b.appModuleName),void 0===r&&(r="global"),s.isServer)return t;var n=e+g.NSP+r;return x[n]||(x[n]=new d(g.DepthTimeOnLoading),x[n].addListener((function(t){var n=b.clientStore;if(n){var i,o=(0,b.facadeMap[e].actions[w.MLoading])(((i={})[r]=t,i));n.dispatch(o)}}))),x[n].addItem(t),t}function _(t,e,r){return e||r||(e=t.key,r=t.descriptor),r.value.__isReducer__=!0,r.enumerable=!0,t.descriptor===r?t:r}function O(t){void 0===t&&(t={});for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return g.MutableData?v.apply(void 0,[t].concat(r)):v.apply(void 0,[{},t].concat(r))}function P(t){void 0===t&&(t={});for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return g.MutableData?Object.assign.apply(Object,[t].concat(r)):Object.assign.apply(Object,[{},t].concat(r))}function T(t){return{type:w.Error,payload:[t]}}function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function N(t){return function(t){if(Array.isArray(t))return t}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return L(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t){var e=function(t,e){if("object"!==R(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===R(e)?e:String(e)}function D(t,e,r,n){var i=j();if(n)for(var o=0;o<n.length;o++)i=n[o](i);var a=e((function(t){i.initializeInstanceElements(t,s.elements)}),r),s=i.decorateClass(function(t){for(var e=[],r=function(t){return"method"===t.kind&&t.key===o.key&&t.placement===o.placement},n=0;n<t.length;n++){var i,o=t[n];if("method"===o.kind&&(i=e.find(r)))if(H(o.descriptor)||H(i.descriptor)){if(C(o)||C(i))throw new ReferenceError("Duplicated methods ("+o.key+") can't be decorated.");i.descriptor=o.descriptor}else{if(C(o)){if(C(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+o.key+").");i.decorators=o.decorators}U(o,i)}else e.push(o)}return e}(a.d.map(A)),t);return i.initializeClassElements(a.F,s.elements),i.runClassFinishers(a.F,s.finishers)}function j(){j=function(){return t};var t={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(t,e){["method","field"].forEach((function(r){e.forEach((function(e){e.kind===r&&"own"===e.placement&&this.defineClassElement(t,e)}),this)}),this)},initializeClassElements:function(t,e){var r=t.prototype;["method","field"].forEach((function(n){e.forEach((function(e){var i=e.placement;if(e.kind===n&&("static"===i||"prototype"===i)){var o="static"===i?t:r;this.defineClassElement(o,e)}}),this)}),this)},defineClassElement:function(t,e){var r=e.descriptor;if("field"===e.kind){var n=e.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===n?void 0:n.call(t)}}Object.defineProperty(t,e.key,r)},decorateClass:function(t,e){var r=[],n=[],i={static:[],prototype:[],own:[]};if(t.forEach((function(t){this.addElementPlacement(t,i)}),this),t.forEach((function(t){if(!C(t))return r.push(t);var e=this.decorateElement(t,i);r.push(e.element),r.push.apply(r,e.extras),n.push.apply(n,e.finishers)}),this),!e)return{elements:r,finishers:n};var o=this.decorateConstructor(r,e);return n.push.apply(n,o.finishers),o.finishers=n,o},addElementPlacement:function(t,e,r){var n=e[t.placement];if(!r&&-1!==n.indexOf(t.key))throw new TypeError("Duplicated element ("+t.key+")");n.push(t.key)},decorateElement:function(t,e){for(var r=[],n=[],i=t.decorators,o=i.length-1;o>=0;o--){var a=e[t.placement];a.splice(a.indexOf(t.key),1);var s=this.fromElementDescriptor(t),u=this.toElementFinisherExtras((0,i[o])(s)||s);t=u.element,this.addElementPlacement(t,e),u.finisher&&n.push(u.finisher);var c=u.extras;if(c){for(var f=0;f<c.length;f++)this.addElementPlacement(c[f],e);r.push.apply(r,c)}}return{element:t,finishers:n,extras:r}},decorateConstructor:function(t,e){for(var r=[],n=e.length-1;n>=0;n--){var i=this.fromClassDescriptor(t),o=this.toClassDescriptor((0,e[n])(i)||i);if(void 0!==o.finisher&&r.push(o.finisher),void 0!==o.elements){t=o.elements;for(var a=0;a<t.length-1;a++)for(var s=a+1;s<t.length;s++)if(t[a].key===t[s].key&&t[a].placement===t[s].placement)throw new TypeError("Duplicated element ("+t[a].key+")")}}return{elements:t,finishers:r}},fromElementDescriptor:function(t){var e={kind:t.kind,key:t.key,placement:t.placement,descriptor:t.descriptor};return Object.defineProperty(e,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===t.kind&&(e.initializer=t.initializer),e},toElementDescriptors:function(t){if(void 0!==t)return N(t).map((function(t){var e=this.toElementDescriptor(t);return this.disallowProperty(t,"finisher","An element descriptor"),this.disallowProperty(t,"extras","An element descriptor"),e}),this)},toElementDescriptor:function(t){var e=String(t.kind);if("method"!==e&&"field"!==e)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+e+'"');var r=M(t.key),n=String(t.placement);if("static"!==n&&"prototype"!==n&&"own"!==n)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+n+'"');var i=t.descriptor;this.disallowProperty(t,"elements","An element descriptor");var o={kind:e,key:r,placement:n,descriptor:Object.assign({},i)};return"field"!==e?this.disallowProperty(t,"initializer","A method descriptor"):(this.disallowProperty(i,"get","The property descriptor of a field descriptor"),this.disallowProperty(i,"set","The property descriptor of a field descriptor"),this.disallowProperty(i,"value","The property descriptor of a field descriptor"),o.initializer=t.initializer),o},toElementFinisherExtras:function(t){return{element:this.toElementDescriptor(t),finisher:I(t,"finisher"),extras:this.toElementDescriptors(t.extras)}},fromClassDescriptor:function(t){var e={kind:"class",elements:t.map(this.fromElementDescriptor,this)};return Object.defineProperty(e,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),e},toClassDescriptor:function(t){var e=String(t.kind);if("class"!==e)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+e+'"');this.disallowProperty(t,"key","A class descriptor"),this.disallowProperty(t,"placement","A class descriptor"),this.disallowProperty(t,"descriptor","A class descriptor"),this.disallowProperty(t,"initializer","A class descriptor"),this.disallowProperty(t,"extras","A class descriptor");var r=I(t,"finisher");return{elements:this.toElementDescriptors(t.elements),finisher:r}},runClassFinishers:function(t,e){for(var r=0;r<e.length;r++){var n=(0,e[r])(t);if(void 0!==n){if("function"!=typeof n)throw new TypeError("Finishers must return a constructor.");t=n}}return t},disallowProperty:function(t,e,r){if(void 0!==t[e])throw new TypeError(r+" can't have a ."+e+" property.")}};return t}function A(t){var e,r=M(t.key);"method"===t.kind?e={value:t.value,writable:!0,configurable:!0,enumerable:!1}:"get"===t.kind?e={get:t.value,configurable:!0,enumerable:!1}:"set"===t.kind?e={set:t.value,configurable:!0,enumerable:!1}:"field"===t.kind&&(e={configurable:!0,writable:!0,enumerable:!0});var n={kind:"field"===t.kind?"field":"method",key:r,placement:t.static?"static":"field"===t.kind?"own":"prototype",descriptor:e};return t.decorators&&(n.decorators=t.decorators),"field"===t.kind&&(n.initializer=t.value),n}function U(t,e){void 0!==t.descriptor.get?e.descriptor.get=t.descriptor.get:e.descriptor.set=t.descriptor.set}function C(t){return t.decorators&&t.decorators.length}function H(t){return void 0!==t&&!(void 0===t.value&&void 0===t.writable)}function I(t,e){var r=t[e];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+e+"' to be a function");return r}function V(t){var e=t.default.moduleName,r=b.moduleGetter,n=r[e];return n.__module__===t||((n=function(){return t}).__module__=t,r[e]=n),n}function F(t){var e=b.moduleGetter[t]();return m(e)?e.then((function(t){return V(t),t})):(V(e),e)}function q(t,e){var r=F(t);return m(r)?r.then((function(t){return t.default.model(e)})):r.default.model(e)}var G=D(null,(function(t){return{F:function(e){t(this),this.initState=e},d:[{kind:"field",key:"actions",value:void 0},{kind:"field",key:"store",value:void 0},{kind:"field",key:"moduleName",value:function(){return""}},{kind:"get",key:"state",value:function(){return this.store.getState(this.moduleName)}},{kind:"get",key:"rootState",value:function(){return this.store.getState()}},{kind:"method",key:"getCurrentActionName",value:function(){return this.store.getCurrentActionName()}},{kind:"get",key:"currentRootState",value:function(){return this.store.getCurrentState()}},{kind:"get",key:"currentState",value:function(){return this.store.getCurrentState(this.moduleName)}},{kind:"method",key:"dispatch",value:function(t){return this.store.dispatch(t)}},{kind:"method",key:"loadModel",value:function(t){return q(t,this.store)}},{kind:"method",decorators:[_],key:"Init",value:function(t){return t}},{kind:"method",decorators:[_],key:"Update",value:function(t,e){return P(this.state,t)}},{kind:"method",decorators:[_],key:"Loading",value:function(t){var e=P(this.state.loading,t);return P(this.state,{loading:e})}}]}}));function B(t,e){for(var r in e){if(e.hasOwnProperty(r))delete e[r][t]}}function K(t){if(!b.facadeMap)if(t)b.facadeMap=Object.keys(t).reduce((function(e,r){var n=t[r],i={},o={};n.forEach((function(t){i[t]=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return{type:r+g.NSP+t,payload:n}},o[t]=r+g.NSP+t}));var a={name:r,actions:i,actionNames:o};return e[r]=a,e}),{});else{var e={};b.facadeMap=new Proxy({},{set:function(t,e,r,n){return Reflect.set(t,e,r,n)},get:function(t,r,n){var i=Reflect.get(t,r,n);return void 0!==i?i:(e[r]||(e[r]={name:r,actionNames:new Proxy({},{get:function(t,e){return r+g.NSP+e}}),actions:new Proxy({},{get:function(t,e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return{type:r+g.NSP+e,payload:n}}}})}),e[r])}})}return b.facadeMap}function z(t){return t&&!!t.__meduxProcessed__}function J(t,e){return"object"!=typeof t&&(t={message:t}),Object.defineProperty(t,"__meduxProcessed__",{value:e,enumerable:!1,writable:!0}),t}function $(t){return Array.isArray(t.payload)?t.payload:[]}function Y(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce((function(t,e){return function(){return t(e.apply(void 0,arguments))}}))}function W(t,e){var r=t,n=t.getState,i=function(t){var e=n();return t?e[t]:e};r.getState=i;var a={};r.injectedModules=a;var u={actionName:"",prevState:{}},c=t.update;r.getCurrentActionName=function(){return u.actionName},r.getCurrentState=function(t){var e=u.prevState;return t?e[t]:e};var f=function(t){throw new Error("Dispatching while constructing your middleware is not allowed. ")},l={getState:i,dispatch:function(t){return f(t)}},d=function(){return function(t){return function(e){e.type===w.Error&&J($(e)[0],!0);var n=e.type.split(g.NSP),i=n[0],o=n[1];if(!s.isServer||o!==w.MLoading){if(i&&o&&b.moduleGetter[i]&&!a[i]){var u=q(i,r);if(m(u))return u.then((function(){return t(e)}))}return t(e)}}}};function h(t,e,r){var n=e?b.reducersMap:b.effectsMap,i=t.type,s=i.split(g.NSP)[0],l=o({},n[t.type],n[i.replace(new RegExp("[^"+g.NSP+"]+"),"*")]),d=Object.keys(l);if(d.length>0){var h=[];d.forEach((function(t){t===b.appModuleName||t===s?h.unshift(t):h.push(t)})),t.priority&&h.unshift.apply(h,t.priority);var p={},v=$(t);if(!e){var m=[];return h.forEach((function(e){if(!p[e]){p[e]=!0;var n=l[e],i=a[e];Object.assign(u,r),m.push(function(t,e,r,n,i){var o=e.apply(r,i),a=e.__decorators__;if(a){var s=[];a.forEach((function(e,r){s[r]=e[0](n,t,o)})),e.__decoratorResults__=s}return o.then((function(t){if(a){var r=e.__decoratorResults__||[];a.forEach((function(e,n){e[1]&&e[1]("Resolved",r[n],t)})),e.__decoratorResults__=void 0}return t}),(function(t){if(a){var r=e.__decoratorResults__||[];a.forEach((function(e,n){e[1]&&e[1]("Rejected",r[n],t)})),e.__decoratorResults__=void 0}if(z(t))throw t;return f(T(J(t,!1)))}))}(e,n,i,t,v))}})),1===m.length?m[0]:Promise.all(m)}Object.assign(u,r);var y={};h.forEach((function(t){if(!p[t]){p[t]=!0;var e=l[t],r=a[t];y[t]=e.apply(r,v)}})),c(i,y,v)}}var p=(e?[d].concat(e):[d]).map((function(t){return t(l)}));return f=Y.apply(void 0,p)((function(t){var e={actionName:t.type,prevState:i()};return h(t,!0,e),h(t,!1,e)})),r.dispatch=f,r}var X=function(t){var e={exports:{}};return t(e,e.exports),e.exports}((function(t){var e=function(t){var e,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,o=Object.create(i.prototype),a=new T(n||[]);return o._invoke=function(t,e,r){var n=l;return function(i,o){if(n===h)throw new Error("Generator is already running");if(n===p){if("throw"===i)throw o;return N()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=_(a,r);if(s){if(s===v)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var u=f(t,e,r);if("normal"===u.type){if(n=r.done?p:d,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=p,r.method="throw",r.arg=u.arg)}}}(t,r,a),o}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l="suspendedStart",d="suspendedYield",h="executing",p="completed",v={};function m(){}function y(){}function g(){}var w={};w[o]=function(){return this};var b=Object.getPrototypeOf,k=b&&b(b(L([])));k&&k!==r&&n.call(k,o)&&(w=k);var E=g.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(i,o,a,s){var u=f(t[i],t,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;this._invoke=function(t,n){function o(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(o,o):o()}}function _(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,_(t,r),"throw"===r.method))return v;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=f(n,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function L(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}return{next:N}}function N(){return{value:e,done:!0}}return y.prototype=E.constructor=g,g.constructor=y,y.displayName=u(g,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,s,"GeneratorFunction")),t.prototype=Object.create(E),t},t.awrap=function(t){return{__await:t}},x(S.prototype),S.prototype[a]=function(){return this},t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new S(c(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,s,"Generator"),E[o]=function(){return this},E.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;P(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}));function Q(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,i)}function Z(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){Q(o,n,i,a,s,"next",t)}function s(t){Q(o,n,i,a,s,"throw",t)}a(void 0)}))}}var tt=function(){},et=0,rt=null;var nt=function(){};s.encodeBas64=function(t){return t?"function"==typeof btoa?btoa(t):"undefined"!=typeof Buffer?Buffer.from(t).toString("base64"):t:""},s.decodeBas64=function(t){return t?"function"==typeof atob?atob(t):"undefined"!=typeof Buffer?Buffer.from(t,"base64").toString():t:""};var it={actionMaxHistory:10,pagesMaxHistory:10,pagenames:{},defaultParams:{},disableNativeRoute:!1,indexUrl:""};function ot(t){t.actionMaxHistory&&(it.actionMaxHistory=t.actionMaxHistory),t.pagesMaxHistory&&(it.pagesMaxHistory=t.pagesMaxHistory),t.disableNativeRoute&&(it.disableNativeRoute=!0),t.pagenames&&(it.pagenames=t.pagenames),t.indexUrl&&(it.indexUrl=t.indexUrl)}function at(t){return(t||"").split("&").reduce((function(t,e){var r=e.split("=");if(r.length>1){var n=r[0],i=r.slice(1);t||(t={}),t[n]=decodeURIComponent(i.join("="))}return t}),void 0)}function st(t){return Object.keys(t||{}).map((function(e){return e+"="+encodeURIComponent(t[e])})).join("&")}function ut(t,e){var r=t.pagename,n=t.params,i=n?JSON.stringify(n):"";return{uri:[e,r,i].join("|"),pagename:r,query:i,key:e}}function ct(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[0],i=void 0===n?"":n,o=e[1],a=i.split("|"),s=a[0],u=a[1],c=a.slice(2),f=[s,u,c.join("|")],l={key:0,pagename:1,query:2};return o?f[l[o]]:f}function ft(t){var e=ct(t),r=e[0],n=e[1],i=e[2];return{key:r,location:{pagename:n,params:JSON.parse(i)}}}var lt=function(){function t(e,r){if(l(this,"curRecord",void 0),l(this,"pages",[]),l(this,"actions",[]),this.parent=r,function(t){return t.uri}(e))this.curRecord=e;else{var n=ut(e.location,e.key),i=n.uri,o=n.pagename,a=n.query;this.curRecord={uri:i,pagename:o,query:a,key:e.key,sub:new t({uri:i,pagename:o,query:a,key:e.key},this)}}}var e=t.prototype;return e.getLength=function(){return this.actions.length},e.getRecord=function(t){return"number"==typeof t?(-1===t&&(t=this.actions.length-1),this.actions[t]):this.actions.find((function(e){return e.key===t}))},e.findIndex=function(t){return this.actions.findIndex((function(e){return e.key===t}))},e.getCurrentInternalHistory=function(){return this.curRecord.sub},e.getStack=function(){return this.actions},e.getUriStack=function(){return this.actions.map((function(t){return t.uri}))},e.getPageStack=function(){return this.pages},e.push=function(e,r){var n,i=this.curRecord,a=ut(e,r),s=a.uri,u=a.pagename,c=a.query;this.curRecord={uri:s,pagename:u,query:c,key:r,sub:new t({uri:s,pagename:u,query:c,key:r},this)};var f=[].concat(this.pages),l=[].concat(this.actions),d=it.actionMaxHistory,h=it.pagesMaxHistory;l.unshift(i),l.length>d&&(l.length=d),ct(null==(n=f[0])?void 0:n.uri,"pagename")!==u?(f.unshift(i),f.length>h&&(f.length=h)):f[0]=i,this.actions=l,this.pages=f,this.parent&&(this.parent.curRecord=o({},this.parent.curRecord,{uri:s,pagename:u,query:c}))},e.replace=function(e,r){var n=ut(e,r),i=n.uri,a=n.pagename,s=n.query;this.curRecord={uri:i,pagename:a,query:s,key:r,sub:new t({uri:i,pagename:a,query:s,key:r},this)},this.parent&&(this.parent.curRecord=o({},this.parent.curRecord,{uri:i,pagename:a,query:s}))},e.relaunch=function(e,r){var n=ut(e,r),i=n.uri,a=n.pagename,s=n.query;this.curRecord={uri:i,pagename:a,query:s,key:r,sub:new t({uri:i,pagename:a,query:s,key:r},this)},this.actions=[],this.pages=[],this.parent&&(this.parent.curRecord=o({},this.parent.curRecord,{uri:i,pagename:a,query:s}))},e.back=function(t){var e,r=this.getRecord(t-1);if(!r)return!1;this.curRecord=r;var n=r.uri,i=r.pagename,a=r.query,s=[].concat(this.pages),u=[].concat(this.actions),c=u.splice(0,t).reduce((function(t,e){var r=ct(e.uri,"pagename");return t[t.length-1]!==r&&t.push(r),t}),[]);return c[c.length-1]===ct(null==(e=u[0])?void 0:e.uri,"pagename")&&c.pop(),s.splice(0,c.length),this.actions=u,this.pages=s,this.parent&&(this.parent.curRecord=o({},this.parent.curRecord,{uri:n,pagename:i,query:a})),!0},t}();function dt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ht=D(null,(function(t,e){return{F:function(e){function r(){for(var r,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i))||this,t(u(r)),r}return f(r,e),r}(e),d:[{kind:"method",decorators:[_],key:"Init",value:function(t){var e=this.rootState.route.params[this.moduleName];return e?v({},t,e):t}},{kind:"method",decorators:[_],key:"RouteParams",value:function(t){return O(this.state,t)}}]}}),G),pt={MRouteParams:"RouteParams",RouteChange:"route"+g.NSP+"RouteChange",TestRouteChange:"route"+g.NSP+"TestRouteChange"};function vt(t){return{type:pt.TestRouteChange,payload:[t]}}function mt(t){return{type:pt.RouteChange,payload:[t]}}var yt=function(t){var e=t.dispatch,r=t.getState;return function(t){return function(n){if(n.type===pt.RouteChange){var i=t(n),o=n.payload[0],a=o.params,s=r();return Object.keys(a).forEach((function(t){var r,n=a[t];n&&(null!=(r=s[t])&&r.initialized&&e(function(t,e,r){return{type:""+t+g.NSP+pt.MRouteParams,payload:[e,r]}}(t,n,o.action)))})),i}return t(n)}}};function gt(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function wt(t,e){var r={};return Object.keys(e).forEach((function(n){if(void 0===t[n])r[n]=e[n];else{var i=t[n],o=e[n];gt(i)&&gt(o)&&i!==o?r[n]=wt(i,o):r[n]=i}})),r}function bt(t,e){return gt(t)||(t={}),gt(e)||(e={}),wt(t,e)}function kt(t,e){var r={},n=!1;if(Object.keys(t).forEach((function(i){var o=t[i],a=e[i];o!==a&&(typeof o==typeof a&&gt(o)&&(o=kt(o,a)),void 0!==o&&(n=!0,r[i]=o))})),n)return r}function Et(t,e,r){if(!gt(t))return{};if(!gt(e))return t;var n=kt(t,e);if(r){var i={};return Object.keys(t).forEach((function(t){i[t]=n&&void 0!==n[t]?n[t]:{}})),i}return n||{}}function xt(t){var e,r,n=Object.keys(t);return 0===n.length?[void 0,void 0]:(n.forEach((function(n){var i=t[n];if(n.startsWith("_"))r||(r={}),r[n]=i;else if(gt(i)){var o=xt(i),a=o[0],s=o[1];a&&(e||(e={}),e[n]=a),s&&(r||(r={}),r[n]=s)}else e||(e={}),e[n]=i})),[e,r])}function St(t,e){if(!gt(t))return[void 0,void 0];var r=Object.keys(t);if(0===r.length)return[void 0,void 0];var n=xt(t),i=n[0],o=n[1];return r.forEach((function(t){e[t]||(i||(i={}),i[t]||(i[t]={}))})),[i,o]}function _t(t){var e=it.defaultParams;return Object.keys(t).reduce((function(r,n){return e.hasOwnProperty(n)&&(r[n]=bt(t[n],e[n])),r}),{})}function Ot(t){return t.pathname}function Pt(t){return t.pathname}!function(){function t(){l(this,"initState",void 0),l(this,"moduleName",void 0),l(this,"store",void 0),l(this,"actions",void 0)}var e,r,n;t.prototype.RouteChange=function(t){return P(this.state,t)},e=t,(r=[{key:"state",get:function(){return this.store.getState(this.moduleName)}}])&&dt(e.prototype,r),n&&dt(e,n)}();var Tt=function(){function t(){l(this,"curTask",void 0),l(this,"taskList",[]),l(this,"router",null)}var e=t.prototype;return e.onChange=function(t){return this.curTask?(this.curTask.resolve(this.curTask.nativeData),this.curTask=void 0,!1):t!==this.router.getCurKey()},e.setRouter=function(t){this.router=t},e.execute=function(t,e){for(var r=this,n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];return new Promise((function(n,o){var a={resolve:n,reject:o,nativeData:void 0};r.curTask=a;var s=r[t].apply(r,[function(){var t=e();return a.nativeData=t,t}].concat(i));s?m(s)&&s.catch((function(t){o(t),r.curTask=void 0})):(n(void 0),r.curTask=void 0)}))},t}(),Lt=function(){function t(t,e,r){l(this,"_tid",0),l(this,"curTask",void 0),l(this,"taskList",[]),l(this,"_nativeData",void 0),l(this,"routeState",void 0),l(this,"meduxUrl",void 0),l(this,"store",void 0),l(this,"history",void 0),l(this,"_lid",0),l(this,"listenerMap",{}),this.nativeRouter=e,this.locationTransform=r,e.setRouter(this);var n="string"==typeof t?this.nativeUrlToLocation(t):this.nativeLocationToLocation(t),i=this._createKey(),a=o({},n,{action:"RELAUNCH",key:i});this.routeState=a,this.meduxUrl=this.locationToMeduxUrl(a),it.indexUrl||ot({indexUrl:this.meduxUrl}),this._nativeData=void 0,this.history=new lt({location:n,key:i})}var e,r,n,i,a=t.prototype;return a.addListener=function(t){this._lid++;var e=""+this._lid,r=this.listenerMap;return r[e]=t,function(){delete r[e]}},a.dispatch=function(t){var e=this.listenerMap,r=Object.keys(e).map((function(r){return e[r](t)}));return Promise.all(r)},a.getRouteState=function(){return this.routeState},a.getPagename=function(){return this.routeState.pagename},a.getParams=function(){return this.routeState.params},a.getMeduxUrl=function(){return this.meduxUrl},a.getNativeLocation=function(){if(!this._nativeData){var t=this.locationTransform.out(this.routeState),e=this.nativeLocationToNativeUrl(t);this._nativeData={nativeLocation:t,nativeUrl:e}}return this._nativeData.nativeLocation},a.getNativeUrl=function(){if(!this._nativeData){var t=this.locationTransform.out(this.routeState),e=this.nativeLocationToNativeUrl(t);this._nativeData={nativeLocation:t,nativeUrl:e}}return this._nativeData.nativeUrl},a.setStore=function(t){this.store=t},a.getCurKey=function(){return this.routeState.key},a.findHistoryIndex=function(t){return this.history.findIndex(t)},a._createKey=function(){return this._tid++,""+this._tid},a.nativeUrlToNativeLocation=function(t){return function(t){if(!t)return{pathname:"/",searchData:void 0,hashData:void 0};var e=t.split(/[?#]/);2===e.length&&t.indexOf("?")<0&&e.splice(1,0,"");var r=e[0],n=e[1],i=e[2];return{pathname:"/"+r.replace(/^\/+|\/+$/g,""),searchData:at(n),hashData:at(i)}}(t)},a.nativeLocationToLocation=function(t){var e;try{e=this.locationTransform.in(t)}catch(t){s.console.warn(t),e={pagename:"/",params:{}}}return e},a.nativeUrlToLocation=function(t){return this.nativeLocationToLocation(this.nativeUrlToNativeLocation(t))},a.urlToLocation=function(t){var e,r=t.split("?"),n=r[0],i=r.slice(1).join("?");try{if(i.startsWith("{")){var o=JSON.parse(i);e=this.locationTransform.in({pagename:n,params:o})}else{var a=this.nativeUrlToNativeLocation(t);e=this.locationTransform.in(a)}}catch(t){s.console.warn(t),e={pagename:"/",params:{}}}return e},a.nativeLocationToNativeUrl=function(t){return r=(e=t).pathname,n=e.searchData,i=e.hashData,o=st(n),a=st(i),["/"+r.replace(/^\/+|\/+$/g,""),o&&"?"+o,a&&"#"+a].join("");var e,r,n,i,o,a},a.locationToNativeUrl=function(t){var e=this.locationTransform.out(t);return this.nativeLocationToNativeUrl(e)},a.locationToMeduxUrl=function(t){return[t.pagename,JSON.stringify(t.params||{})].join("?")},a.payloadToPartial=function(t){var e=t.params,r="current"===t.extendParams?this.routeState.params:t.extendParams;return r&&e?e=v({},r,e):r&&(e=r),{pagename:t.pagename||this.routeState.pagename,params:e||{}}},a.relaunch=function(t,e,r){void 0===e&&(e=!1),void 0===r&&(r=it.disableNativeRoute),this.addTask(this._relaunch.bind(this,t,e,r))},a._relaunch=(e=Z(X.mark((function t(e,r,n){var i,a,s,u,c=this;return X.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!=typeof e){t.next=7;break}if(!/^[\w:]*\/\//.test(e)){t.next=4;break}return this.nativeRouter.toOutside(e),t.abrupt("return");case 4:i=this.urlToLocation(e),t.next=8;break;case 7:i=Pt(e)?this.nativeLocationToLocation(e):this.locationTransform.in(this.payloadToPartial(e));case 8:return a=this._createKey(),s=o({},i,{action:"RELAUNCH",key:a}),t.next=12,this.store.dispatch(vt(s));case 12:return t.next=14,this.dispatch(s);case 14:if(n||r){t.next=18;break}return t.next=17,this.nativeRouter.execute("relaunch",(function(){var t=c.locationTransform.out(s);return{nativeLocation:t,nativeUrl:c.nativeLocationToNativeUrl(t)}}),a);case 17:u=t.sent;case 18:this._nativeData=u,this.routeState=s,this.meduxUrl=this.locationToMeduxUrl(s),this.store.dispatch(mt(s)),r?this.history.getCurrentInternalHistory().relaunch(i,a):this.history.relaunch(i,a);case 23:case"end":return t.stop()}}),t,this)}))),function(t,r,n){return e.apply(this,arguments)}),a.push=function(t,e,r){void 0===e&&(e=!1),void 0===r&&(r=it.disableNativeRoute),this.addTask(this._push.bind(this,t,e,r))},a._push=(r=Z(X.mark((function t(e,r,n){var i,a,s,u,c=this;return X.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!=typeof e){t.next=7;break}if(!/^[\w:]*\/\//.test(e)){t.next=4;break}return this.nativeRouter.toOutside(e),t.abrupt("return");case 4:i=this.urlToLocation(e),t.next=8;break;case 7:i=Pt(e)?this.nativeLocationToLocation(e):this.locationTransform.in(this.payloadToPartial(e));case 8:return a=this._createKey(),s=o({},i,{action:"PUSH",key:a}),t.next=12,this.store.dispatch(vt(s));case 12:return t.next=14,this.dispatch(s);case 14:if(n||r){t.next=18;break}return t.next=17,this.nativeRouter.execute("push",(function(){var t=c.locationTransform.out(s);return{nativeLocation:t,nativeUrl:c.nativeLocationToNativeUrl(t)}}),a);case 17:u=t.sent;case 18:this._nativeData=u||void 0,this.routeState=s,this.meduxUrl=this.locationToMeduxUrl(s),r?this.history.getCurrentInternalHistory().push(i,a):this.history.push(i,a),this.store.dispatch(mt(s));case 23:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return r.apply(this,arguments)}),a.replace=function(t,e,r){void 0===e&&(e=!1),void 0===r&&(r=it.disableNativeRoute),this.addTask(this._replace.bind(this,t,e,r))},a._replace=(n=Z(X.mark((function t(e,r,n){var i,a,s,u,c=this;return X.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!=typeof e){t.next=7;break}if(!/^[\w:]*\/\//.test(e)){t.next=4;break}return this.nativeRouter.toOutside(e),t.abrupt("return");case 4:i=this.urlToLocation(e),t.next=8;break;case 7:i=Pt(e)?this.nativeLocationToLocation(e):this.locationTransform.in(this.payloadToPartial(e));case 8:return a=this._createKey(),s=o({},i,{action:"REPLACE",key:a}),t.next=12,this.store.dispatch(vt(s));case 12:return t.next=14,this.dispatch(s);case 14:if(n||r){t.next=18;break}return t.next=17,this.nativeRouter.execute("replace",(function(){var t=c.locationTransform.out(s);return{nativeLocation:t,nativeUrl:c.nativeLocationToNativeUrl(t)}}),a);case 17:u=t.sent;case 18:this._nativeData=u||void 0,this.routeState=s,this.meduxUrl=this.locationToMeduxUrl(s),r?this.history.getCurrentInternalHistory().replace(i,a):this.history.replace(i,a),this.store.dispatch(mt(s));case 23:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return n.apply(this,arguments)}),a.back=function(t,e,r,n){void 0===t&&(t=1),void 0===e&&(e="index"),void 0===r&&(r=!1),void 0===n&&(n=it.disableNativeRoute),this.addTask(this._back.bind(this,t,"index"===e?it.indexUrl:e,r,n))},a._back=(i=Z(X.mark((function t(e,r,n,i){var a,s,u,c,f,l,d,h=this;return X.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e&&(e=1),a=n?this.history.getCurrentInternalHistory().getRecord(e-1):this.history.getRecord(e-1)){t.next=6;break}if(!r){t.next=5;break}return t.abrupt("return",this._relaunch(r||it.indexUrl,n,i));case 5:throw{code:"1",message:"history not found"};case 6:return s=a.uri,u=ft(s),c=u.key,f=u.location,l=o({},f,{action:"BACK",key:c}),t.next=11,this.store.dispatch(vt(l));case 11:return t.next=13,this.dispatch(l);case 13:if(i||n){t.next=17;break}return t.next=16,this.nativeRouter.execute("back",(function(){var t=h.locationTransform.out(l);return{nativeLocation:t,nativeUrl:h.nativeLocationToNativeUrl(t)}}),e,c);case 16:d=t.sent;case 17:return this._nativeData=d||void 0,this.routeState=l,this.meduxUrl=this.locationToMeduxUrl(l),n?this.history.getCurrentInternalHistory().back(e):this.history.back(e),this.store.dispatch(mt(l)),t.abrupt("return",void 0);case 23:case"end":return t.stop()}}),t,this)}))),function(t,e,r,n){return i.apply(this,arguments)}),a.taskComplete=function(){var t=this.taskList.shift();t?this.executeTask(t):this.curTask=void 0},a.executeTask=function(t){this.curTask=t,t().finally(this.taskComplete.bind(this))},a.addTask=function(t){this.curTask?this.taskList.push(t):this.executeTask(t)},a.destroy=function(){this.nativeRouter.destroy()},t}();function Nt(t){return"/"===t.charAt(0)}function Rt(t,e){for(var r=e,n=r+1,i=t.length;n<i;r+=1,n+=1)t[r]=t[n];t.pop()}var Mt="production"===process.env.NODE_ENV;function Dt(t,e){if(!Mt){if(t)return;var r="Warning: "+e;"undefined"!=typeof console&&console.warn(r);try{throw Error(r)}catch(t){}}}var jt="production"===process.env.NODE_ENV,At="Invariant failed";function Ut(t,e){if(!t){if(jt)throw new Error(At);throw new Error(At+": "+(e||""))}}function Ct(t){return"/"===t.charAt(0)?t:"/"+t}function Ht(t){return"/"===t.charAt(0)?t.substr(1):t}function It(t,e){return 0===t.toLowerCase().indexOf(e.toLowerCase())&&-1!=="/?#".indexOf(t.charAt(e.length))}function Vt(t,e){return It(t,e)?t.substr(e.length):t}function Ft(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t}function qt(t){var e=t.pathname,r=t.search,n=t.hash,i=e||"/";return r&&"?"!==r&&(i+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(i+="#"===n.charAt(0)?n:"#"+n),i}function Gt(t,e,r,n){var i;"string"==typeof t?(i=function(t){var e=t||"/",r="",n="",i=e.indexOf("#");-1!==i&&(n=e.substr(i),e=e.substr(0,i));var o=e.indexOf("?");return-1!==o&&(r=e.substr(o),e=e.substr(0,o)),{pathname:e,search:"?"===r?"":r,hash:"#"===n?"":n}}(t)).state=e:(void 0===(i=o({},t)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==e&&void 0===i.state&&(i.state=e));try{i.pathname=decodeURI(i.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}return r&&(i.key=r),n?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=function(t,e){void 0===e&&(e="");var r,n=t&&t.split("/")||[],i=e&&e.split("/")||[],o=t&&Nt(t),a=e&&Nt(e),s=o||a;if(t&&Nt(t)?i=n:n.length&&(i.pop(),i=i.concat(n)),!i.length)return"/";if(i.length){var u=i[i.length-1];r="."===u||".."===u||""===u}else r=!1;for(var c=0,f=i.length;f>=0;f--){var l=i[f];"."===l?Rt(i,f):".."===l?(Rt(i,f),c++):c&&(Rt(i,f),c--)}if(!s)for(;c--;c)i.unshift("..");!s||""===i[0]||i[0]&&Nt(i[0])||i.unshift("");var d=i.join("/");return r&&"/"!==d.substr(-1)&&(d+="/"),d}(i.pathname,n.pathname)):i.pathname=n.pathname:i.pathname||(i.pathname="/"),i}function Bt(){var t=null;var e=[];return{setPrompt:function(e){return"production"!==process.env.NODE_ENV&&Dt(null==t,"A history supports only one prompt at a time"),t=e,function(){t===e&&(t=null)}},confirmTransitionTo:function(e,r,n,i){if(null!=t){var o="function"==typeof t?t(e,r):t;"string"==typeof o?"function"==typeof n?n(o,i):("production"!==process.env.NODE_ENV&&Dt(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),i(!0)):i(!1!==o)}else i(!0)},appendListener:function(t){var r=!0;function n(){r&&t.apply(void 0,arguments)}return e.push(n),function(){r=!1,e=e.filter((function(t){return t!==n}))}},notifyListeners:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];e.forEach((function(t){return t.apply(void 0,r)}))}}}var Kt=!("undefined"==typeof window||!window.document||!window.document.createElement);function zt(t,e){e(window.confirm(t))}var Jt="popstate",$t="hashchange";function Yt(){try{return window.history.state||{}}catch(t){return{}}}function Wt(t){void 0===t&&(t={}),Kt||("production"!==process.env.NODE_ENV?Ut(!1,"Browser history needs a DOM"):Ut(!1));var e,r=window.history,n=(-1===(e=window.navigator.userAgent).indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,i=!(-1===window.navigator.userAgent.indexOf("Trident")),a=t,s=a.forceRefresh,u=void 0!==s&&s,c=a.getUserConfirmation,f=void 0===c?zt:c,l=a.keyLength,d=void 0===l?6:l,h=t.basename?Ft(Ct(t.basename)):"";function p(t){var e=t||{},r=e.key,n=e.state,i=window.location,o=i.pathname+i.search+i.hash;return"production"!==process.env.NODE_ENV&&Dt(!h||It(o,h),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+o+'" to begin with "'+h+'".'),h&&(o=Vt(o,h)),Gt(o,n,r)}function v(){return Math.random().toString(36).substr(2,d)}var m=Bt();function y(t){o(L,t),L.length=r.length,m.notifyListeners(L.location,L.action)}function g(t){(function(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS")})(t)||k(p(t.state))}function w(){k(p(Yt()))}var b=!1;function k(t){if(b)b=!1,y();else{m.confirmTransitionTo(t,"POP",f,(function(e){e?y({action:"POP",location:t}):function(t){var e=L.location,r=x.indexOf(e.key);-1===r&&(r=0);var n=x.indexOf(t.key);-1===n&&(n=0);var i=r-n;i&&(b=!0,_(i))}(t)}))}}var E=p(Yt()),x=[E.key];function S(t){return h+qt(t)}function _(t){r.go(t)}var O=0;function P(t){1===(O+=t)&&1===t?(window.addEventListener(Jt,g),i&&window.addEventListener($t,w)):0===O&&(window.removeEventListener(Jt,g),i&&window.removeEventListener($t,w))}var T=!1;var L={length:r.length,action:"POP",location:E,createHref:S,push:function(t,e){"production"!==process.env.NODE_ENV&&Dt(!("object"==typeof t&&void 0!==t.state&&void 0!==e),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var i="PUSH",o=Gt(t,e,v(),L.location);m.confirmTransitionTo(o,i,f,(function(t){if(t){var e=S(o),a=o.key,s=o.state;if(n)if(r.pushState({key:a,state:s},null,e),u)window.location.href=e;else{var c=x.indexOf(L.location.key),f=x.slice(0,c+1);f.push(o.key),x=f,y({action:i,location:o})}else"production"!==process.env.NODE_ENV&&Dt(void 0===s,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=e}}))},replace:function(t,e){"production"!==process.env.NODE_ENV&&Dt(!("object"==typeof t&&void 0!==t.state&&void 0!==e),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var i="REPLACE",o=Gt(t,e,v(),L.location);m.confirmTransitionTo(o,i,f,(function(t){if(t){var e=S(o),a=o.key,s=o.state;if(n)if(r.replaceState({key:a,state:s},null,e),u)window.location.replace(e);else{var c=x.indexOf(L.location.key);-1!==c&&(x[c]=o.key),y({action:i,location:o})}else"production"!==process.env.NODE_ENV&&Dt(void 0===s,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(e)}}))},go:_,goBack:function(){_(-1)},goForward:function(){_(1)},block:function(t){void 0===t&&(t=!1);var e=m.setPrompt(t);return T||(P(1),T=!0),function(){return T&&(T=!1,P(-1)),e()}},listen:function(t){var e=m.appendListener(t);return P(1),function(){P(-1),e()}}};return L}var Xt="hashchange",Qt={hashbang:{encodePath:function(t){return"!"===t.charAt(0)?t:"!/"+Ht(t)},decodePath:function(t){return"!"===t.charAt(0)?t.substr(1):t}},noslash:{encodePath:Ht,decodePath:Ct},slash:{encodePath:Ct,decodePath:Ct}};function Zt(t){var e=t.indexOf("#");return-1===e?t:t.slice(0,e)}function te(){var t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)}function ee(t){window.location.replace(Zt(window.location.href)+"#"+t)}function re(t){void 0===t&&(t={}),Kt||("production"!==process.env.NODE_ENV?Ut(!1,"Hash history needs a DOM"):Ut(!1));var e=window.history,r=-1===window.navigator.userAgent.indexOf("Firefox"),n=t,i=n.getUserConfirmation,a=void 0===i?zt:i,s=n.hashType,u=void 0===s?"slash":s,c=t.basename?Ft(Ct(t.basename)):"",f=Qt[u],l=f.encodePath,d=f.decodePath;function h(){var t=d(te());return"production"!==process.env.NODE_ENV&&Dt(!c||It(t,c),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+t+'" to begin with "'+c+'".'),c&&(t=Vt(t,c)),Gt(t)}var p=Bt();function v(t){o(P,t),P.length=e.length,p.notifyListeners(P.location,P.action)}var m=!1,y=null;function g(){var t,e,r=te(),n=l(r);if(r!==n)ee(n);else{var i=h(),o=P.location;if(!m&&(e=i,(t=o).pathname===e.pathname&&t.search===e.search&&t.hash===e.hash))return;if(y===qt(i))return;y=null,function(t){if(m)m=!1,v();else{var e="POP";p.confirmTransitionTo(t,e,a,(function(r){r?v({action:e,location:t}):function(t){var e=P.location,r=E.lastIndexOf(qt(e));-1===r&&(r=0);var n=E.lastIndexOf(qt(t));-1===n&&(n=0);var i=r-n;i&&(m=!0,x(i))}(t)}))}}(i)}}var w=te(),b=l(w);w!==b&&ee(b);var k=h(),E=[qt(k)];function x(t){"production"!==process.env.NODE_ENV&&Dt(r,"Hash history go(n) causes a full page reload in this browser"),e.go(t)}var S=0;function _(t){1===(S+=t)&&1===t?window.addEventListener(Xt,g):0===S&&window.removeEventListener(Xt,g)}var O=!1;var P={length:e.length,action:"POP",location:k,createHref:function(t){var e=document.querySelector("base"),r="";return e&&e.getAttribute("href")&&(r=Zt(window.location.href)),r+"#"+l(c+qt(t))},push:function(t,e){"production"!==process.env.NODE_ENV&&Dt(void 0===e,"Hash history cannot push state; it is ignored");var r="PUSH",n=Gt(t,void 0,void 0,P.location);p.confirmTransitionTo(n,r,a,(function(t){if(t){var e=qt(n),i=l(c+e);if(te()!==i){y=e,function(t){window.location.hash=t}(i);var o=E.lastIndexOf(qt(P.location)),a=E.slice(0,o+1);a.push(e),E=a,v({action:r,location:n})}else"production"!==process.env.NODE_ENV&&Dt(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),v()}}))},replace:function(t,e){"production"!==process.env.NODE_ENV&&Dt(void 0===e,"Hash history cannot replace state; it is ignored");var r="REPLACE",n=Gt(t,void 0,void 0,P.location);p.confirmTransitionTo(n,r,a,(function(t){if(t){var e=qt(n),i=l(c+e);te()!==i&&(y=e,ee(i));var o=E.indexOf(qt(P.location));-1!==o&&(E[o]=e),v({action:r,location:n})}}))},go:x,goBack:function(){x(-1)},goForward:function(){x(1)},block:function(t){void 0===t&&(t=!1);var e=p.setPrompt(t);return O||(_(1),O=!0),function(){return O&&(O=!1,_(-1)),e()}},listen:function(t){var e=p.appendListener(t);return _(1),function(){_(-1),e()}}};return P}function ne(t,e,r){return Math.min(Math.max(t,e),r)}var ie=function(t){function e(e){var r;if(l(u(r=t.call(this)||this),"_unlistenHistory",void 0),l(u(r),"history",void 0),l(u(r),"serverSide",!1),"Hash"===e)r.history=re();else if("Memory"===e)r.history=function(t){void 0===t&&(t={});var e=t,r=e.getUserConfirmation,n=e.initialEntries,i=void 0===n?["/"]:n,a=e.initialIndex,s=void 0===a?0:a,u=e.keyLength,c=void 0===u?6:u,f=Bt();function l(t){o(y,t),y.length=y.entries.length,f.notifyListeners(y.location,y.action)}function d(){return Math.random().toString(36).substr(2,c)}var h=ne(s,0,i.length-1),p=i.map((function(t){return Gt(t,void 0,"string"==typeof t?d():t.key||d())})),v=qt;function m(t){var e=ne(y.index+t,0,y.entries.length-1),n=y.entries[e];f.confirmTransitionTo(n,"POP",r,(function(t){t?l({action:"POP",location:n,index:e}):l()}))}var y={length:p.length,action:"POP",location:p[h],index:h,entries:p,createHref:v,push:function(t,e){"production"!==process.env.NODE_ENV&&Dt(!("object"==typeof t&&void 0!==t.state&&void 0!==e),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var n="PUSH",i=Gt(t,e,d(),y.location);f.confirmTransitionTo(i,n,r,(function(t){if(t){var e=y.index+1,r=y.entries.slice(0);r.length>e?r.splice(e,r.length-e,i):r.push(i),l({action:n,location:i,index:e,entries:r})}}))},replace:function(t,e){"production"!==process.env.NODE_ENV&&Dt(!("object"==typeof t&&void 0!==t.state&&void 0!==e),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var n="REPLACE",i=Gt(t,e,d(),y.location);f.confirmTransitionTo(i,n,r,(function(t){t&&(y.entries[y.index]=i,l({action:n,location:i}))}))},go:m,goBack:function(){m(-1)},goForward:function(){m(1)},canGo:function(t){var e=y.index+t;return e>=0&&e<y.entries.length},block:function(t){return void 0===t&&(t=!1),f.setPrompt(t)},listen:function(t){return f.appendListener(t)}};return y}();else if("Browser"===e)r.history=Wt();else{r.serverSide=!0;var n=e.split("?"),i=n[0],a=n[1],c=void 0===a?"":a;r.history={action:"PUSH",length:0,listen:function(){return function(){}},createHref:function(){return""},push:function(){},replace:function(){},go:function(){},goBack:function(){},goForward:function(){},block:function(){return function(){}},location:{pathname:i,search:c&&"?"+c,hash:""}}}return r._unlistenHistory=r.history.block((function(t,e){var n=t.pathname,i=void 0===n?"":n,o=t.search,a=void 0===o?"":o,u=t.hash,c=[i,a,void 0===u?"":u].join(""),f=r.getKey(t);if(r.onChange(f)){var l,d=-1;return"POP"===e&&(d=r.router.findHistoryIndex(f)),(l=d>-1?function(){return r.router.back(d+1,"",!1,!1)}:"REPLACE"===e?function(){return r.router.replace(c,!1,!1)}:"PUSH"===e?function(){return r.router.push(c,!1,!1)}:function(){return r.router.relaunch(c,!1,!1)})&&s.setTimeout(l,50),!1}})),r}f(e,t);var r=e.prototype;return r.getUrl=function(){var t=this.history.location,e=t.pathname,r=void 0===e?"":e,n=t.search,i=void 0===n?"":n,o=t.hash;return[r,i,void 0===o?"":o].join("")},r.getKey=function(t){return t.state||""},r.passive=function(t,e,r){return!0},r.refresh=function(){this.history.go(0)},r.push=function(t,e){if(!this.serverSide){var r=t();return this.history.push(r.nativeUrl,e),r}},r.replace=function(t,e){if(!this.serverSide){var r=t();return this.history.replace(r.nativeUrl,e),r}},r.relaunch=function(t,e){if(!this.serverSide){var r=t();return this.history.push(r.nativeUrl,e),r}},r.back=function(t,e,r){if(!this.serverSide){var n=t();return this.history.go(-e),n}},r.toOutside=function(t){this.history.push(t)},r.destroy=function(){this._unlistenHistory()},e}(Tt),oe=function(t){function e(e,r){return t.call(this,e.getUrl(),e,r)||this}return f(e,t),e}(Lt);function ae(t,e){var r=new ie(t);return new oe(r,e)}function se(t,e){if(null==t)return{};var r,n,i={},o=Object.keys(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||(i[r]=t[r]);return i}var ue={LoadViewOnError:function(t){var e=t.message;return i.default.createElement("div",{className:"g-view-error"},e)},LoadViewOnLoading:function(){return i.default.createElement("div",{className:"g-view-loading"},"loading...")}};var ce=function(t,r,n){var a=n||{},c=a.OnLoading,d=a.OnError,h=function(e){function n(t){var r;return l(u(r=e.call(this,t)||this),"active",!0),l(u(r),"loading",!1),l(u(r),"error",""),l(u(r),"view",void 0),l(u(r),"state",{ver:0}),r.execute(),r}f(n,e);var a=n.prototype;return a.componentWillUnmount=function(){this.active=!1},a.shouldComponentUpdate=function(){return this.execute(),!0},a.componentDidMount=function(){this.error=""},a.execute=function(){var e=this;if(!this.view&&!this.loading&&!this.error){var n;this.loading=!0;try{n=function(t,e){var r=function(t){var r=t.default.views[e];return s.isServer||t.default.model(b.clientStore),r},n=F(t);return m(n)?n.then(r):r(n)}(t,r)}catch(t){this.loading=!1,this.error=t.message||""+t}n&&(m(n)?n.then((function(t){e.loading=!1,e.view=t,e.active&&e.setState({ver:e.state.ver+1})}),(function(t){s.console.error(t),e.loading=!1,e.error=t.message||""+t||"error",e.active&&e.setState({ver:e.state.ver+1})})):(this.loading=!1,this.view=n))}},a.render=function(){var t=this.props,e=t.forwardedRef,r=se(t,["forwardedRef"]);if(this.view)return i.default.createElement(this.view,o({ref:e},r));if(this.loading){var n=c||ue.LoadViewOnLoading;return i.default.createElement(n,null)}var a=d||ue.LoadViewOnError;return i.default.createElement(a,{message:this.error})},n}(e.Component);return i.default.forwardRef((function(t,e){return i.default.createElement(h,o({},t,{forwardedRef:e}))}))},fe={router:void 0},le=i.default.memo((function(t){var r=t.children,n="";return i.default.Children.forEach(r,(function(t){t&&"title"===t.type&&(n=t.props.children)})),y()?i.default.createElement("head",null,r):(e.useEffect((function(){n&&(s.document.title=n)}),[n]),null)})),de=i.default.memo((function(t){var e=t.children,r=t.elseView,n=[];return i.default.Children.forEach(e,(function(t){t&&n.push(t)})),n.length>0?i.default.createElement(i.default.Fragment,null,n):i.default.createElement(i.default.Fragment,null,r)})),he=i.default.memo((function(t){var e=t.children,r=t.elseView,n=[];return i.default.Children.forEach(e,(function(t){t&&n.push(t)})),n.length>0?i.default.createElement(i.default.Fragment,null,n[0]):i.default.createElement(i.default.Fragment,null,r)}));var pe,ve=i.default.forwardRef((function(t,e){var r=t.onClick,n=t.replace,a=se(t,["onClick","replace"]),s=a.target,u=o({},a,{onClick:function(t){try{r&&r(t)}catch(e){throw t.preventDefault(),e}t.defaultPrevented||0!==t.button||s&&"_self"!==s||function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)||(t.preventDefault(),n?fe.router.replace(a.href):fe.router.push(a.href))}});return i.default.createElement("a",o({},u,{ref:e}))}));var me=function(t,e,r){return{moduleName:t,model:function(r){if(!r.injectedModules[t]){var n=new e;r.injectedModules[t]=n,n.moduleName=t,n.store=r,n.actions=b.facadeMap[t].actions,E(t,n);var i=n.initState;return r.getState(t)?r.dispatch(function(t,e){return{type:""+t+g.NSP+w.MReInit,payload:[e]}}(t,i)):r.dispatch(function(t,e){return{type:""+t+g.NSP+w.MInit,payload:[e]}}(t,i))}},views:r,initState:void 0,actions:void 0}};t.ActionTypes=w,t.BaseModuleHandlers=ht,t.DocumentHead=le,t.Else=de,t.Link=ve,t.RouteActionTypes=pt,t.Switch=he,t.clientSide=function(t){if(!s.isServer)return t()},t.createApp=function(t,e,n,a){void 0===e&&(e=[]),void 0===n&&(n="app"),void 0===a&&(a="main");var u=[yt].concat(e);return{useRoute:function(e){var c=e.locationTransform;return{useStore:function(e){var f=e.storeOptions,l=e.storeCreator;return{render:function(e){var d=void 0===e?{}:e,h=d.id,p=void 0===h?"root":h,v=d.ssrKey,m=void 0===v?"meduxInitStore":v,y=ae("Browser",c),g=y.getRouteState(),w=s[m],k=w?r.hydrate:r.render,E=s.document.getElementById(p),x=o({},f.initState,{route:g},w),S=function(t,e,r,n,i,o){void 0===i&&(i="app"),void 0===o&&(o="main"),b.appModuleName=i,b.appViewName=o,b.moduleGetter||(b.moduleGetter=r);var a=W(t,n);return e=e.filter((function(t){return r[t]&&t!==i})),{store:a,beforeRender:function(){return Z(X.mark((function t(){var r;return X.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return et&&(s.clearTimeout(et),et=0),b.clientStore=a,t.next=4,q(i,a);case 4:return t.next=6,Promise.all(e.map((function(t){return q(t,a)})));case 6:return r=F(i),t.abrupt("return",{appView:r.default.views[o],setReRender:function(t){tt=t}});case 8:case"end":return t.stop()}}),t)})))()}}}(l(o({},f,{initState:x})),Object.keys(x),t,u,n,a),_=S.store,O=S.beforeRender;return y.setStore(_),fe.router=y,{store:_,run:function(){return O().then((function(t){var e=t.appView,n=t.setReRender,o=function(t){r.unmountComponentAtNode(E),k(i.default.createElement(t,{store:_}),E)};o(e),n(o)}))}}},ssr:function(e){var r=e.id,d=void 0===r?"root":r,h=e.ssrKey,p=void 0===h?"meduxInitStore":h,v=e.url;pe||(pe=s.decodeBas64("process.env.MEDUX_ENV_SSRTPL"));var m=ae(v,c),y=m.getRouteState(),g=o({},f.initState,{route:y}),w=function(t,e,r,n,i,o){void 0===i&&(i="app"),void 0===o&&(o="main"),b.appModuleName=i,b.appViewName=o,b.moduleGetter||(b.moduleGetter=r);var a=W(t,n);return e=e.filter((function(t){return r[t]&&t!==i})),{store:a,beforeRender:function(){return Z(X.mark((function t(){var r;return X.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q(i,a);case 2:return t.next=4,Promise.all(e.map((function(t){return q(t,a)})));case 4:return r=F(i),a.dispatch=nt,t.abrupt("return",{appView:r.default.views[o]});case 7:case"end":return t.stop()}}),t)})))()}}}(l(o({},f,{initState:g})),Object.keys(y.params),t,u,n,a),k=w.store,E=w.beforeRender;return m.setStore(k),fe.router=m,{store:k,run:function(){return E().then((function(t){var e=t.appView,r=k.getState(),n=require("react-dom/server").renderToString(i.default.createElement(e,{store:k})),o=pe.match(new RegExp("<[^<>]+id=['\"]"+d+"['\"][^<>]*>","m"));if(o){var a=n.split(/<head>|<\/head>/,3);return n=3===a.length?a[0]+a[2]:n,pe.replace("</head>",(a[1]||"")+"\r\n<script>window."+p+" = "+JSON.stringify(r)+";<\/script>\r\n</head>").replace(o[0],o[0]+n)}return n}))}}}}}}}}},t.createLocationTransform=function(t,e,r,n,i){void 0===n&&(n="/404"),void 0===i&&(i="_"),it.defaultParams=t;var o=Object.keys(e);return e=o.sort((function(t,e){return e.length-t.length})).reduce((function(t,r){return t[("/"+r+"/").replace(/^\/+|\/+$/g,"/")]=e[r],t}),{}),it.pagenames=o.reduce((function(t,e){return t[e]=e,t}),{}),o=Object.keys(e),{in:function(t){var a;Ot(t)?(t=r.in(t),a=t.pathname):a=t.pagename,a=("/"+a+"/").replace(/^\/+|\/+$/g,"/");var s,u=o.find((function(t){return a.startsWith(t)}));if(u)if(Ot(t)){var c=t.searchData&&t.searchData[i]?JSON.parse(t.searchData[i]):void 0,f=t.hashData&&t.hashData[i]?JSON.parse(t.hashData[i]):void 0,l=a.replace(u,"").split("/").map((function(t){return t?decodeURIComponent(t):void 0}));s=v(e[u].argsToParams(l),c,f)}else{s=v(e[u].argsToParams([]),t.params)}else s=e[u=n+"/"]?e[u].argsToParams([a.replace(/\/$/,"")]):{};return{pagename:"/"+u.replace(/^\/+|\/+$/g,""),params:_t(s)}},out:function(n){var o,a,s,u,c=Et(n.params,t,!0),f=("/"+n.pagename+"/").replace(/^\/+|\/+$/g,"/");if(e[f]){var l=e[f].paramsToArgs(c).map((function(t){if(null!=t)return t.toString()}));s=e[f].argsToParams(l),u=f+l.map((function(t){return t&&encodeURIComponent(t)})).join("/").replace(/\/*$/,"")}else s={},u=f;var d=St(c=Et(c,s,!1),s),h={pathname:"/"+u.replace(/^\/+|\/+$/g,""),searchData:d[0]?(o={},o[i]=JSON.stringify(d[0]),o):void 0,hashData:d[1]?(a={},a[i]=JSON.stringify(d[1]),a):void 0};return r.out(h)}}},t.deepMerge=v,t.deepMergeState=O,t.effect=function(t,e){return void 0===t&&(t="global",e=b.appModuleName||""),function(r,n,i){n||i||(n=r.key,i=r.descriptor);var o=i.value;if(o.__isEffect__=!0,i.enumerable=!0,t){o.__decorators__||(o.__decorators__=[]),o.__decorators__.push([function(r,n,i){s.isServer||(""===e?e=b.appModuleName:e||(e=n),S(i,e,t))},null])}return r.descriptor===i?r:i}},t.env=s,t.errorAction=T,t.exportModule=me,t.getApp=function(){var t=K();return{GetActions:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.reduce((function(e,r){return e[r]=t[r].actions,e}),{})},GetRouter:function(){return fe.router},LoadView:ce,Modules:t,Pagenames:it.pagenames}},t.isProcessedError=z,t.isServer=y,t.logger=function(t,e){return function(r,n,i){n||i||(n=r.key,i=r.descriptor);var o=i.value;o.__decorators__||(o.__decorators__=[]),o.__decorators__.push([t,e])}},t.modelHotReplacement=function(t,e){var r=b.clientStore;if(r.injectedModules[t]){B(t,b.reducersMap),B(t,b.effectsMap);var n=new e;r.injectedModules[t]=n,n.moduleName=t,n.store=r,n.actions=b.facadeMap[t].actions,E(t,n),s.console.log("[HMR] @medux Updated model: "+t)}},t.patchActions=function(t,e){e&&K(JSON.parse(e))},t.reducer=_,t.serverSide=function(t){if(s.isServer)return t()},t.setConfig=function(t){var e,r,n,i;void 0!==(e=t).NSP&&(g.NSP=e.NSP),void 0!==e.MSP&&(g.MSP=e.MSP),void 0!==e.MutableData&&(g.MutableData=e.MutableData),void 0!==e.DepthTimeOnLoading&&(g.DepthTimeOnLoading=e.DepthTimeOnLoading),ot(t),n=(r=t).LoadViewOnError,i=r.LoadViewOnLoading,n&&(ue.LoadViewOnError=n),i&&(ue.LoadViewOnLoading=i)},t.setLoading=S,t.setProcessedError=J,t.setSsrHtmlTpl=function(t){pe=t},t.viewHotReplacement=function(t,e){var r=b.moduleGetter[t]();if(!r)throw"views cannot apply update for HMR.";r.default.views=e,s.console.warn("[HMR] @medux Updated views: "+t),rt=b.moduleGetter[b.appModuleName]().default.views[b.appViewName],et||(et=s.setTimeout((function(){et=0,tt(rt),s.console.warn("[HMR] @medux view re rendering")}),0))},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=index.min.js.map
